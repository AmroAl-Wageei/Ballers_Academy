"use strict";(self.webpackChunkMailPoet3=self.webpackChunkMailPoet3||[]).push([[571],{27575:function(e,t,s){var i={};s.r(i),s.d(i,{loadSettings:function(){return x},openWoocommerceCustomizer:function(){return z},recalculateSubscribersScore:function(){return R},reinstall:function(){return P},saveSettings:function(){return _},sendCongratulatoryMssEmail:function(){return V},sendTestEmail:function(){return U},setErrorFlag:function(){return h},setReEngagement:function(){return g},setSaveDone:function(){return p},setSetting:function(){return d},setSettings:function(){return u},updateKeyActivationState:function(){return m},verifyMssKey:function(){return D},verifyPremiumKey:function(){return F}});var n={};s.r(n),s.d(n,{getAmazonSesOptions:function(){return ne},getDefaultSegments:function(){return Q},getKeyActivationState:function(){return te},getPages:function(){return ee},getPaths:function(){return se},getReEngagementAction:function(){return le},getSavingError:function(){return W},getSegments:function(){return Z},getSendGridOptions:function(){return ae},getSetting:function(){return O},getSettings:function(){return G},getTestEmailState:function(){return re},getWebHosts:function(){return ie},hasErrorFlag:function(){return B},hasMembersPlugin:function(){return q},hasReEngagementNotice:function(){return oe},hasSavingError:function(){return Y},hasUnsavedChanges:function(){return ce},hasWooCommerce:function(){return $},isBuiltInCaptchaSupported:function(){return H},isMssActive:function(){return J},isNewUser:function(){return X},isSaving:function(){return K}});var a={};s.r(a),s.d(a,{CALL_API:function(){return me.t},TRACK_REINSTALLED:function(){return ue},TRACK_SETTINGS_SAVED:function(){return de},TRACK_TEST_EMAIL_SENT:function(){return pe},TRACK_UNAUTHORIZED_EMAIL:function(){return he}}),s(13979);var r=s(64151),o=s(76087),l=s(38104);const c="mailpoet-settings";function m(e){return{type:"UPDATE_KEY_ACTIVATION_STATE",fields:e}}function d(e,t){return{type:"SET_SETTING",path:e,value:t}}function u(e){return{type:"SET_SETTINGS",value:e}}function p(){return{type:"SAVE_DONE"}}function h(e){return{type:"SET_ERROR_FLAG",value:e}}function g(e){return{type:"SET_RE_ENGAGEMENT_NOTICE",value:e}}function*_(){yield{type:"SAVE_STARTED"};const e=(0,l.select)(c).getSettings(),t=JSON.stringify(e),s=JSON.parse(t,((e,t)=>"string"==typeof t?t.trim():t)),{success:i,error:n,res:a}=yield{type:"CALL_API",endpoint:"settings",action:"set",data:s};return i?(yield{type:"TRACK_SETTINGS_SAVED"},yield m({congratulatoryMssEmailSentTo:null,fromAddressModalCanBeShown:!1}),yield u(a.data),yield g(a.meta),yield{type:"TRACK_UNAUTHORIZED_EMAIL",meta:a.meta},{type:"SAVE_DONE"}):{type:"SAVE_FAILED",error:n}}function*x(){const{success:e,error:t,res:s}=yield{type:"CALL_API",endpoint:"settings",action:"get"};return e?u(s.data):{type:"SAVE_FAILED",error:t}}var j=s(62668);let b,v,f,y;!function(e){e[e.INVALID=0]="INVALID",e[e.VALID_PREMIUM_PLUGIN_NOT_INSTALLED=1]="VALID_PREMIUM_PLUGIN_NOT_INSTALLED",e[e.VALID_PREMIUM_PLUGIN_NOT_ACTIVE=2]="VALID_PREMIUM_PLUGIN_NOT_ACTIVE",e[e.VALID_PREMIUM_PLUGIN_ACTIVE=3]="VALID_PREMIUM_PLUGIN_ACTIVE",e[e.VALID_PREMIUM_PLUGIN_BEING_INSTALLED=4]="VALID_PREMIUM_PLUGIN_BEING_INSTALLED",e[e.VALID_PREMIUM_PLUGIN_BEING_ACTIVATED=5]="VALID_PREMIUM_PLUGIN_BEING_ACTIVATED"}(b||(b={})),function(e){e[e.INVALID=0]="INVALID",e[e.VALID_MSS_NOT_ACTIVE=1]="VALID_MSS_NOT_ACTIVE",e[e.VALID_MSS_ACTIVE=2]="VALID_MSS_ACTIVE",e[e.VALID_UNDERPRIVILEGED=3]="VALID_UNDERPRIVILEGED"}(v||(v={})),function(e){e[e.INSTALL_INSTALLING=0]="INSTALL_INSTALLING",e[e.INSTALL_ACTIVATING=1]="INSTALL_ACTIVATING",e[e.INSTALL_DONE=2]="INSTALL_DONE",e[e.INSTALL_INSTALLING_ERROR=3]="INSTALL_INSTALLING_ERROR",e[e.INSTALL_ACTIVATING_ERROR=4]="INSTALL_ACTIVATING_ERROR",e[e.ACTIVATE_ACTIVATING=5]="ACTIVATE_ACTIVATING",e[e.ACTIVATE_DONE=6]="ACTIVATE_DONE",e[e.ACTIVATE_ERROR=7]="ACTIVATE_ERROR"}(f||(f={})),function(e){e[e.SENDING=0]="SENDING",e[e.NONE=1]="NONE",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(y||(y={}));var I=s(61888),S=s.n(I),k=s(1057);function E(e){return t=>void 0===t?e:t?`${t}`:""}function N(e,t,s){return i=>void 0===i?s:i===e||i===t?i:i?e:t}function A(e,t){return s=>e.includes(s)?s:t}function T(e){return t=>Object.keys(e).reduce(((s,i)=>({[i]:e[i](t?t[i]:void 0),...s})),{})}function C(e){return e}function w(e){const t=E(""),s=N("1","0","0"),i=N("1","0","1"),n=N("1","",""),a=N("1","","1"),r=(o=[],e=>S().isArray(e)?e.map(E("")):o);var o;const l=A(["server","manual","AmazonSES","SendGrid"],"server");return T({sender:T({name:t,address:t}),reply_to:T({name:t,address:t}),bounce:T({address:t}),subscribe:T({on_comment:T({enabled:s,label:E((0,k.t)("yesAddMe")),segments:r}),on_register:T({enabled:s,label:E((0,k.t)("yesAddMe")),segments:r})}),subscription:T({pages:T({manage:t,unsubscribe:t,confirmation:t,captcha:t,confirm_unsubscribe:t}),segments:r}),stats_notifications:T({enabled:i,automated:i,address:t}),subscriber_email_notification:T({enabled:a,address:t}),reEngagement:T({page:t}),cron_trigger:T({method:A(["WordPress","Action Scheduler","Linux Cron"],"Action Scheduler")}),tracking:T({level:A(["full","partial","basic"],"full")}),send_transactional_emails:n,deactivate_subscriber_after_inactive_days:A(["","90","180","365","540"],"365"),analytics:T({enabled:n}),"3rd_party_libs":T({enabled:n}),captcha:T({type:A(["","built-in","recaptcha","recaptcha-invisible"],"built-in"),recaptcha_site_token:t,recaptcha_secret_token:t,recaptcha_invisible_site_token:t,recaptcha_invisible_secret_token:t}),logging:A(["everything","errors","nothing"],"errors"),mta_group:A(["mailpoet","website","smtp"],"website"),mta:T({method:A(["MailPoet","AmazonSES","SendGrid","PHPMail","SMTP"],"PHPMail"),frequency:T({emails:E("25"),interval:E("5")}),mailpoet_api_key:t,host:t,port:t,region:E("us-east-1"),access_key:t,secret_key:t,api_key:t,login:t,password:t,encryption:t,authentication:A(["1","-1"],"1"),mailpoet_api_key_state:T({state:A(["valid","invalid","expiring","already_used","check_error","valid_underprivileged"],"check_error"),data:C,code:C})}),mailpoet_smtp_provider:l,smtp_provider:l,web_host:E("manual"),mailpoet_sending_frequency:A(["auto","manual"],"manual"),signup_confirmation:T({enabled:a,subject:t,body:t}),woocommerce:T({use_mailpoet_editor:n,transactional_email_id:t,optin_on_checkout:T({enabled:a,segments:r,message:t}),accept_cookie_revenue_tracking:T({set:a})}),mailpoet_subscribe_old_woocommerce_customers:T({enabled:s}),premium:T({premium_key:t,premium_key_state:T({state:A(["valid","invalid","expiring","already_used","check_error"],"check_error"),data:C})}),authorized_emails_addresses_check:C})(e)}function L(e,t){return e?"MailPoet"===t.mta.method?v.VALID_MSS_ACTIVE:v.VALID_MSS_NOT_ACTIVE:"valid_underprivileged"===t.mta.mailpoet_api_key_state.state?v.VALID_UNDERPRIVILEGED:v.INVALID}function M(e){const t=e.mailpoet_pages,s=e.mailpoet_paths,i=e.mailpoet_segments,n=e.mailpoet_hosts,a=w(e.mailpoet_settings),r=a,o={error:!1,newUser:!!e.mailpoet_is_new_user,woocommerce:!!e.mailpoet_woocommerce_active,membersPlugin:!!e.mailpoet_members_plugin_active,builtInCaptcha:e.mailpoet_built_in_captcha_supported};let l=null,c=null,m=null;return(a.premium.premium_key||a.mta.mailpoet_api_key)&&(c=L(e.mailpoet_mss_key_valid,a),m=function(e,t){const s=!!j.x.premiumVersion;return e?s?b.VALID_PREMIUM_PLUGIN_ACTIVE:t?b.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:b.VALID_PREMIUM_PLUGIN_NOT_INSTALLED:b.INVALID}(e.mailpoet_premium_key_valid,e.mailpoet_premium_plugin_installed),l=c!==v.INVALID||m!==b.INVALID),{data:a,originalData:r,flags:o,save:{inProgress:!1,error:null,hasUnsavedChanges:!1},keyActivation:{isKeyValid:l,mssStatus:c,premiumStatus:m,mssMessage:null,premiumMessage:null,fromAddressModalCanBeShown:!1,premiumInstallationStatus:null,key:a.premium.premium_key||a.mta.mailpoet_api_key,inProgress:!1,congratulatoryMssEmailSentTo:null,downloadUrl:e.mailpoet_premium_plugin_download_url,activationUrl:e.mailpoet_premium_plugin_activation_url},segments:i,pages:t,paths:s,hosts:n,testEmail:{state:y.NONE,error:null},reEngagement:{showNotice:!1,action:null}}}function*D(e){const{success:t,error:s,res:i}=yield{type:"CALL_API",endpoint:"services",action:"checkMSSKey",data:{key:e}};if(!t)return m({mssStatus:v.INVALID,mssMessage:s.join(" ")||null});const n={mssMessage:i.data.message||null};if("valid_underprivileged"===i.data.state)return n.mssStatus=v.VALID_UNDERPRIVILEGED,m(n);const a=(0,l.select)(c).getSettings();a.mta_group="mailpoet",a.mta={...a.mta,method:"MailPoet",mailpoet_api_key:e},a.signup_confirmation.enabled="1";const r=yield{type:"CALL_API",endpoint:"settings",action:"set",data:a};return r.success?(yield u(r.res.data),n.mssStatus=L(200===Number(r.res.data.mta.mailpoet_api_key_state.code),r.res.data)):n.mssStatus=v.VALID_MSS_NOT_ACTIVE,m(n)}function*F(e){var t,s,i;const{res:n,success:a,error:r}=yield{type:"CALL_API",endpoint:"services",action:"checkPremiumKey",data:{key:e}};var o;if(!a)return j.x.trackEvent("User has failed to validate a Premium key",{"Premium plugin is active":!!j.x.premiumVersion}),m({premiumStatus:b.INVALID,premiumMessage:r.join(" ")||null,code:null==n||null===(o=n.meta)||void 0===o?void 0:o.code});yield d(["premium","premium_key"],e);const l=n.meta.premium_plugin_active;let c=n.meta.premium_plugin_installed?b.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:b.VALID_PREMIUM_PLUGIN_NOT_INSTALLED;return l&&(c=b.VALID_PREMIUM_PLUGIN_ACTIVE),yield m({premiumMessage:null,premiumStatus:c,code:null==n||null===(t=n.meta)||void 0===t?void 0:t.code,downloadUrl:null==n||null===(s=n.meta)||void 0===s||null===(i=s.premium_plugin_info)||void 0===i?void 0:i.download_link}),j.x.trackEvent("User has validated a Premium key"),yield{type:"SAVE_DONE"},null}function*V(){const e=yield{type:"CALL_API",endpoint:"services",action:"sendCongratulatoryMssEmail"};return e&&e.success?m({congratulatoryMssEmailSentTo:e.res.data.email_address}):null}function*P(){j.x.Modal.loading(!0);const{success:e,error:t}=yield{type:"CALL_API",endpoint:"setup",action:"reset"};return j.x.Modal.loading(!1),e?(yield{type:"TRACK_REINSTALLED"},{type:"SAVE_DONE"}):{type:"SAVE_FAILED",error:t}}function*R(){return j.x.Modal.loading(!0),yield{type:"CALL_API",endpoint:"settings",action:"recalculateSubscribersScore"},j.x.Modal.loading(!1),{type:"SAVE_DONE"}}function*U(e,t){if(!e)return{type:"TEST_EMAIL_FAILED",error:[(0,k.t)("cantSendEmail")]};yield{type:"START_TEST_EMAIL_SENDING"};const s=yield{type:"CALL_API",endpoint:"mailer",action:"send",data:{mailer:t,newsletter:{subject:(0,k.t)("testEmailSubject"),body:{html:`<p>${(0,k.t)("testEmailBody")}</p>`,text:(0,k.t)("testEmailBody")}},subscriber:e}};return yield{type:"TRACK_TEST_EMAIL_SENT",success:s.success,method:t.method},s.success?{type:"TEST_EMAIL_SUCCESS"}:{type:"TEST_EMAIL_FAILED",error:s.error}}function*z(e){let t=e;if(!t){const{res:e,success:s,error:i}=yield{type:"CALL_API",endpoint:"settings",action:"set",data:{"woocommerce.use_mailpoet_editor":1}};if(!s)return{type:"SAVE_FAILED",error:i};t=e.data.woocommerce.transactional_email_id}return window.location.href=`?page=mailpoet-newsletter-editor&id=${t}`,null}function O(e,t){return S().get(e.data,t)}function G(e){return e.data}function K(e){return e.save.inProgress}function B(e){return e.flags.error}function Y(e){return null!==e.save.error}function W(e){return e.save.error}function $(e){return e.flags.woocommerce}function q(e){return e.flags.membersPlugin}function H(e){return e.flags.builtInCaptcha}function X(e){return e.flags.newUser}function J(e){return"MailPoet"===S().get(e,"data.mta.method")}function Z(e){return e.segments}function Q(e){return e.segments.filter((e=>"default"===e.type))}function ee(e){return e.pages}function te(e){return e.keyActivation}function se(e){return e.paths}function ie(e){return{...e.hosts.web,manual:{name:(0,k.t)("notListed"),emails:25,interval:5}}}function ne(e){return e.hosts.smtp.AmazonSES}function ae(e){return e.hosts.smtp.SendGrid}function re(e){return e.testEmail}function oe(e){return e.reEngagement.showNotice}function le(e){return e.reEngagement.action}function ce(e){return e.save.hasUnsavedChanges||e.save.inProgress}var me=s(44794);function de(){const e=(0,l.select)(c).getSettings(),t={"Sending method type":e.mta_group||null,"Sending frequency (emails)":"mailpoet"!==e.mta_group&&e.mta&&e.mta.frequency&&e.mta.frequency.emails,"Sending frequency (interval)":"mailpoet"!==e.mta_group&&e.mta&&e.mta.frequency&&e.mta.frequency.interval,"Sending provider":"smtp"===e.mta_group&&e.smtp_provider,"Sign-up confirmation enabled":e.signup_confirmation&&e.signup_confirmation.enabled,"Bounce email is present":e.bounce&&""!==e.bounce.address,"Newsletter task scheduler method":e.cron_trigger&&e.cron_trigger.method};j.x.isWoocommerceActive&&(t["WooCommerce email customizer enabled"]=e.woocommerce&&e.woocommerce.use_mailpoet_editor),j.x.trackEvent("User has saved Settings",t)}function ue(){j.x.trackEvent("User has reinstalled MailPoet via Settings")}function pe(e){j.x.trackEvent("User has sent a test email from Settings",{"Sending was successful":!!e.success,"Sending method type":e.method})}function he(e){void 0!==e.meta&&e.meta.invalid_sender_address&&j.x.trackEvent("Unauthorized email used",{"Unauthorized email source":"settings"})}function ge(e){let t;return function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case"SET_SETTING":{const e=(0,I.setWith)((0,I.clone)(s),["data",...i.path],i.value,I.clone);return e.save.hasUnsavedChanges=!(0,I.isEqual)(e.data,s.originalData),e}case"SET_SETTINGS":{const e={...s,data:w(i.value)};return e.save.hasUnsavedChanges=!(0,I.isEqual)(e.data,s.originalData),e}case"SET_ERROR_FLAG":return{...s,flags:{...s.flags,error:!!i.value}};case"SAVE_STARTED":return{...s,save:{inProgress:!0,error:null,hasUnsavedChanges:s.save.hasUnsavedChanges}};case"SAVE_DONE":return{...s,save:{inProgress:!1,error:null,hasUnsavedChanges:!1}};case"SAVE_FAILED":return{...s,save:{inProgress:!1,error:i.error,hasUnsavedChanges:s.save.hasUnsavedChanges}};case"SET_RE_ENGAGEMENT_NOTICE":return{...s,reEngagement:{showNotice:i.value.showNotice,action:i.value.action}};case"UPDATE_KEY_ACTIVATION_STATE":return t={...s.keyActivation,...i.fields},t.isKeyValid=null,null!==t.mssStatus&&null!==t.premiumStatus&&(t.isKeyValid=t.mssStatus!==v.INVALID||t.premiumStatus!==b.INVALID),{...s,keyActivation:t};case"START_TEST_EMAIL_SENDING":return{...s,testEmail:{state:y.SENDING,error:null}};case"TEST_EMAIL_SUCCESS":return{...s,testEmail:{state:y.SUCCESS,error:null}};case"TEST_EMAIL_FAILED":return{...s,testEmail:{state:y.FAILURE,error:i.error}};default:return s}}}var _e=s(1349),xe=s(15317),je=s(17768),be=s(84663),ve=s(33684),fe=s(51931),ye=s(20264);function Ie(e){let{title:t,description:s,htmlFor:i}=e;return(0,ye.jsxs)("div",{className:"mailpoet-settings-label",children:[(0,ye.jsx)("label",{className:"mailpoet-settings-label-title",htmlFor:i,children:t}),s&&(0,ye.jsx)("p",{className:"description",children:s})]})}function Se(e){let{children:t}=e;return(0,ye.jsx)("div",{className:"mailpoet-settings-inputs",children:t})}var ke=s(49231),Ee=s(13763),Ne=s(85479);function Ae(e){return(0,Ne.Z)(c)[e]}var Te=s(87834);function Ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,Te.Z)((t=>{const s=t(c);return s[e].bind(s)}),t)}function we(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const i=Ce("getSetting"),n=Ae("setSetting");return[i(t),(0,ke.useCallback)((e=>n(t,e)),t)]}var Le=s(34352),Me=s.n(Le);function De(){const[e,t]=(0,ke.useState)(!1),s=Ce("isSaving")(),i=Ce("hasErrorFlag")(),n=Ce("getSavingError")(),a=Ce("hasReEngagementNotice")(),r=Ce("getReEngagementAction")(),l=Ae("saveSettings"),{notices:c}=(0,ke.useContext)(o.k),m=c.error,d=c.success;return(0,ke.useEffect)((()=>{e&&!s&&(n?m(n.map((e=>(0,ye.jsx)("p",{children:e}))),{scroll:!0}):(d((0,ye.jsx)("p",{children:j.x.I18n.t("settingsSaved")}),{scroll:!0}),a&&((e,t,s)=>{if("deactivate"!==e){if("reactivate"===e){const e=Me()(j.x.I18n.t("re-engagementReactivatedNotice"),/\[link\](.*?)\[\/link\]/g,(e=>(0,ye.jsx)("a",{href:"?page=mailpoet-newsletters#/re_engagement",rel:"noopener noreferrer",children:e},"reEngagementEmailsTabLink")));s((0,ye.jsx)("p",{children:e}),{scroll:!0})}}else t((0,ye.jsx)("p",{children:j.x.I18n.t("re-engagementDisabledNotice")}),{scroll:!0})})(r,m,d)))}),[e,n,s,m,d,a,r]),(0,ye.jsx)("div",{className:"mailpoet-settings-save",children:(0,ye.jsx)(Ee.z,{type:"button",automationId:"settings-submit-button",isDisabled:s||i,onClick:()=>{t(!0),l()},children:j.x.I18n.t("saveSettings")})})}var Fe=s(5635);function Ve(e){const t=Ce(e.segmentsSelector?e.segmentsSelector:"getDefaultSegments")().map((e=>({value:e.id,label:e.name,count:e.subscribers}))),s=t.filter((t=>e.value.includes(t.value)));return(0,ye.jsx)(Fe.ReactSelect,{isMulti:!0,defaultValue:s,id:e.id,placeholder:e.placeholder,options:t,onChange:t=>{e.setValue((t||[]).map((e=>e.value)))}})}var Pe=s(64530);function Re(e){const t=Ce("getPages")();let s=t.find((t=>t.id===parseInt(e.value,10)));return s||(s=t[0]),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row mailpoet-settings-inputs-row-centered",children:[(0,ye.jsx)(Pe.Select,{id:e.id,automationId:e.automationId,value:s.id,onChange:(0,k.z2)(e.setValue),isMinWidth:!0,dimension:"small",children:t.map((e=>(0,ye.jsx)("option",{value:e.id,children:`${e.title}`},e.id)))}),(0,ye.jsx)("span",{className:"mailpoet-gap"}),(0,ye.jsx)("a",{className:"mailpoet-link",target:"_blank",title:(0,k.t)("previewPage"),rel:"noopener noreferrer",href:s.url[e.preview],"data-automation-id":e.linkAutomationId,children:(0,k.t)("preview")})]})}var Ue=s(32033),ze=s(78046),Oe=s(61445);function Ge(){const e=Ce("isMssActive")(),[t,s]=we("sender","name"),[i,n]=we("sender","address"),[a,r]=(0,ke.useState)(!0),[o,l]=(0,ke.useState)(!1),[c,m]=we("reply_to","name"),[d,u]=we("reply_to","address"),p=Ae("setErrorFlag"),h=i&&!(0,k.Jh)(i),g=d&&!(0,k.Jh)(d);return(0,ke.useEffect)((()=>{p(h||g||!a&&e)}),[g,h,p,a,e]),(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("defaultSenderTitle"),description:(0,k.t)("defaultSenderDescription"),htmlFor:"sender-name"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)("label",{htmlFor:"sender-name",children:(0,k.t)("from")}),(0,ye.jsx)("br",{}),(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",id:"sender-name",placeholder:(0,k.t)("yourName"),"data-automation-id":"from-name-field",value:t,onChange:(0,k.z2)(s)}),(0,ye.jsx)("br",{}),(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",placeholder:"from@mydomain.com","data-automation-id":"from-email-field",value:i,onChange:(0,k.z2)((0,k.pz)((e=>{r(!0),l(!1),n(e)}))),onBlur:(0,k.z2)((t=>{if(!e)return;const s=(0,k.DA)(t);window.mailpoet_verified_sender_domains.includes(s)||((e=>{r(window.mailpoet_authorized_emails.includes(e))})(t),j.x.freeMailDomains.indexOf(s)>-1||(0,Oe.g)(t,e).then((e=>{l(e)})).catch((()=>{})))}))}),(0,ye.jsx)("br",{}),h&&(0,ye.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,k.t)("invalidEmail")}),(0,ye.jsx)("div",{className:"regular-text",children:(0,ye.jsx)(ze.L,{emailAddress:i,mssActive:e,isEmailAuthorized:a,showSenderDomainWarning:o,onSuccessfulEmailOrDomainAuthorization:e=>{"email"===e.type&&(r(!0),j.x.trackEvent("MSS in plugin authorize email",{"authorized email source":"settings",wasSuccessful:"yes"})),"domain"===e.type&&(l(!1),j.x.trackEvent("MSS in plugin verify sender domain",{"verify sender domain source":"settings",wasSuccessful:"yes"}))}})}),(0,ye.jsx)("label",{className:"mailpoet-settings-inputs-row",htmlFor:"reply_to-name",children:"Reply-to"}),(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",id:"reply_to-name",placeholder:(0,k.t)("yourName"),"data-automation-id":"reply_to-name-field",value:c,onChange:(0,k.z2)(m)}),(0,ye.jsx)("br",{}),(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",placeholder:"reply_to@mydomain.com","data-automation-id":"reply_to-email-field",value:d,onChange:(0,k.z2)((0,k.pz)(u))}),(0,ye.jsx)("br",{}),g&&(0,ye.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,k.t)("invalidEmail")})]})]})}var Ke=s(25367);function Be(e){let{title:t,description:s,event:i}=e;const[n,a]=we("subscribe",i,"enabled"),[r,o]=we("subscribe",i,"label"),[l,c]=we("subscribe",i,"segments");return(0,ke.useEffect)((()=>{""===r&&o((0,k.t)("yesAddMe"))}),[r,o]),(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:t,description:s,htmlFor:`subscribe-${i}-enabled`}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(Ke.X,{id:`subscribe-${i}-enabled`,automationId:`subscribe-${i}-checkbox`,checked:"1"===n,onCheck:e=>a(e?"1":"0")}),"1"===n&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)("br",{}),(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",value:r,onChange:(0,k.z2)(o)}),(0,ye.jsx)("label",{className:"mailpoet-settings-inputs-row",htmlFor:`subscribe-${i}-segments`,children:(0,k.t)("usersWillBeSubscribedTo")}),(0,ye.jsx)("div",{"data-automation-id":`subscribe-${i}-segments-selection`,children:(0,ye.jsx)(Ve,{id:`subscribe-${i}-segments`,placeholder:(0,k.t)("chooseList"),value:l,setValue:c})})]})]})]})}function Ye(){const[e,t]=we("subscription","pages","manage");return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("manageSubTitle"),description:(0,ye.jsxs)(ye.Fragment,{children:[(0,k.t)("manageSubDescription1")," ",Me()((0,k.t)("manageSubDescription2"),/\[link\](.*?)\[\/link\]/,(e=>(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/222-customize-your-manage-subscription-page",rel:"noopener noreferrer","data-beacon-article":"59ddd0bb2c7d3a40f0ed5b57",target:"_blank",children:e},e)))]}),htmlFor:"subscription-manage-page"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(Re,{value:e,preview:"manage",setValue:t,id:"subscription-manage-page",automationId:"subscription-manage-page-selection",linkAutomationId:"preview_manage_subscription_page_link"}),(0,ye.jsx)("p",{children:Me()((0,k.t)("hideListFromManageSubPage"),/\[link\](.*?)\[\/link\]/,(e=>(0,ye.jsx)("a",{className:"mailpoet-link",href:"/wp-admin/admin.php?page=mailpoet-segments#/lists",rel:"noopener noreferrer",target:"_blank",children:e},e)))})]})]})}function We(){const[e,t]=we("subscription","pages","unsubscribe"),[s,i]=we("subscription","pages","confirm_unsubscribe");return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("unsubscribeTitle"),description:(0,ye.jsxs)(ye.Fragment,{children:[Me()((0,k.t)("unsubscribeDescription1"),"[mailpoet_page]",(()=>(0,ye.jsx)("code",{children:"[mailpoet_page]"},"mp")))," ",Me()((0,k.t)("unsubscribeDescription2"),/\[link\](.*?)\[\/link\]/,(e=>(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/221-customize-your-unsubscribe-page",rel:"noopener noreferrer","data-beacon-article":"59dcea10042863379ddc8b4d",target:"_blank",children:e},e)))]}),htmlFor:"subscription-pages-unsubscribe"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,k.t)("confirmationPageTitle"),":"]}),(0,ye.jsx)(Re,{value:s,preview:"confirm_unsubscribe",setValue:i,id:"subscription-pages-unsubscribe-confirmation",automationId:"unsubscribe-confirmation-page-selection",linkAutomationId:"unsubscribe_page_preview_link_confirmation"}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,k.t)("successPageTitle"),":"]}),(0,ye.jsx)(Re,{value:e,preview:"unsubscribe",setValue:t,id:"subscription-pages-unsubscribe",automationId:"unsubscribe-success-page-selection",linkAutomationId:"unsubscribe_page_preview_link"})]})]})}function $e(){const[e,t]=we("stats_notifications","enabled"),[s,i]=we("stats_notifications","automated"),[n,a]=we("stats_notifications","address"),r=Ae("setErrorFlag"),o=("1"===e||"1"===s)&&""===n.trim(),l=n&&!(0,k.Jh)(n);return(0,ke.useEffect)((()=>{r(o||l)}),[o,l,r]),(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("statsNotifsTitle"),description:(0,k.t)("statsNotifsDescription"),htmlFor:"stats-enabled"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(Ke.X,{id:"stats-enabled",checked:"1"===e,onCheck:e=>t(e?"1":"0")}),(0,ye.jsx)("label",{htmlFor:"stats-enabled",children:(0,k.t)("newslettersAndPostNotifs")})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(Ke.X,{id:"stats-automated",checked:"1"===s,onCheck:e=>i(e?"1":"0")}),(0,ye.jsx)("label",{htmlFor:"stats-automated",children:(0,k.t)("welcomeAndWcEmails")})]}),(0,ye.jsx)(Ue.I,{dimension:"small",type:"email",value:n,onChange:(0,k.z2)((0,k.pz)(a)),placeholder:"me@mydomain.com"}),o&&(0,ye.jsx)("div",{className:"mailpoet_error_item mailpoet_error",children:(0,k.t)("pleaseFillEmail")}),l&&(0,ye.jsx)("div",{className:"mailpoet_error_item mailpoet_error",children:(0,k.t)("invalidEmail")})]})]})}var qe=s(34993);function He(){const[e,t]=we("subscriber_email_notification","enabled"),[s,i]=we("subscriber_email_notification","address"),n=Ae("setErrorFlag"),a="1"===e&&""===s.trim(),r=s&&!(0,k.Jh)(s);return(0,ke.useEffect)((()=>{n(a||r)}),[a,r,n]),(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("newSubscriberNotifsTitle"),description:(0,k.t)("newSubscriberNotifsDescription"),htmlFor:"subscriber_email_notification-enabled"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(qe.Y,{checked:"1"===e,value:"1",onCheck:t}),(0,k.t)("yes")," ",(0,ye.jsx)(qe.Y,{checked:""===e,value:"",onCheck:t}),(0,k.t)("no"),(0,ye.jsx)("br",{}),(0,ye.jsx)(Ue.I,{dimension:"small",type:"email",value:s,onChange:(0,k.z2)((0,k.pz)(i)),placeholder:"me@mydomain.com"}),a&&(0,ye.jsx)("div",{className:"mailpoet_error_item mailpoet_error",children:(0,k.t)("pleaseFillEmail")}),r&&(0,ye.jsx)("div",{className:"mailpoet_error_item mailpoet_error",children:(0,k.t)("invalidEmail")})]})]})}function Xe(e){let{name:t,title:s,description:i}=e;const[n,a]=(0,ke.useState)([]),r=`[${t}${n.length?` segments="${n.join(",")}"`:""}]`;return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:s,description:i,htmlFor:`${t}-shortcode`}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(Ue.I,{dimension:"small",readOnly:!0,type:"text",value:r,onClick:e=>{e.target.focus(),e.target.select()},id:`${t}-shortcode`}),(0,ye.jsx)("br",{}),(0,ye.jsx)(Ve,{value:n,setValue:a,id:`${t}-shortcode-segments`,placeholder:(0,k.t)("leaveEmptyToDisplayAll"),segmentsSelector:"getSegments"})]})]})}function Je(){return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("gdprTitle"),description:(0,k.t)("gdprDescription"),htmlFor:"gdpr-compliant"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/246-guide-to-conform-to-gdpr","data-beacon-article":"5a9e8cdd04286374f7089a8c",title:(0,k.t)("readGuide"),target:"_blank",rel:"noopener noreferrer",children:(0,k.t)("readGuide")})})]})}function Ze(){const[e,t]=we("reEngagement","page");return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("reEngagementTitle"),description:(0,k.t)("reEngagementDescription"),htmlFor:"re-engagement-page"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Re,{value:e,preview:"re_engagement",setValue:t,id:"re-engagement-page"})})]})}function Qe(){return(0,ye.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,ye.jsx)(Ge,{}),(0,ye.jsx)(Be,{event:"on_comment",title:(0,k.t)("subscribeInCommentsTitle"),description:(0,k.t)("subscribeInCommentsDescription")}),(0,ye.jsx)(Be,{event:"on_register",title:(0,k.t)("subscribeInRegistrationTitle"),description:(0,k.t)("subscribeInRegistrationDescription")}),(0,ye.jsx)(Ye,{}),(0,ye.jsx)(We,{}),(0,ye.jsx)(Ze,{}),(0,ye.jsx)($e,{}),(0,ye.jsx)(He,{}),(0,ye.jsx)(Xe,{name:"mailpoet_archive",title:(0,k.t)("archiveShortcodeTitle"),description:(0,k.t)("archiveShortcodeDescription")}),(0,ye.jsx)(Xe,{name:"mailpoet_subscribers_count",title:(0,k.t)("subscribersCountShortcodeTitle"),description:(0,k.t)("subscribersCountShortcodeDescription")}),(0,ye.jsx)(Je,{}),(0,ye.jsx)(De,{})]})}function et(){const[e,t]=we("cron_trigger","method"),s=Ce("getPaths")();return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("taskCron"),description:(0,ye.jsxs)(ye.Fragment,{children:[(0,k.t)("taskCronDescription")," ",(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/129-what-is-the-newsletter-task-scheduler","data-beacon-article":"57ce0a7a903360649f6e5703",rel:"noopener noreferrer",target:"_blank",children:(0,k.t)("readMore")})]}),htmlFor:"cron_trigger-method"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"cron_trigger-method-action-scheduler",value:"Action Scheduler",checked:"Action Scheduler"===e,onCheck:t,automationId:"action_scheduler_cron_radio"}),(0,ye.jsx)("label",{htmlFor:"cron_trigger-method-action-scheduler",children:(0,k.t)("actionSchedulerCron")})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"cron_trigger-method-wordpress",value:"WordPress",checked:"WordPress"===e,onCheck:t,automationId:"wordress_cron_radio"}),(0,ye.jsx)("label",{htmlFor:"cron_trigger-method-wordpress",children:(0,k.t)("websiteVisitors")})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"cron_trigger-method-cron",value:"Linux Cron",checked:"Linux Cron"===e,onCheck:t,automationId:"linux_cron_radio"}),(0,ye.jsx)("label",{htmlFor:"cron_trigger-method-cron",children:(0,k.t)("serverCron")})]}),"Linux Cron"===e&&(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,k.t)("addCommandToCrontab")}),(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",readOnly:!0,value:`php ${s.plugin}/mailpoet-cron.php ${s.root}`}),(0,ye.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,k.t)("withFrequency")}),(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",readOnly:!0,value:"*/1 * * * *"})]})]})]})}function tt(){const e=Ce("hasMembersPlugin")();return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("rolesTitle"),description:(0,k.t)("rolesDescription"),htmlFor:""}),(0,ye.jsx)(Se,{children:(0,ye.jsx)("p",{children:e?(0,ye.jsx)("a",{className:"mailpoet-link",href:"?page=roles",children:(0,k.t)("manageUsingMembers")}):Me()((0,k.t)("installMembers"),/\[link\](.*?)\[\/link\]/,(e=>(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://wordpress.org/plugins/members/",rel:"noopener noreferrer",target:"_blank",children:e},e)))})})]})}function st(){const[e,t]=we("tracking","level");return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("engagementTrackingTitle"),description:(0,k.t)("engagementTrackingDescription"),htmlFor:"engagement_tracking"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"tracking-basic",value:"basic",checked:"basic"===e,onCheck:t,automationId:"tracking-basic-radio"}),(0,ye.jsx)("label",{htmlFor:"tracking-basic",children:(0,k.t)("engagementTrackingBasic")})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"tracking-partial",value:"partial",checked:"partial"===e,onCheck:t,automationId:"tracking-partial-radio"}),(0,ye.jsx)("label",{htmlFor:"tracking-partial",children:(0,k.t)("engagementTrackingPartial")})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"tracking-full",value:"full",checked:"full"===e,onCheck:t,automationId:"tracking-full-radio"}),(0,ye.jsx)("label",{htmlFor:"tracking-full",children:(0,k.t)("engagementTrackingFull")})]})]})]})}function it(){const[e]=we("smtp_provider"),t=Ce("isMssActive")(),[s,i]=we("send_transactional_emails");let n="";return t?n="MailPoet Sending Service":"manual"===e?n="SMTP":"SendGrid"===e?n="SendGrid":"AmazonSES"===e?n="Amazon SES":"server"===e&&(n=(0,k.t)("hostOption")),(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("transactionalTitle"),description:(0,ye.jsxs)(ye.Fragment,{children:[(0,k.t)("transactionalDescription")," ",(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/292-choose-how-to-send-your-wordpress-websites-emails","data-beacon-article":"5ddbf92504286364bc9228c5",rel:"noopener noreferrer",target:"_blank",children:(0,k.t)("transactionalLink")})]}),htmlFor:""}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(qe.Y,{id:"transactional-enabled",value:"1",checked:"1"===s,onCheck:i}),(0,ye.jsxs)("label",{htmlFor:"transactional-enabled",children:[(0,k.t)("transactionalCurrentMethod").replace("%1$s",n),(0,ye.jsx)("br",{}),(0,ye.jsx)("span",{className:"mailpoet-note",children:Me()((0,k.t)("transactionalMssNote"),/\[link\](.*?)\[\/link\]/,(e=>(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/292-choose-how-to-send-your-wordpress-websites-emails#attachments",rel:"noopener noreferrer","data-beacon-article":"5ddbf92504286364bc9228c5",target:"_blank",children:e},e)))})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"transactional-disabled",value:"",checked:""===s,onCheck:i}),(0,ye.jsx)("label",{htmlFor:"transactional-disabled",children:(0,k.t)("transactionalWP")})]})]})]})}function nt(){const[e,t]=we("deactivate_subscriber_after_inactive_days"),[s]=we("tracking","level"),i="basic"!==s;return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("inactiveSubsTitle"),description:(0,ye.jsxs)(ye.Fragment,{children:[(0,k.t)("inactiveSubsDescription")," ",(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/264-inactive-subscribers","data-beacon-article":"5cbf19622c7d3a026fd3efe1",rel:"noopener noreferrer",target:"_blank",children:(0,k.t)("readMore")})]}),htmlFor:""}),(0,ye.jsxs)(Se,{children:[!i&&(0,ye.jsx)("p",{"data-automation-id":"inactive-subscribers-disabled",children:(0,k.t)("disabledBecauseTrackingIs")}),i&&(0,ye.jsxs)("div",{"data-automation-id":"inactive-subscribers-enabled",children:[(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"inactive-subscribers-disabled",automationId:"inactive-subscribers-option-never",value:"",checked:""===e,onCheck:t}),(0,ye.jsx)("label",{htmlFor:"inactive-subscribers-disabled",children:(0,k.t)("never")})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"inactive-subscribers-3-months",value:"90",checked:"90"===e,onCheck:t}),(0,ye.jsx)("label",{htmlFor:"inactive-subscribers-3-months",children:(0,k.t)("after3months")})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"inactive-subscribers-6-months",value:"180",checked:"180"===e,onCheck:t}),(0,ye.jsx)("label",{htmlFor:"inactive-subscribers-6-months",children:(0,k.t)("after6months")})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"inactive-subscribers-12-months",value:"365",checked:"365"===e,onCheck:t,automationId:"inactive-subscribers-default"}),(0,ye.jsx)("label",{htmlFor:"inactive-subscribers-12-months",children:(0,k.t)("after12months")})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"inactive-subscribers-18-months",value:"540",checked:"540"===e,onCheck:t}),(0,ye.jsx)("label",{htmlFor:"inactive-subscribers-18-months",children:(0,k.t)("after18months")})]})]})]})]})}function at(){const[e,t]=we("analytics","enabled");return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("shareDataTitle"),description:(0,ye.jsxs)(ye.Fragment,{children:[(0,k.t)("shareDataDescription")," ",(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/130-sharing-your-data-with-us","data-beacon-article":"57ce0aaac6979108399a0454",rel:"noopener noreferrer",target:"_blank",children:(0,k.t)("readMore")})]}),htmlFor:""}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(qe.Y,{id:"share-data-enabled",value:"1",checked:"1"===e,onCheck:t,automationId:"analytics-yes"}),(0,ye.jsx)("label",{htmlFor:"share-data-enabled",children:(0,k.t)("yes")}),(0,ye.jsx)("span",{className:"mailpoet-gap"}),(0,ye.jsx)(qe.Y,{id:"share-data-disabled",value:"",checked:""===e,onCheck:t,automationId:"analytics-no"}),(0,ye.jsx)("label",{htmlFor:"share-data-disabled",children:(0,k.t)("no")})]})]})}function rt(){const[e,t]=we("3rd_party_libs","enabled");return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("libs3rdPartyTitle"),description:(0,ye.jsxs)(ye.Fragment,{children:[(0,k.t)("libs3rdPartyDescription")," ",(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/338-what-3rd-party-libraries-we-use","data-beacon-article":"5f7c7dd94cedfd0017dcece8",rel:"noopener noreferrer",target:"_blank",children:(0,k.t)("readMore")})]}),htmlFor:""}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(qe.Y,{id:"libs-3rd-party-enabled",value:"1",checked:"1"===e,onCheck:t}),(0,ye.jsx)("label",{htmlFor:"libs-3rd-party-enabled",children:(0,k.t)("yes")}),(0,ye.jsx)("span",{className:"mailpoet-gap"}),(0,ye.jsx)(qe.Y,{id:"libs-3rd-party-disabled",value:"",checked:""===e,onCheck:t}),(0,ye.jsx)("label",{htmlFor:"libs-3rd-party-disabled",children:(0,k.t)("no")})]})]})}function ot(){const[e,t]=we("captcha","type"),[s,i]=we("captcha","recaptcha_site_token"),[n,a]=we("captcha","recaptcha_secret_token"),[r,o]=we("captcha","recaptcha_invisible_site_token"),[l,c]=we("captcha","recaptcha_invisible_secret_token"),m=Ce("isBuiltInCaptchaSupported")(),d=Ae("setErrorFlag"),u="recaptcha"===e&&""===s.trim(),p="recaptcha"===e&&""===n.trim(),h="recaptcha-invisible"===e&&""===r.trim(),g="recaptcha-invisible"===e&&""===l.trim();return(0,ke.useEffect)((()=>{d(u||p||g||h)}),[p,u,g,h,d]),(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("captchaTitle"),description:(0,ye.jsxs)(ye.Fragment,{children:[(0,k.t)("captchaDescription")," ",(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/182-add-a-captcha-to-subscription-forms",rel:"noopener noreferrer",target:"_blank",children:(0,k.t)("readMore")}),("recaptcha"===e||"recaptcha-invisible"===e)&&(0,ye.jsxs)("p",{children:[(0,ye.jsxs)("span",{children:[(0,k.t)("reCaptchaDescription")," "]}),(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://www.google.com/recaptcha/admin",rel:"noopener noreferrer",target:"_blank",children:(0,k.t)("signupForCaptchaKey")})]})]}),htmlFor:""}),(0,ye.jsxs)(Se,{children:[(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"built-in-captcha",disabled:!m,value:"built-in",checked:"built-in"===e,onCheck:t}),(0,ye.jsxs)("label",{htmlFor:"built-in-captcha",children:[(0,k.t)("builtInCaptcha")," ",!m&&(0,k.t)("disbaledBecauseExtensionMissing")]})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"google-captcha",value:"recaptcha",checked:"recaptcha"===e,onCheck:t}),(0,ye.jsx)("label",{htmlFor:"google-captcha",children:(0,k.t)("googleReCaptchaCheckbox")})]}),"recaptcha"===e&&(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",value:s,onChange:(0,k.z2)(i),placeholder:(0,k.t)("yourReCaptchaKey")}),u&&(0,ye.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,k.t)("fillReCaptchaKeys")}),(0,ye.jsx)("br",{}),(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",value:n,onChange:(0,k.z2)(a),placeholder:(0,k.t)("yourReCaptchaSecret")}),p&&(0,ye.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,k.t)("fillReCaptchaKeys")})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"google-captcha-invisible",value:"recaptcha-invisible",checked:"recaptcha-invisible"===e,onCheck:t}),(0,ye.jsx)("label",{htmlFor:"google-captcha-invisible",children:(0,k.t)("googleReCaptchaInvisible")})]}),"recaptcha-invisible"===e&&(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",value:r,onChange:(0,k.z2)(o),placeholder:(0,k.t)("yourReCaptchaKey")}),h&&(0,ye.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,k.t)("fillReCaptchaKeys")}),(0,ye.jsx)("br",{}),(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",value:l,onChange:(0,k.z2)(c),placeholder:(0,k.t)("yourReCaptchaSecret")}),g&&(0,ye.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,k.t)("fillReCaptchaKeys")})]}),(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,ye.jsx)(qe.Y,{id:"no-captcha",value:"",checked:""===e,onCheck:t}),(0,ye.jsx)("label",{htmlFor:"no-captcha",children:(0,k.t)("disable")})]})]})]})}function lt(){const e=Ae("reinstall"),{notices:t}=(0,ke.useContext)(o.k);return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("reinstallTitle"),description:(0,k.t)("reinstallDescription"),htmlFor:""}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Ee.z,{type:"button",onClick:async()=>{if(window.confirm((0,k.t)("reinstallConfirmation"))){const s=await e();"SAVE_FAILED"===s.type?t.error(s.error.map((e=>(0,ye.jsx)("p",{children:e}))),{scroll:!0}):window.location.href="admin.php?page=mailpoet-newsletters"}},automationId:"reinstall-button",variant:"destructive",children:(0,k.t)("reinstallNow")})})]})}function ct(){const e=Ae("recalculateSubscribersScore"),{notices:t}=(0,ke.useContext)(o.k);return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("recalculateSubscribersScoreTitle"),description:(0,k.t)("recalculateSubscribersScoreDescription"),htmlFor:""}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Ee.z,{type:"button",onClick:async()=>{await e(),t.info((0,ye.jsx)("p",{children:(0,k.t)("recalculateSubscribersScoreNotice")}),{scroll:!0})},variant:"secondary",dimension:"small",children:(0,k.t)("recalculateSubscribersScoreNow")})})]})}function mt(){const[e,t]=we("logging");return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("loggingTitle"),description:(0,ye.jsxs)(ye.Fragment,{children:[(0,k.t)("loggingDescription")," ",(0,ye.jsx)("a",{href:"?page=mailpoet-logs",className:"mailpoet-link",children:(0,k.t)("loggingDescriptionLink")})]}),htmlFor:"logging-level"}),(0,ye.jsx)(Se,{children:(0,ye.jsxs)(Pe.Select,{id:"logging-level",value:e,onChange:(0,k.z2)(t),automationId:"logging-select-box",isMinWidth:!0,dimension:"small",children:[(0,ye.jsx)("option",{value:"everything","data-automation-id":"log-everything",children:(0,k.t)("everythingLogOption")}),(0,ye.jsx)("option",{value:"errors","data-automation-id":"log-errors",children:(0,k.t)("errorsLogOption")}),(0,ye.jsx)("option",{value:"nothing","data-automation-id":"log-nothing",children:(0,k.t)("nothingLogOption")})]})})]})}function dt(){const[e,t]=we("bounce","address");return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("bounceEmail"),description:(0,ye.jsxs)(ye.Fragment,{children:[(0,k.t)("yourBouncedEmails")," ",(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/180-how-bounce-management-works-in-mailpoet-3","data-beacon-article":"58a5a7502c7d3a576d353c78",rel:"noopener noreferrer",target:"_blank",children:(0,k.t)("readMore")})]}),htmlFor:"bounce-address"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",id:"bounce-address",placeholder:"bounce@mydomain.com","data-automation-id":"bounce-address-field",value:e,onChange:(0,k.z2)((0,k.pz)(t))})})]})}function ut(){return(0,ye.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,ye.jsx)(dt,{}),(0,ye.jsx)(et,{}),(0,ye.jsx)(tt,{}),(0,ye.jsx)(st,{}),(0,ye.jsx)(it,{}),(0,ye.jsx)(ct,{}),(0,ye.jsx)(nt,{}),(0,ye.jsx)(at,{}),(0,ye.jsx)(rt,{}),(0,ye.jsx)(ot,{}),(0,ye.jsx)(lt,{}),(0,ye.jsx)(mt,{}),(0,ye.jsx)(De,{})]})}var pt=s(16468);function ht(){return(0,ye.jsx)("div",{className:"mailpoet_success_item mailpoet_success_item mailpoet_success",children:j.x.I18n.t("premiumTabKeyValidMessage")})}function gt(){return(0,ye.jsx)("div",{className:"mailpoet_error_item mailpoet_error",children:j.x.I18n.t("premiumTabKeyNotValidMessage")})}function _t(){const{isKeyValid:e}=Ce("getKeyActivationState")();return e?(0,ye.jsx)(ht,{}):(0,ye.jsx)(gt,{})}function xt(){return(0,ye.jsx)("div",{className:"mailpoet_success_item mailpoet_success mailpoet_mss_key_valid",children:j.x.I18n.t("premiumTabMssActiveMessage")})}function jt(e){let{message:t}=e;return(0,ye.jsx)("div",{className:"mailpoet_error",children:t||j.x.I18n.t("premiumTabMssKeyNotValidMessage")})}function bt(e){let{activationCallback:t}=e;return(0,ye.jsxs)("div",{className:"mailpoet_error",children:[j.x.I18n.t("premiumTabMssNotActiveMessage")," ",(0,ye.jsx)("button",{type:"button",className:"mailpoet-button button button-primary button-small",onClick:t,children:j.x.I18n.t("premiumTabMssActivateMessage")})]})}function vt(e){const{mssStatus:t}=Ce("getKeyActivationState")();switch(t){case v.VALID_MSS_ACTIVE:return(0,ye.jsx)(xt,{});case v.VALID_MSS_NOT_ACTIVE:return(0,ye.jsx)(bt,{activationCallback:e.activationCallback});case v.INVALID:return(0,ye.jsx)(jt,{message:e.keyMessage});case v.VALID_UNDERPRIVILEGED:default:return null}}function ft(){return(0,ye.jsx)("div",{className:"mailpoet_success_item mailpoet_success",children:j.x.I18n.t("premiumTabPremiumActiveMessage")})}function yt(e){return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)("div",{className:"mailpoet_error mailpoet_install_premium_message",children:j.x.I18n.t("premiumTabPremiumNotActivatedMessage")}),e.url&&(0,ye.jsx)(Ee.z,{href:e.url,children:j.x.I18n.t("premiumTabPremiumActivateMessage")})]})}function It(e){return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)("div",{className:"mailpoet_error mailpoet_install_premium_message",children:j.x.I18n.t("premiumTabPremiumNotInstalledMessage")}),e.url&&(0,ye.jsx)(Ee.z,{href:e.url,children:j.x.I18n.t("premiumTabPremiumDownloadMessage")})]})}function St(e){let{message:t}=e;return(0,ye.jsx)("div",{className:"mailpoet_error",children:t||j.x.I18n.t("premiumTabPremiumKeyNotValidMessage")})}function kt(e){const{premiumStatus:t,downloadUrl:s,activationUrl:i}=Ce("getKeyActivationState")();switch(t){case b.VALID_PREMIUM_PLUGIN_ACTIVE:return(0,ye.jsx)(ft,{});case b.VALID_PREMIUM_PLUGIN_NOT_INSTALLED:return(0,ye.jsx)(It,{url:s});case b.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:return(0,ye.jsx)(yt,{url:i});case b.INVALID:return(0,ye.jsx)(St,{message:e.keyMessage});default:return null}}function Et(){return(0,ye.jsxs)("div",{className:"mailpoet_error_item mailpoet_error",children:[j.x.I18n.t("premiumTabKeyCannotValidate"),(0,ye.jsxs)("ul",{className:"disc-inside-list",children:[(0,ye.jsx)("li",{children:j.x.I18n.t("premiumTabKeyCannotValidateLocalhost")}),(0,ye.jsx)("li",{children:j.x.I18n.t("premiumTabKeyCannotValidateBlockingHost")}),(0,ye.jsx)("li",{children:j.x.I18n.t("premiumTabKeyCannotValidateIntranet")})]}),(0,ye.jsx)("p",{children:(0,ye.jsx)("a",{href:"https://kb.mailpoet.com/article/319-known-errors-when-validating-a-mailpoet-key",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"5ef1da9d2c7d3a10cba966c5",className:"mailpoet_error",children:j.x.I18n.t("learnMore")})})]})}function Nt(e,t,s){return 503===e.code?(0,ye.jsx)("div",{className:"key-activation-messages",children:(0,ye.jsx)(Et,{})}):(0,ye.jsxs)("div",{className:"key-activation-messages",children:[(0,ye.jsx)(_t,{}),null!==e.mssStatus&&(0,ye.jsx)(vt,{keyMessage:e.mssMessage,activationCallback:s}),e.congratulatoryMssEmailSentTo&&(0,ye.jsx)("div",{className:"mailpoet_success_item mailpoet_success",children:(0,k.t)("premiumTabCongratulatoryMssEmailSent").replace("[email_address]",e.congratulatoryMssEmailSentTo)}),null!==e.premiumStatus&&(0,ye.jsx)(kt,{keyMessage:e.premiumMessage}),t&&(0,ye.jsxs)("div",{className:"mailpoet_success",children:[(0,ye.jsx)("div",{className:"pending_approval_heading",children:(0,k.t)("premiumTabPendingApprovalHeading")}),(0,ye.jsx)("div",{children:(0,k.t)("premiumTabPendingApprovalMessage")})]}),!e.isKeyValid&&(0,ye.jsx)("p",{children:(0,ye.jsx)("a",{href:"https://kb.mailpoet.com/article/319-known-errors-when-validating-a-mailpoet-key",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"5ef1da9d2c7d3a10cba966c5",className:"mailpoet_error",children:j.x.I18n.t("learnMore")})})]})}function At(){const{notices:e}=(0,ke.useContext)(o.k),t=Ce("getKeyActivationState")(),s=Ae("updateKeyActivationState"),i=Ae("verifyMssKey"),n=Ae("verifyPremiumKey"),a=Ae("sendCongratulatoryMssEmail"),[r,m]=we("sender","address"),[d,u]=we("authorized_emails_addresses_check"),[p]=we("mta","mailpoet_api_key_state","data"),h=Ae("setSaveDone"),g=t.fromAddressModalCanBeShown&&t.mssStatus===v.VALID_MSS_ACTIVE&&(!r||d),_=!1===t.inProgress&&t.mssStatus===v.VALID_MSS_ACTIVE&&p&&!1===p.is_approved;return(0,ye.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,ye.jsx)(Ie,{htmlFor:"mailpoet_premium_key",title:(0,k.t)("premiumTabActivationKeyLabel"),description:(0,k.t)("premiumTabDescription")}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(Ue.I,{type:"text",id:"mailpoet_premium_key",name:"premium[premium_key]",value:t.key||"",onChange:e=>s({mssStatus:null,premiumStatus:null,premiumInstallationStatus:null,key:e.target.value.trim()||null})}),(0,ye.jsx)(Ee.z,{type:"button",onClick:async()=>{t.key?(await s({mssStatus:null,premiumStatus:null,premiumInstallationStatus:null}),j.x.Modal.loading(!0),s({inProgress:!0}),await i(t.key),(0,l.select)(c).getKeyActivationState().mssStatus===v.VALID_MSS_ACTIVE&&await a(),await n(t.key),s({inProgress:!1}),j.x.Modal.loading(!1),s({fromAddressModalCanBeShown:!0})):e.error((0,ye.jsx)("p",{children:(0,k.t)("premiumTabNoKeyNotice")}),{scroll:!0})},children:(0,k.t)("premiumTabVerifyButton")}),null!==t.isKeyValid&&Nt(t,_,(async function(){await i(t.key),a(),s({fromAddressModalCanBeShown:!0})}))]}),g&&(0,ye.jsx)(pt.d,{onRequestClose:()=>{s({fromAddressModalCanBeShown:!1}),a()},setAuthorizedAddress:async e=>{await m(e),await u(null),h()}})]})}jt.defaultProps={message:""},vt.defaultProps={keyMessage:""},St.defaultProps={message:""},kt.defaultProps={keyMessage:""};var Tt=s(42676),Ct=s(75774);function wt(){const e=(0,Tt.k6)(),t=Ce("isMssActive")(),[s]=we("mta","mailpoet_api_key"),{mssStatus:i,premiumStatus:n}=Ce("getKeyActivationState")(),a=null!==i&&i!==v.INVALID,r=null!==n&&n!==b.INVALID,o=window.mailpoet_free_plan_url,l=Ae("setSetting"),c=Ae("saveSettings");return(0,ye.jsxs)("ul",{className:"mailpoet-sending-methods",children:[(0,ye.jsx)("li",{children:(0,ye.jsxs)("label",{className:"mailpoet-sending-method mailpoet-form-checkbox",children:[(0,ye.jsx)("input",{type:"radio",checked:t,onChange:async i=>{i.preventDefault(),t||a||e.push("/premium"),!t&&a&&await(async()=>(await l(["mta_group"],"mailpoet"),await l(["mta","method"],"MailPoet"),await l(["mta","mailpoet_api_key"],s),await l(["signup_confirmation","enabled"],"1"),c()))()}}),(0,ye.jsx)("span",{className:"mailpoet-form-radio-control"}),(0,ye.jsx)("h4",{className:"mailpoet-h4",children:(0,k.t)("mssTitle")}),(0,ye.jsx)("p",{children:t?(0,k.t)("youreSendingWithMss"):(0,k.t)("solveSendingProblems")}),(0,ye.jsxs)("ul",{className:"mailpoet-sending-method-benefits mailpoet_success",children:[(0,ye.jsx)("li",{className:"mailpoet_success_item",children:(0,k.t)("mssBenefit1")}),(0,ye.jsx)("li",{className:"mailpoet_success_item",children:(0,k.t)("mssBenefit2")}),(0,ye.jsx)("li",{className:"mailpoet_success_item",children:(0,k.t)("mssBenefit3")}),(0,ye.jsx)("li",{className:"mailpoet_success_item",children:(0,k.t)("mssBenefit4")}),(0,ye.jsx)("li",{className:"mailpoet_success_item",children:(0,k.t)("mssBenefit5")})]}),!a&&!r&&(0,ye.jsxs)("div",{className:"mailpoet-sending-method-actions",children:[(0,ye.jsx)("a",{className:"mailpoet-button button-primary",href:o,rel:"noopener noreferrer",target:"_blank",children:(0,k.t)("freeUpto")}),(0,ye.jsxs)("span",{children:["",(0,k.t)("or"),""]}),Me()((0,k.t)("enterYourKey"),/\[link\](.*?)\[\/link\]/g,((e,t)=>(0,ye.jsx)(Ct.Link,{to:"/premium",className:"mailpoet-link",children:e},t)))]}),!a&&r&&(0,ye.jsxs)("div",{className:"mailpoet-sending-method-actions",children:[(0,ye.jsx)("i",{children:(0,k.t)("invalidKeyForMss")})," ",(0,ye.jsx)("a",{className:"mailpoet-button button-primary",href:"https://account.mailpoet.com/",rel:"noopener noreferrer",target:"_blank",children:(0,k.t)("getPlan")})]})]})}),(0,ye.jsx)("li",{children:(0,ye.jsxs)("label",{className:"mailpoet-sending-method mailpoet-form-checkbox",children:[(0,ye.jsx)("input",{type:"radio",checked:!t,onChange:t=>{t.preventDefault(),e.push("/mta/other")}}),(0,ye.jsx)("span",{className:"mailpoet-form-radio-control"}),(0,ye.jsx)("h4",{className:"mailpoet-h4",children:(0,k.t)("otherTitle")}),(0,ye.jsxs)("p",{children:[(0,k.t)("sendViaHost")," ",(0,ye.jsx)("strong",{children:(0,k.t)("notRecommended")})," ",(0,k.t)("orViaThirdParty")]}),(0,ye.jsx)("div",{className:"mailpoet-sending-method-actions",children:(0,ye.jsx)(Ct.Link,{to:"/mta/other",className:"mailpoet-link",children:(0,k.t)("configure")})})]})})]})}function Lt(){const[e,t]=we("smtp_provider"),[,s]=we("mta_group"),[,i]=we("mta","method");return(0,ke.useEffect)((()=>{switch(e){case"server":s("website"),i("PHPMail");break;case"manual":s("smtp"),i("SMTP");break;case"AmazonSES":s("smtp"),i("AmazonSES");break;case"SendGrid":s("smtp"),i("SendGrid");break;default:i("PHPMail")}}),[e,s,i]),(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("method"),htmlFor:"mailpoet_smtp_method"}),(0,ye.jsx)(Se,{children:(0,ye.jsxs)(Pe.Select,{id:"mailpoet_smtp_method",value:e,onChange:(0,k.z2)(t),isMinWidth:!0,dimension:"small",children:[(0,ye.jsx)("option",{value:"server",children:(0,k.t)("hostOption")}),(0,ye.jsx)("option",{value:"manual",children:(0,k.t)("smtpOption")}),(0,ye.jsxs)("optgroup",{label:(0,k.t)("selectProvider"),children:[(0,ye.jsx)("option",{value:"AmazonSES",children:"Amazon SES"}),(0,ye.jsx)("option",{value:"SendGrid",children:"SendGrid"})]})]})})]})}function Mt(){return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("spfTitle"),description:(0,k.t)("spfDescription"),htmlFor:""}),(0,ye.jsx)(Se,{children:(0,k.t)("spfSetup")})]})}var Dt=s(58996),Ft=s(20360);function Vt(){const[e,t]=(0,ke.useState)(window.mailpoet_current_user_email),[s]=we("mta"),{state:i,error:n}=Ce("getTestEmailState")(),a=Ae("sendTestEmail");return(0,ye.jsxs)(ye.Fragment,{children:[i===y.SENDING&&(0,ye.jsx)(xe.g,{}),i===y.SUCCESS&&(0,ye.jsx)(Ft.q,{type:"success",scroll:!0,children:(0,ye.jsx)("p",{children:(0,k.t)("emailSent")})}),i===y.FAILURE&&(0,ye.jsx)(Ft.q,{type:"error",scroll:!0,children:(0,ye.jsx)("p",{children:n.map((e=>(0,ye.jsx)("p",{children:e},e)))})}),(0,ye.jsx)(Ie,{title:(0,k.t)("testSending"),htmlFor:"mailpoet_mta_test_email"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",id:"mailpoet_mta_test_email",value:e,onChange:(0,k.z2)(t)}),(0,ye.jsx)(Ee.z,{type:"button",dimension:"small",variant:"secondary",onClick:()=>a(e,s),children:(0,k.t)("sendTestEmail")}),(0,ye.jsx)(Dt.Tooltip,{tooltipId:"tooltip-settings-test",className:"mailpoet_tooltip_icon",tooltip:(0,ye.jsx)("span",{style:{pointerEvents:"all"},children:Me()((0,k.t)("testEmailTooltip"),/\[link\](.*?)\[\/link\]/g,((e,t)=>(0,ye.jsx)("a",{className:"mailpoet-link",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"580846f09033604df5166ed1",href:"https://kb.mailpoet.com/article/146-my-newsletters-are-not-being-received",children:e},t)))})})]})]})}function Pt(){const e=Ae("saveSettings"),t=Ae("loadSettings"),s=(0,Tt.k6)();return(0,ye.jsxs)("div",{className:"mailpoet-settings-save",children:[(0,ye.jsx)(Ee.z,{type:"button",onClick:async()=>{await e(),s.push("/mta")},children:(0,k.t)("activate")}),(0,ye.jsx)(Ee.z,{onClick:async()=>{j.x.Modal.loading(!0),await t(),s.push("/mta"),j.x.Modal.loading(!1)},variant:"tertiary",children:(0,k.t)("orCancel")})]})}function Rt(e){const t=Math.floor(parseInt(e,10));return t>60?(0,k.t)("everyHours").replace("%1$d",""+t/60):60===t?(0,k.t)("everyHour"):t>1?(0,k.t)("everyMinutes").replace("%1$d",`${t}`):(0,k.t)("everyMinute")}function Ut(e){let{recommendedEmails:t,recommendedInterval:s}=e;const[i,n]=we("mailpoet_sending_frequency"),[a,r]=we("mta","frequency","emails"),[o,l]=we("mta","frequency","interval");(0,ke.useEffect)((()=>{"auto"===i&&(r(`${t}`),l(`${s}`))}),[i,t,s,r,l]);const c=Math.floor(1440*parseInt(a,10)/parseInt(o,10)),m=Math.floor(c/86400*10)/10;return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("sendingFrequency"),htmlFor:"mailpoet_sending_frequency"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,ye.jsxs)(Pe.Select,{id:"mailpoet_sending_frequency",value:i,onChange:(0,k.z2)(n),dimension:"small",children:[(0,ye.jsx)("option",{value:"auto",children:(0,k.t)("recommendedTitle")}),(0,ye.jsx)("option",{value:"manual",children:(0,k.t)("ownFrequency")})]})}),"manual"===i&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row mailpoet-settings-inputs-row-centered",children:[(0,ye.jsx)(Ue.I,{dimension:"small",id:"other_frequency_emails",type:"number",min:"1",max:"1000",value:a,onChange:(0,k.z2)(r)}),(0,ye.jsx)("span",{className:"mailpoet-gap"}),(0,ye.jsx)("span",{children:(0,k.t)("emails")})]}),(0,ye.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,ye.jsxs)(Pe.Select,{id:"other_frequency_interval",value:o,onChange:(0,k.z2)(l),dimension:"small",children:[(0,ye.jsx)("option",{value:"1",children:"every minute"}),(0,ye.jsx)("option",{value:"2",children:"every 2 minutes"}),(0,ye.jsx)("option",{value:"5",children:"every 5 minutes (recommended)"}),(0,ye.jsx)("option",{value:"10",children:"every 10 minutes"}),(0,ye.jsx)("option",{value:"15",children:"every 15 minutes"}),(0,ye.jsx)("option",{value:"30",children:"every 30 minutes"})]})})]}),"auto"===i&&(0,ye.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,k.t)("xEmails").replace("%1$s",a)," ",Rt(o),". "]}),(0,ye.jsx)("div",{className:"mailpoet-settings-inputs-row",children:Me()((0,k.t)("thatsXEmailsPerDay").replace("%1$s",c.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>(0,ye.jsx)("strong",{children:e},t)))}),m>1&&(0,ye.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,ye.jsx)("span",{className:"mailpoet_emails_per_second_warning",children:Me()((0,k.t)("thatsXEmailsPerSecond").replace("%1$s",m.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>(0,ye.jsx)("strong",{children:e},t)))})}),"manual"===i&&(0,ye.jsx)("div",{className:"mailpoet-settings-inputs-row",children:Me()((0,k.t)("frequencyWarning").replace("%1$s",m.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>(0,ye.jsx)("strong",{children:e},t)))})]})]})}function zt(){const[e,t]=we("web_host"),s=Ce("getWebHosts")(),i=s[e];return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("yourHost"),htmlFor:"mailpoet_web_host"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Pe.Select,{id:"mailpoet_web_host",value:e,onChange:(0,k.z2)(t),isMinWidth:!0,dimension:"small",children:Object.entries(s).map((e=>{let[t,s]=e;return(0,ye.jsx)("option",{value:t,children:s.name},t)}))})}),(0,ye.jsx)(Ut,{recommendedEmails:i.emails,recommendedInterval:i.interval})]})}function Ot(){const[e,t]=we("mta","host"),[s,i]=we("mta","port"),[n,a]=we("mta","login"),[r,o]=we("mta","password"),[l,c]=we("mta","encryption"),[m,d]=we("mta","authentication");return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ut,{recommendedEmails:100,recommendedInterval:5}),(0,ye.jsx)(Ie,{title:(0,k.t)("smtpHost"),description:(0,k.t)("smtpHostExample"),htmlFor:"mailpoet_smtp_host"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",id:"mailpoet_smtp_host",value:e,onChange:(0,k.z2)(t)})}),(0,ye.jsx)(Ie,{title:(0,k.t)("smtpPort"),htmlFor:"mailpoet_smtp_port"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",id:"mailpoet_smtp_port",value:s,onChange:(0,k.z2)(i)})}),(0,ye.jsx)(Ie,{title:(0,k.t)("login"),htmlFor:"mailpoet_smtp_login"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",id:"mailpoet_smtp_login",value:n,onChange:(0,k.z2)(a)})}),(0,ye.jsx)(Ie,{title:(0,k.t)("password"),htmlFor:"mailpoet_smtp_password"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Ue.I,{dimension:"small",type:"password",id:"mailpoet_smtp_password",value:r,onChange:(0,k.z2)(o)})}),(0,ye.jsx)(Ie,{title:(0,k.t)("secureConnectioon"),htmlFor:"mailpoet_smtp_encryption"}),(0,ye.jsx)(Se,{children:(0,ye.jsxs)(Pe.Select,{id:"mailpoet_smtp_encryption",value:l,onChange:(0,k.z2)(c),isMinWidth:!0,dimension:"small",children:[(0,ye.jsx)("option",{value:"",children:(0,k.t)("no")}),(0,ye.jsx)("option",{value:"ssl",children:"SSL"}),(0,ye.jsx)("option",{value:"tls",children:"TLS"})]})}),(0,ye.jsx)(Ie,{title:(0,k.t)("authentication"),description:(0,k.t)("authenticationDescription"),htmlFor:"mailpoet_smtp_authentication"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(qe.Y,{value:"1",checked:"1"===m,onCheck:d}),(0,k.t)("yes")," ",(0,ye.jsx)(qe.Y,{value:"-1",checked:"-1"===m,onCheck:d}),(0,k.t)("no")]})]})}function Gt(){const[e,t]=we("mta","region"),[s,i]=we("mta","access_key"),[n,a]=we("mta","secret_key"),r=Ce("getAmazonSesOptions")();return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ut,{recommendedEmails:r.emails,recommendedInterval:r.interval}),(0,ye.jsx)(Ie,{title:(0,k.t)("region"),htmlFor:"mailpoet_amazon_ses_region"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Pe.Select,{id:"mailpoet_amazon_ses_region",value:e,onChange:(0,k.z2)(t),isMinWidth:!0,dimension:"small",children:Object.entries(r.regions).map((e=>{let[t,s]=e;return(0,ye.jsx)("option",{value:s,children:t},s)}))})}),(0,ye.jsx)(Ie,{title:(0,k.t)("accessKey"),htmlFor:"mailpoet_amazon_ses_access_key"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",value:s,className:"regular-text",onChange:(0,k.z2)(i),id:"mailpoet_amazon_ses_access_key"})}),(0,ye.jsx)(Ie,{title:(0,k.t)("secretKey"),htmlFor:"mailpoet_amazon_ses_secret_key"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",value:n,className:"regular-text",onChange:(0,k.z2)(a),id:"mailpoet_amazon_ses_secret_key"})})]})}function Kt(){const[e,t]=we("mta","api_key"),s=Ce("getSendGridOptions")();return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ut,{recommendedEmails:s.emails,recommendedInterval:s.interval}),(0,ye.jsx)(Ie,{title:(0,k.t)("apiKey"),htmlFor:"mailpoet_sendgrid_api_key"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",value:e,onChange:(0,k.z2)(t),id:"mailpoet_sendgrid_api_key"})})]})}function Bt(){const[e]=we("mta","method");return(0,ye.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,ye.jsx)(Lt,{}),"PHPMail"===e&&(0,ye.jsx)(zt,{}),"SMTP"===e&&(0,ye.jsx)(Ot,{}),"AmazonSES"===e&&(0,ye.jsx)(Gt,{}),"SendGrid"===e&&(0,ye.jsx)(Kt,{}),(0,ye.jsx)(Mt,{}),(0,ye.jsx)(Vt,{}),(0,ye.jsx)(Pt,{})]})}function Yt(){const{subPage:e}=(0,Tt.UO)();return"other"===e?(0,ye.jsx)(Bt,{}):(0,ye.jsx)(wt,{})}function Wt(){const e=Ce("isMssActive")(),[t,s]=we("signup_confirmation","enabled"),i=e=>{"1"===e&&window.confirm((0,k.t)("subscribersNeedToActivateSub"))&&s("1"),""===e&&window.confirm((0,k.t)("newSubscribersAutoConfirmed"))&&s("")};return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("enableSignupConfTitle"),description:(0,ye.jsxs)(ye.Fragment,{children:[(0,k.t)("enableSignupConfDescription")," ",(0,ye.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/128-why-you-should-use-signup-confirmation-double-opt-in","data-beacon-article":"57ce097f903360649f6e5700",rel:"noopener noreferrer",target:"_blank",children:(0,k.t)("readAboutDoubleOptIn")})]}),htmlFor:"signup_confirmation-enabled"}),(0,ye.jsx)(Se,{children:e?(0,ye.jsx)("p",{children:(0,k.t)("signupConfirmationIsMandatory")}):(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(qe.Y,{id:"signup_confirmation-enabled",checked:"1"===t,value:"1",onCheck:i,automationId:"enable_signup_confirmation"}),(0,k.t)("yes")," ",(0,ye.jsx)(qe.Y,{checked:""===t,value:"",onCheck:i,automationId:"disable_signup_confirmation"}),(0,k.t)("no")]})})]})}function $t(){const[e]=we("signup_confirmation","enabled"),[t,s]=we("signup_confirmation","subject");return e?(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("emailSubject"),htmlFor:"signup_confirmation-subject"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",size:50,id:"signup_confirmation-subject","data-automation-id":"signup_confirmation_email_subject",value:t,onChange:(0,k.z2)(s)})})]}):null}var qt=s(8279);function Ht(){const[e]=we("signup_confirmation","enabled"),[t,s]=we("signup_confirmation","body");if(!e)return null;const i=(0,k.t)("emailContentDescription").replace("[current_site_title]",window.mailpoet_current_site_title||"").split("<br />").filter((e=>e));return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("emailContent"),description:i.map((e=>(0,ye.jsxs)("span",{children:[e,(0,ye.jsx)("br",{}),(0,ye.jsx)("br",{})]},e))),htmlFor:"signup_confirmation-body"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(qt.g,{id:"signup_confirmation-body",cols:50,rows:15,"data-automation-id":"signup_confirmation_email_body",value:t,onChange:(0,k.z2)(s)})})]})}function Xt(){const[e]=we("signup_confirmation","enabled"),[t,s]=we("subscription","pages","confirmation");return e?(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("confirmationPage"),description:(0,k.t)("confirmationPageDescription"),htmlFor:"subscription-pages-confirmation"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Re,{value:t,preview:"confirm",setValue:s,id:"subscription-pages-confirmation",automationId:"page_selection",linkAutomationId:"preview_page_link"})})]}):null}function Jt(){return(0,ye.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,ye.jsx)(Wt,{}),(0,ye.jsx)($t,{}),(0,ye.jsx)(Ht,{}),(0,ye.jsx)(Xt,{}),(0,ye.jsx)(De,{})]})}function Zt(){const[e,t]=we("woocommerce","use_mailpoet_editor"),[s]=we("woocommerce","transactional_email_id"),i=Ae("openWoocommerceCustomizer");return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("wcCustomizerTitle"),description:(0,k.t)("wcCustomizerDescription"),htmlFor:"mailpoet_wc_customizer"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(Ke.X,{id:"mailpoet_wc_customizer",automationId:"mailpoet_wc_customizer",checked:"1"===e,onCheck:e=>t(e?"1":"")}),(0,ye.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,ye.jsx)(Ee.z,{type:"button",onClick:()=>i(s),variant:"secondary",dimension:"small",children:(0,k.t)("openTemplateEditor")})})]})]})}function Qt(){const[e,t]=we("woocommerce","optin_on_checkout","enabled"),[s,i]=we("woocommerce","optin_on_checkout","segments"),[n,a]=we("woocommerce","optin_on_checkout","message"),r=Ae("setErrorFlag"),o=""===n.trim();return(0,ke.useEffect)((()=>{r(o)}),[o,r]),(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("wcOptinTitle"),description:(0,k.t)("wcOptinDescription"),htmlFor:"mailpoet_wc_checkout_optin"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(Ke.X,{id:"mailpoet_wc_checkout_optin",automationId:"mailpoet_wc_checkout_optin",checked:"1"===e,onCheck:e=>t(e?"1":"")}),"1"===e&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)("br",{}),(0,ye.jsxs)("label",{htmlFor:"mailpoet_wc_checkout_optin_segments",children:[(0,k.t)("wcOptinSegmentsTitle"),(0,ye.jsx)("br",{}),(0,ye.jsx)("span",{children:(0,k.t)("leaveEmptyToSubscribeToWCCustomers")})]}),(0,ye.jsx)("br",{}),(0,ye.jsx)(Ve,{id:"mailpoet_wc_checkout_optin_segments",value:s,setValue:i,placeholder:(0,k.t)("wcOptinSegmentsPlaceholder")})]})]}),"1"===e&&(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("wcOptinMsgTitle"),description:(0,k.t)("wcOptinMsgDescription"),htmlFor:"mailpoet_wc_checkout_optin_message"}),(0,ye.jsxs)(Se,{children:[(0,ye.jsx)(Ue.I,{dimension:"small",type:"text",id:"mailpoet_wc_checkout_optin_message","data-automation-id":"mailpoet_wc_checkout_optin_message",value:n,onChange:(0,k.z2)(a),placeholder:(0,k.t)("wcOptinMsgPlaceholder")}),(0,ye.jsx)("br",{}),o&&(0,ye.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,k.t)("wcOptinMsgCannotBeEmpty")})]})]})]})}function es(){const[e,t]=we("mailpoet_subscribe_old_woocommerce_customers","enabled");return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(Ie,{title:(0,k.t)("subscribeOldWCTitle"),description:(0,k.t)("subscribeOldWCDescription"),htmlFor:"mailpoet_subscribe_old_wc_customers"}),(0,ye.jsx)(Se,{children:(0,ye.jsx)(Ke.X,{id:"mailpoet_subscribe_old_wc_customers",automationId:"mailpoet_subscribe_old_wc_customers",checked:"1"===e,onCheck:e=>t(e?"1":"")})})]})}function ts(){return(0,ye.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,ye.jsx)(Zt,{}),(0,ye.jsx)(Qt,{}),(0,ye.jsx)(es,{}),(0,ye.jsx)(De,{})]})}function ss(){const e=Ce("isSaving")(),t=Ce("hasWooCommerce")();return(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(ve.D,{}),e&&(0,ye.jsx)(xe.g,{}),(0,ye.jsx)(_e.w,{}),(0,ye.jsx)(fe.D,{storeName:"mailpoet-settings"}),(0,ye.jsxs)(je.t,{activeKey:"basics",onSwitch:e=>(e=>{j.x.trackEvent("User has clicked a tab in Settings",{"Tab ID":e})})(e),children:[(0,ye.jsx)(be.O,{title:(0,k.t)("basicsTab"),automationId:"basic_settings_tab",children:(0,ye.jsx)(Qe,{})},"basics"),(0,ye.jsx)(be.O,{title:(0,k.t)("signupConfirmationTab"),automationId:"signup_settings_tab",children:(0,ye.jsx)(Jt,{})},"signup"),(0,ye.jsx)(be.O,{route:"mta/:subPage?",title:(0,k.t)("sendWithTab"),automationId:"send_with_settings_tab",children:(0,ye.jsx)(Yt,{})},"mta"),t&&(0,ye.jsx)(be.O,{title:(0,k.t)("wooCommerceTab"),automationId:"woocommerce_settings_tab",children:(0,ye.jsx)(ts,{})},"woocommerce"),(0,ye.jsx)(be.O,{title:(0,k.t)("advancedTab"),automationId:"settings-advanced-tab",children:(0,ye.jsx)(ut,{})},"advanced"),(0,ye.jsx)(be.O,{title:(0,k.t)("keyActivationTab"),automationId:"activation_settings_tab",children:(0,ye.jsx)(At,{})},"premium")]})]})}function is(){return(0,ye.jsx)(o.k.Provider,{value:(0,o.S)(window),children:(0,ye.jsx)(ss,{})})}const ns=document.getElementById("settings_container");ns&&((e=>{(0,l.registerStore)(c,{reducer:ge(M(e)),actions:i,selectors:n,controls:a,resolvers:{}})})(window),r.render((0,ye.jsx)(is,{}),ns))},65311:function(e){e.exports=jQuery}},function(e){e.O(0,[351],(function(){return 27575,e(e.s=27575)})),e.O()}]);