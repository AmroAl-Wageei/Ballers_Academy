wpJsonpAmeliaBookingPlugin([13],{1328:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(726),a=o.n(i),n=o(708),s=o.n(n),r=o(792),l=o(733),c=o(696),u=o(338),m=o(934),d=o(1329),p=o.n(d),h=o(807),f=o.n(h),v=o(796),g=o.n(v),b=o(700),y=o(702),C=o(722),w=o(968),k=o.n(w),$=o(699),P=o(777),x=o.n(P),D=o(697);e.default={mixins:[r.a,l.a,C.a,y.a,c.a,u.a,m.a,b.a,$.a,D.a],data:function(){return{bookingFetched:!1,paymentsFilteredCount:0,paymentsTotalCount:0,couponFetched:!1,couponsFilteredCount:0,couponsTotalCount:0,displayTotalCount:0,paymentsFiltering:!1,couponsFiltering:!1,fetchedFilteredPayments:!1,fetchedFilteredCoupons:!1,addNewCouponBtnDisplay:!1,dialogCoupon:!1,dialogPayment:!1,coupon:null,form:new s.a,checkPaymentData:{toaster:!1,allChecked:!1},checkCouponData:{toaster:!1,allChecked:!1},options:{entities:{events:[],services:[],employees:[],customers:[]},fetched:!1},dialogPaymentsExport:!1,dialogCouponsExport:!1,paymentsParams:{page:1,dates:this.getDatePickerInitRange(),status:"",services:[],events:[],providerId:"",customerId:""},exportParamsPayments:{fields:[{label:this.$root.labels.service+"/"+this.$root.labels.event,value:"service",checked:!0},{label:this.$root.labels.booking_start,value:"bookingStart",checked:!0},{label:this.$root.labels.customer,value:"customer",checked:!0},{label:this.$root.labels.customer_email,value:"customerEmail",checked:!0},{label:this.$root.labels.employee,value:"employee",checked:!0},{label:this.$root.labels.employee_email,value:"employeeEmail",checked:!0},{label:this.$root.labels.amount,value:"amount",checked:!0},{label:this.$root.labels.method,value:"type",checked:!0},{label:this.$root.labels.status,value:"status",checked:!0},{label:this.$root.labels.payment_date,value:"paymentDate",checked:!0}]},exportPaymentsAction:"",couponsParams:{page:1,status:"",services:[],events:[],search:""},exportParamsCoupons:{fields:[{label:this.$root.labels.code,value:"code",checked:!0},{label:this.$root.labels.discount,value:"discount",checked:!0},{label:this.$root.labels.deduction,value:"deduction",checked:!0},{label:this.$root.labels.services,value:"services",checked:!0},{label:this.$root.labels.events,value:"events",checked:!0},{label:this.$root.labels.limit,value:"limit",checked:!0},{label:this.$root.labels.used,value:"used",checked:!0}]},exportCouponsAction:"",statuses:[{value:"paid",label:this.$root.labels.paid},{value:"pending",label:this.$root.labels.pending},{value:"partiallyPaid",label:this.$root.labels.partially_paid}],selectedPaymentModalData:{paymentId:null,bookingStart:null,bookings:null,service:null,providers:null,customer:null},filterPaymentsFields:!0,filterCouponsFields:!0,searchPlaceholder:this.$root.labels.finance_coupons_search_placeholder,financeTabs:"payments",payments:[],coupons:[],timer:null}},created:function(){s.a.defaults.axios=this.$http;var t=this.getUrlQueryParams(window.location.href);this.paymentsParams.dates="dateFrom"in t&&"dateTo"in t?{start:this.$moment(t.dateFrom).toDate(),end:this.$moment(t.dateTo).toDate()}:this.getDatePickerInitRange(),t.status&&(this.paymentsParams.status=t.status),this.fetchData(),this.handleResize(),this.getFinanceOptions()},mounted:function(){this.inlineSVG(),this.$root.settings.payments.wc&&this.$root.settings.payments.wc.enabled&&this.exportParamsPayments.fields.push({label:this.$root.labels.wc_order_id,value:"wcOrderId",checked:!0})},methods:{fetchData:function(){this.getPayments(),this.getCoupons()},getPayments:function(){var t=this;this.paymentsFiltering=!0,this.fetchedFilteredPayments=!1;var e=JSON.parse(JSON.stringify(this.paymentsParams)),o=[];e.dates&&(e.dates.start&&o.push(this.$moment(e.dates.start).format("YYYY-MM-DD")),e.dates.end&&o.push(this.$moment(e.dates.end).format("YYYY-MM-DD")),e.dates=o),Object.keys(e).forEach(function(t){return!e[t]&&0!==e[t]&&delete e[t]}),this.$http.get(this.$root.getAjaxUrl+"/payments",{params:this.getAppropriateUrlParams(e)}).then(function(e){e.data.data.payments.forEach(function(t){t.checked=!1});var o=t.options.entities.customers.map(function(t){return t.id}),i=t.options.entities.customers;e.data.data.payments.forEach(function(t){-1===o.indexOf(t.customerId)&&i.push({id:t.customerId,firstName:t.customerFirstName,lastName:t.customerLastName,email:t.customerEmail})}),t.options.entities.customers=Object.values(i),t.payments=e.data.data.payments,t.paymentsFilteredCount=e.data.data.filteredCount,t.paymentsTotalCount=e.data.data.totalCount,"coupons"===t.financeTabs?t.displayTotalCount=t.couponsTotalCount:t.displayTotalCount=t.paymentsTotalCount,t.paymentsFiltering=!1,t.fetchedFilteredPayments=!0}).catch(function(e){console.log(e.message),t.paymentsFiltering=!1,t.fetchedFilteredPayments=!0})},getFinanceOptions:function(){var t=this;this.options.fetched=!1,this.searchCustomers("",function(){var e=t.options.entities.customers.map(function(t){return parseInt(t.id)}),o=t.options.entities.customers;t.searchedCustomers.forEach(function(t){-1===e.indexOf(parseInt(t.id))&&(e.push(t.id),o.push(t))}),t.options.entities.customers=Object.values(o)}),this.$http.get(this.$root.getAjaxUrl+"/entities",{params:this.getAppropriateUrlParams({types:["categories","employees","events","packages"]})}).then(function(e){t.options.entities=e.data.data,t.filterResponseData(e),t.options.entities.services=t.getServicesFromCategories(t.options.entities.categories),t.options.fetched=!0}).catch(function(e){console.log(e.message),t.options.fetched=!0})},getCoupons:function(){},getPaymentAppointment:function(t){var e=this;this.$http.get(this.$root.getAjaxUrl+"/appointments/"+t.appointmentId).then(function(o){e.selectedPaymentModalData=e.getPaymentData(t.id,o.data.data.appointment,null,null),e.selectedPaymentModalData.customer={email:t.customerEmail,firstName:t.customerFirstName,lastName:t.customerLastName},e.bookingFetched=!0}).catch(function(t){console.log(t.message)})},getEvent:function(t){var e=this;this.$http.get(this.$root.getAjaxUrl+"/events/"+t.eventId).then(function(o){e.selectedPaymentModalData=e.getPaymentData(t.id,null,o.data.data.event,null),e.selectedPaymentModalData.customer={email:t.customerEmail,firstName:t.customerFirstName,lastName:t.customerLastName},e.bookingFetched=!0}).catch(function(t){console.log(t.message)})},getPackage:function(){},getCoupon:function(){},paymentGroupDeleteCallback:function(){this.checkPaymentData.allChecked=!1,this.checkPaymentData.toaster=!1,this.fetchData()},couponGroupDeleteCallback:function(){},changeRange:function(){this.setDatePickerSelectedDaysCount(this.paymentsParams.dates.start,this.paymentsParams.dates.end),this.filterPayments()},filterPayments:function(){this.getPayments()},filterCoupons:function(){},updatePaymentCallback:function(){this.dialogPayment=!1,this.fetchData()},duplicateCouponCallback:function(t){},handleResize:function(){this.filterPaymentsFields=window.innerWidth>=992,this.filterCouponsFields=window.innerWidth>=992},showDialogNewCoupon:function(){},showDialogEditCoupon:function(){},showDialogEditPayment:function(t){this.dialogPayment=!0,t.appointmentId&&this.getPaymentAppointment(t),t.eventId&&this.getEvent(t),t.packageId&&this.getPackage(t)},handleTabClick:function(t){"coupons"===t.name?(this.addNewCouponBtnDisplay=!0,this.displayTotalCount=this.couponsTotalCount):(this.addNewCouponBtnDisplay=!1,this.displayTotalCount=this.paymentsTotalCount)},selectAllInCategoryFinance:function(t){var e=this.getCategoryServices(t).map(function(t){return t.id});_.isEqual(_.intersection(e,this.paymentsParams.services),e)?this.paymentsParams.services=_.difference(this.paymentsParams.services,e):this.paymentsParams.services=_.uniq(this.paymentsParams.services.concat(e)),this.filterPayments()},selectAllInCategoryCoupons:function(){},getInitCouponObject:function(){},closeDialogPayment:function(){this.dialogPayment=!1,this.bookingFetched=!1},closeDialogCoupon:function(){}},watch:{"couponsParams.search":function(){clearTimeout(this.timer),this.timer=setTimeout(this.filterCoupons,500)},dialogPayment:function(){!1===this.dialogPayment&&(this.bookingFetched=!1)},dialogCoupon:function(){!1===this.dialogCoupon&&(this.couponFetched=!1,this.coupon=null)}},computed:{hasPayments:function(){return 0!==this.paymentsTotalCount},hasPaymentsFiltered:function(){return 0!==this.payments.length},isPaymentsFiltering:function(){return this.paymentsFiltering&&"payments"===this.financeTabs},hasCoupons:function(){return 0!==this.couponsTotalCount},hasCouponsFiltered:function(){return 0!==this.coupons.length},isCouponsFiltering:function(){return this.couponsFiltering&&"coupons"===this.financeTabs}},components:{PageHeader:a.a,DialogCoupon:p.a,DialogPayment:f.a,DialogExport:g.a,GroupDelete:k.a,PaginationBlock:x.a}}},1329:function(t,e,o){var i=o(335)(o(1330),o(1331),!1,null,null,null);t.exports=i.exports},1330:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(719),a=o.n(i),n=o(696),s=o(700),r=o(699),l=o(338);e.default={mixins:[n.a,s.a,r.a,l.a],props:{coupon:null,couponFetched:!1,services:null,events:null},data:function(){var t=this,e=function(e,o,i){0===t.coupon.discount&&0===t.coupon.deduction?i(new Error(t.$root.labels.no_coupon_amount)):i()},o=function(e,o,i){0===t.coupon.serviceList.length&&0===t.coupon.eventList.length?i(new Error(t.$root.labels.no_entities_selected)):i()};return{couponTabs:"details",allServicesSelected:!1,allEventsSelected:!1,dialogLoading:!0,rules:{code:[{required:!0,message:this.$root.labels.enter_coupon_code_warning,trigger:"submit"}],discount:[{validator:e,trigger:"submit"}],deduction:[{validator:e,trigger:"submit"}],services:[{validator:o,trigger:"submit"}],events:[{validator:o,trigger:"submit"}],limit:[{validator:function(e,o,i){t.coupon.limit<=0?i(new Error(t.$root.labels.coupon_usage_limit_validation)):i()},trigger:"submit"}]}}},mounted:function(){},created:function(){},updated:function(){this.inlineSVG()},methods:{limitChanged:function(){this.coupon.limit<this.coupon.customerLimit&&(this.coupon.customerLimit=this.coupon.limit)},instantiateDialog:function(){},getParsedEntity:function(){},closeDialog:function(){},allServicesSelection:function(){},allEventsSelection:function(){this.coupon.eventList=(this.allEventsSelected=!this.allEventsSelected)?this.events:[]},clearValidation:function(){}},watch:{couponFetched:function(){!0===this.couponFetched&&this.instantiateDialog()}},components:{DialogActions:a.a}}},1331:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogLoading,expression:"dialogLoading"}],staticClass:"am-dialog-loader"},[o("div",{staticClass:"am-dialog-loader-content"},[o("img",{attrs:{src:t.$root.getUrl+"public/img/spinner.svg"}}),t._v(" "),o("p",[t._v(t._s(t.$root.labels.loader_message))])])]),t._v(" "),t.dialogLoading?t._e():o("div",{staticClass:"am-dialog-scrollable",class:{"am-edit":0!==t.coupon.id}},[o("div",{staticClass:"am-dialog-header"},[o("el-row",[o("el-col",{attrs:{span:18}},[0!==t.coupon.id?o("h2",[t._v(t._s(t.$root.labels.edit_coupon))]):o("h2",[t._v(t._s(t.$root.labels.new_coupon))])]),t._v(" "),o("el-col",{staticClass:"align-right",attrs:{span:6}},[o("el-button",{staticClass:"am-dialog-close",attrs:{size:"small",icon:"el-icon-close"},on:{click:t.closeDialog}})],1)],1)],1),t._v(" "),o("el-form",{ref:"coupon",attrs:{model:t.coupon,rules:t.rules,"label-position":"top"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[o("el-tabs",{model:{value:t.couponTabs,callback:function(e){t.couponTabs=e},expression:"couponTabs"}},[o("el-tab-pane",{attrs:{label:t.$root.labels.details,name:"details"}},[o("el-form-item",{attrs:{label:"placeholder",prop:"code"}},[o("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.code)+":\n              "),o("el-tooltip",{attrs:{placement:"top"}},[o("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.code_tooltip)},slot:"content"}),t._v(" "),o("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),o("el-input",{attrs:{placeholder:t.$root.labels.code},on:{input:function(e){return t.clearValidation()}},model:{value:t.coupon.code,callback:function(e){t.$set(t.coupon,"code",e)},expression:"coupon.code"}})],1),t._v(" "),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:t.$root.labels.discount+":",prop:"discount"}},[o("el-input-number",{attrs:{min:0,max:100},on:{input:function(e){return t.clearValidation()}},model:{value:t.coupon.discount,callback:function(e){t.$set(t.coupon,"discount",e)},expression:"coupon.discount"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:t.$root.labels.deduction+" ("+t.getCurrencySymbol()+"):",prop:"deduction"}},[o("el-input-number",{attrs:{min:0},on:{input:function(e){return t.clearValidation()}},model:{value:t.coupon.deduction,callback:function(e){t.$set(t.coupon,"deduction",e)},expression:"coupon.deduction"}})],1)],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"placeholder",prop:"limit"}},[o("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.usage_limit)+":\n              "),o("el-tooltip",{attrs:{placement:"top"}},[o("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.usage_limit_tooltip)},slot:"content"}),t._v(" "),o("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),o("el-input-number",{attrs:{min:0,max:1e13},on:{input:function(e){return t.clearValidation()},change:t.limitChanged},model:{value:t.coupon.limit,callback:function(e){t.$set(t.coupon,"limit",e)},expression:"coupon.limit"}})],1),t._v(" "),t.coupon.limit>=100?o("el-form-item",{attrs:{label:"placeholder",prop:"customerLimit"}},[o("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.usage_customer_limit)+":\n              "),o("el-tooltip",{attrs:{placement:"top"}},[o("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.usage_customer_limit_tooltip)},slot:"content"}),t._v(" "),o("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),o("el-input-number",{attrs:{min:0,max:t.coupon.limit},on:{input:function(e){return t.clearValidation()}},model:{value:t.coupon.customerLimit,callback:function(e){t.$set(t.coupon,"customerLimit",e)},expression:"coupon.customerLimit"}})],1):t._e(),t._v(" "),t.coupon.limit<100?o("el-form-item",{attrs:{label:"placeholder"}},[o("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.usage_customer_limit)+":\n              "),o("el-tooltip",{attrs:{placement:"top"}},[o("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.usage_customer_limit_tooltip)},slot:"content"}),t._v(" "),o("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),o("el-select",{model:{value:t.coupon.customerLimit,callback:function(e){t.$set(t.coupon,"customerLimit",e)},expression:"coupon.customerLimit"}},[o("el-option",{key:0,attrs:{label:t.$root.labels.unlimited,value:0}}),t._v(" "),t._l(t.coupon.limit,function(t){return o("el-option",{key:t,attrs:{label:t,value:t}})})],2)],1):t._e(),t._v(" "),o("el-form-item",{attrs:{label:"placeholder"}},[o("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.expiration_date)+":\n            ")]),t._v(" "),o("v-date-picker",{attrs:{clearable:"",mode:"single","popover-visibility":"focus","popover-direction":"top","show-day-popover":!1,"input-props":{class:"el-input__inner",readOnly:"readonly"},disabled:!1,"is-required":!1,formats:t.vCalendarFormats},model:{value:t.coupon.expirationDate,callback:function(e){t.$set(t.coupon,"expirationDate",e)},expression:"coupon.expirationDate"}}),t._v(" "),t.coupon.expirationDate?o("span",{staticClass:"am-v-date-picker-suffix el-input__suffix-inner",attrs:{disabled:!t.coupon.expirationDate},on:{click:function(e){t.coupon.expirationDate=null}}},[o("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close"})]):t._e()],1),t._v(" "),t.services.length>0?o("el-form-item",{attrs:{label:"placeholder",prop:"services"}},[o("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.services)+":\n              "),o("el-tooltip",{attrs:{placement:"top"}},[o("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.services_tooltip)},slot:"content"}),t._v(" "),o("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),o("el-select",{attrs:{"value-key":"id",filterable:"",multiple:"",placeholder:t.$root.labels.select_service,"collapse-tags":""},on:{change:function(e){return t.clearValidation()}},model:{value:t.coupon.serviceList,callback:function(e){t.$set(t.coupon,"serviceList",e)},expression:"coupon.serviceList"}},[o("div",{staticClass:"am-drop-parent",on:{click:t.allServicesSelection}},[o("span",[t._v(t._s(t.$root.labels.select_all_services))])]),t._v(" "),t._l(t.services,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t}})})],2)],1):t._e(),t._v(" "),t.events.length>0?o("el-form-item",{attrs:{label:"placeholder",prop:"events"}},[o("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.events)+":\n              "),o("el-tooltip",{attrs:{placement:"top"}},[o("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.events_tooltip)},slot:"content"}),t._v(" "),o("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),o("el-select",{attrs:{"value-key":"id",filterable:"",multiple:"",placeholder:t.$root.labels.select_event,"collapse-tags":""},on:{change:function(e){return t.clearValidation()}},model:{value:t.coupon.eventList,callback:function(e){t.$set(t.coupon,"eventList",e)},expression:"coupon.eventList"}},[o("div",{staticClass:"am-drop-parent",on:{click:t.allEventsSelection}},[o("span",[t._v(t._s(t.$root.labels.select_all_events))])]),t._v(" "),t._l(t.events,function(e){return o("el-option",{key:e.id,attrs:{label:e.name+(e.periods&&e.periods.length?" ("+t.getFrontedFormattedDate(e.periods[0].periodStart.split(" ")[0])+")":""),value:e}})})],2)],1):t._e()],1),t._v(" "),o("el-tab-pane",{attrs:{label:t.$root.labels.notifications,name:"notifications"}},[o("el-form-item",{attrs:{label:"placeholder",prop:"notificationInterval"}},[o("label",{attrs:{slot:"label"},slot:"label"},[t._v("\n              "+t._s(t.$root.labels.send_interval)+":\n              "),o("el-tooltip",{attrs:{placement:"top"}},[o("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.send_interval_tooltip)},slot:"content"}),t._v(" "),o("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),o("el-input-number",{attrs:{min:0},on:{input:function(e){return t.clearValidation()},change:function(){t.coupon.notificationInterval||(t.coupon.notificationRecurring=!1)}},model:{value:t.coupon.notificationInterval,callback:function(e){t.$set(t.coupon,"notificationInterval",e)},expression:"coupon.notificationInterval"}})],1),t._v(" "),o("div",{staticClass:"am-setting-box am-switch-box"},[o("el-row",{attrs:{type:"flex",align:"middle",gutter:24,disabled:!0}},[o("el-col",{attrs:{span:19}},[t._v("\n                "+t._s(t.$root.labels.send_recurring)+"\n                "),o("el-tooltip",{attrs:{placement:"top"}},[o("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.$root.labels.send_recurring_tooltip)},slot:"content"}),t._v(" "),o("i",{staticClass:"el-icon-question am-tooltip-icon"})])],1),t._v(" "),o("el-col",{staticClass:"align-right",attrs:{span:5}},[o("el-switch",{attrs:{"active-text":"","inactive-text":"",disabled:!t.coupon.notificationInterval},model:{value:t.coupon.notificationRecurring,callback:function(e){t.$set(t.coupon,"notificationRecurring",e)},expression:"coupon.notificationRecurring"}})],1)],1)],1)],1)],1)],1)],1),t._v(" "),t.dialogLoading?t._e():o("dialog-actions",{attrs:{formName:"coupon",urlName:"coupons",isNew:0===t.coupon.id,entity:t.coupon,getParsedEntity:t.getParsedEntity,hasIcons:!0,status:{on:"visible",off:"hidden"},buttonText:{confirm:{status:{yes:t.$root.labels.visibility_hide,no:t.$root.labels.visibility_show}}},action:{haveAdd:!0,haveEdit:!0,haveStatus:!0,haveRemove:!0===t.$root.settings.capabilities.canDelete,haveRemoveEffect:!1,haveDuplicate:!0},message:{success:{save:t.$root.labels.coupon_saved,remove:t.$root.labels.coupon_deleted,show:t.$root.labels.coupon_visible,hide:t.$root.labels.coupon_hidden},confirm:{remove:t.$root.labels.confirm_delete_coupon,show:t.$root.labels.confirm_show_coupon,hide:t.$root.labels.confirm_hide_coupon,duplicate:t.$root.labels.confirm_duplicate_coupon}}}})],1)},staticRenderFns:[]}},1332:function(t,e){t.exports={render:function(){var t=this,e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"am-wrap"},[i("div",{staticClass:"am-body",attrs:{id:"am-finance"}},[i("page-header",{attrs:{financeTotal:e.displayTotalCount,addNewCouponBtnDisplay:e.addNewCouponBtnDisplay},on:{newCouponBtnClicked:function(t){return e.showDialogNewCoupon()}}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isPaymentsFiltering&&e.isCouponsFiltering,expression:"isPaymentsFiltering && isCouponsFiltering"}],staticClass:"am-spinner am-section"},[i("img",{attrs:{src:e.$root.getUrl+"public/img/spinner.svg"}})]),e._v(" "),i("div",{staticClass:"am-finances am-section"},[i("el-tabs",{directives:[{name:"show",rawName:"v-show",value:!e.isPaymentsFiltering||!e.isCouponsFiltering,expression:"!isPaymentsFiltering || !isCouponsFiltering"}],on:{"tab-click":e.handleTabClick},model:{value:e.financeTabs,callback:function(t){e.financeTabs=t},expression:"financeTabs"}},[i("el-tab-pane",{attrs:{label:e.$root.labels.payments,name:"payments"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasPayments,expression:"hasPayments"}],staticClass:"am-finance-filter"},[i("el-form",{attrs:{action:e.exportPaymentsAction,method:"POST"}},[i("el-row",{attrs:{gutter:16}},[i("el-col",{staticClass:"v-calendar-column",attrs:{md:24,lg:5}},[i("el-form-item",{staticClass:"calc-width-mobile"},[i("v-date-picker",{attrs:{"is-double-paned":!0,mode:"range","popover-visibility":"focus","popover-direction":"bottom","tint-color":"#1A84EE","show-day-popover":!1,"input-props":{class:"el-input__inner"},"is-expanded":!1,"is-required":!0,"input-class":"el-input__inner",placeholder:e.$root.labels.pick_a_date,formats:e.vCalendarFormats},on:{input:e.changeRange},model:{value:e.paymentsParams.dates,callback:function(t){e.$set(e.paymentsParams,"dates",t)},expression:"paymentsParams.dates"}})],1)],1),e._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.filterPaymentsFields,expression:"filterPaymentsFields"}],staticClass:"am-filter-fields"},[i("el-col",{attrs:{md:6,lg:4}},[i("el-form-item",[i("el-select",{attrs:{filterable:"",clearable:"",placeholder:e.$root.labels.customer,remote:"","remote-method":e.searchCustomers,loading:e.loadingCustomers},on:{change:e.filterPayments},model:{value:e.paymentsParams.customerId,callback:function(t){e.$set(e.paymentsParams,"customerId",t)},expression:"paymentsParams.customerId"}},e._l(e.searchedCustomers.length?e.searchedCustomers:e.options.entities.customers,function(t,e){return i("el-option",{key:e,attrs:{label:t.firstName+" "+t.lastName,value:t.id}})}),1)],1)],1),e._v(" "),i("el-col",{attrs:{md:6,lg:4}},[i("el-form-item",[i("el-select",{attrs:{filterable:"",clearable:"",placeholder:e.$root.labels.employee},on:{change:e.filterPayments},model:{value:e.paymentsParams.providerId,callback:function(t){e.$set(e.paymentsParams,"providerId",t)},expression:"paymentsParams.providerId"}},e._l(e.visibleEmployees,function(t){return i("el-option",{key:t.id,attrs:{label:t.firstName+" "+t.lastName,value:t.id}})}),1)],1)],1),e._v(" "),i("el-col",{attrs:{md:6,lg:4}},[i("el-form-item",[i("el-select",{attrs:{multiple:"",filterable:"",placeholder:e.$root.labels.services,"collapse-tags":""},on:{change:e.filterPayments},model:{value:e.paymentsParams.services,callback:function(t){e.$set(e.paymentsParams,"services",t)},expression:"paymentsParams.services"}},e._l(e.options.entities.categories,function(t){return i("div",{key:t.id},[i("div",{staticClass:"am-drop-parent",on:{click:function(o){return e.selectAllInCategoryFinance(t.id)}}},[i("span",[e._v(e._s(t.name))])]),e._v(" "),e._l(t.serviceList,function(t){return i("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name,value:t.id}})})],2)}),0)],1)],1),e._v(" "),i("el-col",{attrs:{md:6,lg:4}},[i("el-form-item",[i("el-select",{attrs:{multiple:"",clearable:"",placeholder:e.$root.labels.events},on:{change:e.filterPayments},model:{value:e.paymentsParams.events,callback:function(t){e.$set(e.paymentsParams,"events",t)},expression:"paymentsParams.events"}},e._l(e.options.entities.events,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),e._v(" "),i("el-col",{attrs:{md:6,lg:3}},[i("el-form-item",[i("el-select",{staticClass:"calc-width",attrs:{clearable:"",placeholder:e.$root.labels.status},on:{change:e.filterPayments},model:{value:e.paymentsParams.status,callback:function(t){e.$set(e.paymentsParams,"status",t)},expression:"paymentsParams.status"}},e._l(e.statuses,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[i("span",[e._v(e._s(t.label))])])}),1)],1)],1)],1)]),e._v(" "),i("div",{},[i("el-button",{staticClass:"button-filter-toggle am-button-icon",attrs:{title:"Toggle Filters"},on:{click:function(t){e.filterPaymentsFields=!e.filterPaymentsFields}}},[i("img",{staticClass:"svg-amelia",attrs:{alt:"Toggle Filters",src:e.$root.getUrl+"public/img/filter.svg"}})]),e._v(" "),i("el-tooltip",{attrs:{placement:"top"}},[i("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.$root.labels.export_tooltip_payments)},slot:"content"}),e._v(" "),i("el-button",{staticClass:"button-export am-button-icon",on:{click:function(t){e.dialogPaymentsExport=!0}}},[i("img",{staticClass:"svg-amelia",attrs:{alt:"Export",src:e.$root.getUrl+"public/img/export.svg"}})])],1)],1)],1),e._v(" "),i("transition",{attrs:{name:"slide"}},[e.dialogPaymentsExport?i("el-dialog",{staticClass:"am-side-dialog am-dialog-export",attrs:{"close-on-click-modal":!1,visible:e.dialogPaymentsExport,"show-close":!1},on:{"update:visible":function(t){e.dialogPaymentsExport=t}}},[i("dialog-export",{attrs:{data:Object.assign(e.paymentsParams,e.exportParamsPayments),action:e.$root.getAjaxUrl+"/report/payments"},on:{updateAction:function(e){t.exportPaymentsAction=e},closeDialogExport:function(t){e.dialogPaymentsExport=!1}}})],1):e._e()],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isPaymentsFiltering,expression:"isPaymentsFiltering"}],staticClass:"am-spinner am-section"},[i("img",{attrs:{src:e.$root.getUrl+"public/img/spinner.svg"}})]),e._v(" "),e.hasPayments||e.isPaymentsFiltering?e._e():i("div",{staticClass:"am-empty-state am-section"},[i("img",{attrs:{src:e.$root.getUrl+"public/img/emptystate.svg"}}),e._v(" "),i("h2",[e._v(e._s(e.$root.labels.no_payments_yet))]),e._v(" "),i("p")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasPayments&&e.hasPaymentsFiltered&&!e.isPaymentsFiltering,expression:"hasPayments && hasPaymentsFiltered && !isPaymentsFiltering"}],staticClass:"am-finance-list-head"},[i("el-row",[i("el-col",{attrs:{lg:14}},[i("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[!0===e.$root.settings.capabilities.canDelete?i("el-col",{attrs:{lg:2}},[i("p",[i("el-checkbox",{on:{change:function(t){e.checkPaymentData=e.handleCheckAll(e.payments,e.checkPaymentData)}},model:{value:e.checkPaymentData.allChecked,callback:function(t){e.$set(e.checkPaymentData,"allChecked",t)},expression:"checkPaymentData.allChecked"}})],1)]):e._e(),e._v(" "),i("el-col",{attrs:{lg:6}},[i("p",[e._v(e._s(e.$root.labels.payment_date)+":")])]),e._v(" "),i("el-col",{attrs:{lg:8}},[i("p",[e._v(e._s(e.$root.labels.customer)+":")])]),e._v(" "),i("el-col",{attrs:{lg:8}},[i("p",[e._v(e._s(e.$root.labels.employee)+":")])])],1)],1),e._v(" "),i("el-col",{attrs:{lg:10}},[i("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[i("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0}}),e._v(" "),i("el-col",{attrs:{lg:12}},[i("p",[e._v(e._s(e.$root.labels.service)+"/"+e._s(e.$root.labels.event)+":")])]),e._v(" "),i("el-col",{attrs:{lg:12}},[i("p",[e._v(e._s(e.$root.labels.status)+":")])])],1)],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasPayments&&e.hasPaymentsFiltered&&!e.isPaymentsFiltering,expression:"hasPayments && hasPaymentsFiltered && !isPaymentsFiltering"}],staticClass:"am-finance-list"},[i("el-collapse",e._l(e.payments,function(t,o){return 0===t.providers.length||t.providers.length&&null!==e.getProviderById(t.providers[0].id)?i("el-collapse-item",{key:t.id,staticClass:"am-finance",attrs:{name:t.id}},[i("template",{slot:"title"},[i("div",{staticClass:"am-finance-data"},[0===t.appointmentId?i("span",{staticClass:"am-entity-color am-event-color"}):i("span",{staticClass:"am-entity-color am-appointment-color"}),e._v(" "),i("el-row",[i("el-col",{attrs:{lg:14}},[i("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[!0===e.$root.settings.capabilities.canDelete?i("el-col",{attrs:{lg:2,sm:1}},[i("span",{on:{click:function(t){t.stopPropagation()}}},[i("el-checkbox",{on:{change:function(t){e.checkPaymentData=e.handleCheckSingle(e.payments,e.checkPaymentData)}},model:{value:t.checked,callback:function(o){e.$set(t,"checked",o)},expression:"payment.checked"}})],1)]):e._e(),e._v(" "),i("el-col",{attrs:{lg:6,sm:6}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.payment_date)+":")]),e._v(" "),i("h4",[e._v(e._s(e.getFrontedFormattedDate(t.dateTime)))])]),e._v(" "),i("el-col",{attrs:{lg:8,sm:8}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.customer)+":")]),e._v(" "),i("h3",[e._v("\n                              "+e._s(t.customerFirstName+" "+t.customerLastName)+"\n                            ")]),e._v(" "),i("span",[e._v(e._s(t.customerEmail))])]),e._v(" "),i("el-col",{attrs:{lg:8,sm:8}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.employee)+":")]),e._v(" "),1===t.providers.length||e.$root.isLite?i("div",{staticClass:"am-assigned"},[t.providers.length>0&&null!==(e.appointmentProvider=e.getProviderById(t.providers[0].id))?i("img",{attrs:{src:e.pictureLoad(e.appointmentProvider,!0)},on:{error:function(t){return e.imageLoadError(e.appointmentProvider,!0)}}}):e._e(),e._v(" "),i("h4",[e._v(e._s(t.providers.length>0&&null!==(e.user=e.getProviderById(t.providers[0].id))?e.user.firstName+" "+e.user.lastName:""))])]):e._e(),e._v(" "),t.providers.length>1&&!e.$root.isLite?i("el-tooltip",{attrs:{placement:"top-start"}},[i("div",{staticClass:"am-all-event-employees",attrs:{slot:"content"},slot:"content"},e._l(t.providers,function(t){return i("div",{key:t.id},[e._v("\n                                  "+e._s(null!==(e.user=e.getProviderById(t.id))?e.user.firstName+" "+e.user.lastName:"")+"\n                                ")])}),0),e._v(" "),i("div",{staticClass:"am-assigned am-multiple-employees"},[e._l(t.providers,function(t,o){return o<=4?i("img",{key:t.id,attrs:{src:e.pictureLoad(e.getProviderById(t.id),!0)},on:{error:function(o){e.imageLoadError(e.getProviderById(t.id),!0)}}}):e._e()}),e._v(" "),o>4&&t.providers.length-5>0?i("h4",[e._v(" + "+e._s(t.providers.length-5))]):e._e()],2)]):e._e()],1)],1)],1),e._v(" "),i("el-col",{attrs:{lg:10}},[i("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[i("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0,sm:1}}),e._v(" "),i("el-col",{staticClass:"am-payment-service",attrs:{lg:12,sm:14}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.service)+"/"+e._s(e.$root.labels.event)+":")]),e._v(" "),t.packageId?i("img",{attrs:{src:e.$root.getUrl+"public/img/am-package-black.svg"}}):e._e(),e._v(" "),i("h4",[e._v(e._s(t.name))])]),e._v(" "),i("el-col",{staticClass:"am-finance-payment-status",attrs:{lg:6,sm:5}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.status)+":")]),e._v(" "),i("h4",[i("i",{class:{"el-icon-circle-check":"paid"===t.status||"partiallyPaid"===t.status,"partially-paid":"partiallyPaid"===t.status,"el-icon-refresh":"pending"===t.status}}),e._v("\n                              "+e._s(e.getPaymentStatusNiceName(t.status))+"\n                            ")])]),e._v(" "),i("el-col",{staticClass:"align-right",attrs:{lg:6,sm:4}},[i("div",{on:{click:function(t){t.stopPropagation()}}},[i("el-button",{on:{click:function(o){return e.showDialogEditPayment(t)}}},[e._v("\n                                "+e._s(e.$root.labels.details)+"\n                              ")])],1)])],1)],1)],1)],1)]),e._v(" "),i("div",{staticClass:"am-finance-details"},[i("el-row",[i("el-col",{attrs:{lg:14}},[i("el-row",{staticClass:"am-finance-flex-row-top-align",attrs:{gutter:10}},[i("el-col",{staticClass:"hide-on-mobile",attrs:{lg:2,sm:1}}),e._v(" "),i("el-col",{attrs:{lg:22,sm:23}},[i("p",{staticClass:"am-data"},[e._v(e._s(0===t.appointmentId?e.$root.labels.event_date:e.$root.labels.appointment_date)+":")]),e._v(" "),i("p",{staticClass:"am-value"},[e._v(e._s(e.getFrontedFormattedDateTime(t.bookingStart)))])])],1)],1),e._v(" "),i("el-col",{attrs:{lg:10}},[i("el-row",{staticClass:"am-finance-flex-row-top-align",attrs:{gutter:10}},[i("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0,sm:1}}),e._v(" "),i("el-col",{staticClass:"am-finance-payment-gateway",attrs:{lg:12,sm:14}},[i("p",{staticClass:"am-data"},[e._v(e._s(e.$root.labels.method)+":")]),e._v(" "),i("img",{style:{width:e.getPaymentIconWidth(t.gateway)},attrs:{src:e.$root.getUrl+"public/img/payments/"+t.gateway+".svg"}}),e._v(" "),"razorpay"!==t.gateway?i("p",{staticClass:"am-value"},[e._v(e._s(e.getPaymentGatewayNiceName(t)))]):e._e()]),e._v(" "),i("el-col",{attrs:{lg:12,sm:10}},[i("p",{staticClass:"am-data"},[e._v(e._s(e.$root.labels.amount)+":")]),e._v(" "),i("p",{staticClass:"am-value"},[e._v(e._s(e.getFormattedPrice(t.amount)))])])],1)],1)],1)],1)],2):e._e()}),1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasPayments&&!e.hasPaymentsFiltered&&!e.isPaymentsFiltering,expression:"hasPayments && !hasPaymentsFiltered && !isPaymentsFiltering"}],staticClass:"am-empty-state am-section"},[i("img",{attrs:{src:e.$root.getUrl+"public/img/emptystate.svg"}}),e._v(" "),i("h2",[e._v(e._s(e.$root.labels.no_results))])]),e._v(" "),i("pagination-block",{attrs:{params:e.paymentsParams,count:e.paymentsFilteredCount,label:e.$root.labels.payments_lower,visible:e.hasPayments&&e.hasPaymentsFiltered&&!e.isPaymentsFiltering},on:{change:e.filterPayments}})],1),e._v(" "),e.$root.settings.payments.coupons||e.$root.isLite?i("el-tab-pane",{attrs:{label:e.$root.labels.coupons,name:"coupons"}},[i("BlockLite"),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasCoupons,expression:"hasCoupons"}],staticClass:"am-finance-filter"},[i("el-form",{attrs:{action:e.exportCouponsAction,method:"POST"}},[i("el-row",{attrs:{gutter:16}},[i("el-col",{attrs:{md:24,lg:8}},[i("div",{staticClass:"am-search"},[i("el-form-item",[i("el-input",{staticClass:"calc-width-mobile",attrs:{placeholder:e.searchPlaceholder},model:{value:e.couponsParams.search,callback:function(t){e.$set(e.couponsParams,"search",t)},expression:"couponsParams.search"}})],1)],1)]),e._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.filterCouponsFields,expression:"filterCouponsFields"}],staticClass:"am-filter-fields"},[i("el-col",{attrs:{md:24,lg:8}},[i("el-form-item",[i("el-select",{attrs:{multiple:"",filterable:"",placeholder:e.$root.labels.services,"collapse-tags":""},on:{change:e.filterCoupons},model:{value:e.couponsParams.services,callback:function(t){e.$set(e.couponsParams,"services",t)},expression:"couponsParams.services"}},e._l(e.options.entities.categories,function(t){return i("div",{key:t.id},[i("div",{staticClass:"am-drop-parent",on:{click:function(o){return e.selectAllInCategoryCoupons(t.id)}}},[i("span",[e._v(e._s(t.name))])]),e._v(" "),e._l(t.serviceList,function(t){return i("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name,value:t.id}})})],2)}),0)],1)],1),e._v(" "),i("el-col",{attrs:{md:24,lg:8}},[i("el-form-item",[i("el-select",{staticClass:"calc-width",attrs:{multiple:"",filterable:"",placeholder:e.$root.labels.events,"collapse-tags":""},on:{change:e.filterCoupons},model:{value:e.couponsParams.events,callback:function(t){e.$set(e.couponsParams,"events",t)},expression:"couponsParams.events"}},e._l(e.options.entities.events,function(t){return i("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name+(t.periods&&t.periods.length?" ("+e.getFrontedFormattedDate(t.periods[0].periodStart.split(" ")[0])+")":""),value:t.id}})}),1)],1)],1)],1)]),e._v(" "),i("div",{},[i("el-button",{staticClass:"button-filter-toggle am-button-icon",attrs:{title:"Toggle Filters"},on:{click:function(t){e.filterCouponsFields=!e.filterCouponsFields}}},[i("img",{staticClass:"svg-amelia",attrs:{alt:"Toggle Filters",src:e.$root.getUrl+"public/img/filter.svg"}})]),e._v(" "),i("el-tooltip",{attrs:{placement:"top"}},[i("div",{attrs:{slot:"content"},domProps:{innerHTML:e._s(e.$root.labels.export_tooltip_coupons)},slot:"content"}),e._v(" "),i("el-button",{staticClass:"button-export am-button-icon",on:{click:function(t){e.dialogCouponsExport=!0}}},[i("img",{staticClass:"svg-amelia",attrs:{alt:"Export",src:e.$root.getUrl+"public/img/export.svg"}})])],1)],1)],1),e._v(" "),i("transition",{attrs:{name:"slide"}},[e.dialogCouponsExport?i("el-dialog",{staticClass:"am-side-dialog am-dialog-export",attrs:{"close-on-click-modal":!1,visible:e.dialogCouponsExport,"show-close":!1},on:{"update:visible":function(t){e.dialogCouponsExport=t}}},[i("dialog-export",{attrs:{data:Object.assign(e.couponsParams,e.exportParamsCoupons),action:e.$root.getAjaxUrl+"/report/coupons"},on:{updateAction:function(e){t.exportCouponsAction=e},closeDialogExport:function(t){e.dialogCouponsExport=!1}}})],1):e._e()],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isCouponsFiltering&&e.hasCoupons,expression:"isCouponsFiltering && hasCoupons"}],staticClass:"am-spinner am-section"},[i("img",{attrs:{src:e.$root.getUrl+"public/img/spinner.svg"}})]),e._v(" "),e.hasCoupons||e.isCouponsFiltering?e._e():i("div",{staticClass:"am-empty-state am-section"},[i("img",{attrs:{src:e.$root.getUrl+"public/img/emptystate.svg"}}),e._v(" "),i("h2",[e._v(e._s(e.$root.labels.no_coupons_yet))]),e._v(" "),i("p")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasCoupons&&e.hasCouponsFiltered&&!e.isCouponsFiltering,expression:"hasCoupons && hasCouponsFiltered && !isCouponsFiltering"}],staticClass:"am-finance-list-head"},[i("el-row",[i("el-col",{attrs:{lg:8}},[i("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[!0===e.$root.settings.capabilities.canDelete?i("el-col",{attrs:{lg:2}},[i("p",[i("el-checkbox",{on:{change:function(t){e.checkCouponData=e.handleCheckAll(e.coupons,e.checkCouponData)}},model:{value:e.checkCouponData.allChecked,callback:function(t){e.$set(e.checkCouponData,"allChecked",t)},expression:"checkCouponData.allChecked"}})],1)]):e._e(),e._v(" "),i("el-col",{attrs:{lg:8}},[i("p",[e._v(e._s(e.$root.labels.code)+":")])]),e._v(" "),i("el-col",{attrs:{lg:7}},[i("p",[e._v(e._s(e.$root.labels.discount)+":")])]),e._v(" "),i("el-col",{attrs:{lg:7}},[i("p",[e._v(e._s(e.$root.labels.deduction)+":")])])],1)],1),e._v(" "),i("el-col",{attrs:{lg:16}},[i("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[i("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0}}),e._v(" "),i("el-col",{attrs:{lg:6}},[i("p",[e._v(e._s(e.$root.labels.service)+":")])]),e._v(" "),i("el-col",{attrs:{lg:6}},[i("p",[e._v(e._s(e.$root.labels.event)+":")])]),e._v(" "),i("el-col",{attrs:{lg:3}},[i("p",[e._v(e._s(e.$root.labels.usage_limit)+":")])]),e._v(" "),i("el-col",{attrs:{lg:3}},[i("p",[e._v(e._s(e.$root.labels.times_used)+":")])]),e._v(" "),i("el-col",{attrs:{lg:3}},[i("p",[e._v(e._s(e.$root.labels.expiration_date)+":")])])],1)],1)],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasCoupons&&e.hasCouponsFiltered&&!e.isCouponsFiltering,expression:"hasCoupons && hasCouponsFiltered && !isCouponsFiltering"}],staticClass:"am-finance-list"},e._l(e.coupons,function(t){return i("div",{class:{"am-coupon-row am-hidden-entity":"hidden"===t.status,"am-coupon-row":"visible"===t.status}},[i("el-row",[i("el-col",{attrs:{lg:8}},[i("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[!0===e.$root.settings.capabilities.canDelete?i("el-col",{attrs:{lg:2,sm:1}},[i("span",{on:{click:function(t){t.stopPropagation()}}},[i("el-checkbox",{on:{change:function(t){e.checkCouponData=e.handleCheckSingle(e.coupons,e.checkCouponData)}},model:{value:t.checked,callback:function(o){e.$set(t,"checked",o)},expression:"coupon.checked"}})],1)]):e._e(),e._v(" "),i("el-col",{attrs:{lg:8,sm:9}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.code)+":")]),e._v(" "),i("h4",[e._v(e._s(t.code))])]),e._v(" "),i("el-col",{attrs:{lg:7,sm:5}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.discount)+":")]),e._v(" "),i("h4",[e._v(e._s(t.discount))])]),e._v(" "),i("el-col",{attrs:{lg:7,sm:5}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.deduction)+":")]),e._v(" "),i("h4",[e._v(e._s(e.getFormattedPrice(t.deduction)))])])],1)],1),e._v(" "),i("el-col",{attrs:{lg:16}},[i("el-row",{staticClass:"am-finance-flex-row-middle-align",attrs:{gutter:10}},[i("el-col",{staticClass:"hide-on-mobile",attrs:{lg:0,sm:1}}),e._v(" "),i("el-col",{attrs:{lg:6,sm:9}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.service)+":")]),e._v(" "),i("h4",[e._v("\n                        "+e._s(t.serviceList.length>0?t.serviceList[0].name+(t.serviceList.length>1?e.$root.labels.coupons_multiple_services_text:""):"")+"\n                      ")])]),e._v(" "),i("el-col",{attrs:{lg:6,sm:9}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.event)+":")]),e._v(" "),i("h4",[e._v("\n                        "+e._s(t.eventList.length>0?t.eventList[0].name+(t.eventList.length>1?e.$root.labels.coupons_multiple_events_text:""):"")+"\n                      ")])]),e._v(" "),i("el-col",{attrs:{lg:3,sm:5}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.usage_limit)+":")]),e._v(" "),i("h4",[e._v(e._s(t.limit))])]),e._v(" "),i("el-col",{attrs:{lg:3,sm:5}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.times_used)+":")]),e._v(" "),i("h4",[e._v(e._s(t.used))])]),e._v(" "),i("el-col",{attrs:{lg:3,sm:5}},[i("p",{staticClass:"am-col-title"},[e._v(e._s(e.$root.labels.expiration_date)+":")]),e._v(" "),i("h4",[e._v(e._s(t.expirationDate?e.getFrontedFormattedDate(t.expirationDate):"/"))])]),e._v(" "),i("el-col",{staticClass:"align-right",attrs:{lg:3,sm:4}},[i("div",{on:{click:function(t){t.stopPropagation()}}},[i("el-button",{on:{click:function(o){return e.showDialogEditCoupon(t.id)}}},[e._v(e._s(e.$root.labels.edit))])],1)])],1)],1)],1)],1)}),0),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasCoupons&&!e.hasCouponsFiltered&&!e.isCouponsFiltering,expression:"hasCoupons && !hasCouponsFiltered && !isCouponsFiltering"}],staticClass:"am-empty-state am-section"},[i("img",{attrs:{src:e.$root.getUrl+"public/img/emptystate.svg"}}),e._v(" "),i("h2",[e._v(e._s(e.$root.labels.no_results))])]),e._v(" "),i("pagination-block",{attrs:{params:e.couponsParams,count:e.couponsFilteredCount,label:e.$root.labels.coupons_lower,visible:e.hasCoupons&&e.hasCouponsFiltered&&!e.isCouponsFiltering},on:{change:e.filterCoupons}})],1):e._e()],1)],1),e._v(" "),i("group-delete",{attrs:{name:"payments",entities:e.payments,checkGroupData:e.checkPaymentData,confirmDeleteMessage:e.$root.labels.confirm_delete_payment,successMessage:{single:e.$root.labels.payment_deleted,multiple:e.$root.labels.payments_deleted},errorMessage:{single:e.$root.labels.payment_not_deleted,multiple:e.$root.labels.payments_not_deleted}},on:{groupDeleteCallback:e.paymentGroupDeleteCallback}}),e._v(" "),i("group-delete",{attrs:{name:"coupons",entities:e.coupons,checkGroupData:e.checkCouponData,confirmDeleteMessage:e.$root.labels.confirm_delete_coupon,successMessage:{single:e.$root.labels.coupon_deleted,multiple:e.$root.labels.coupons_deleted},errorMessage:{single:e.$root.labels.coupon_not_deleted,multiple:e.$root.labels.coupons_not_deleted}},on:{groupDeleteCallback:e.couponGroupDeleteCallback}}),e._v(" "),e.$root.settings.payments.coupons?i("transition",{attrs:{name:"slide"}},[e.dialogCoupon?i("el-dialog",{staticClass:"am-side-dialog am-dialog-coupon",attrs:{"close-on-click-modal":!1,visible:e.dialogCoupon,"show-close":!1},on:{"update:visible":function(t){e.dialogCoupon=t}}},[i("dialog-coupon",{attrs:{coupon:e.coupon,services:e.options.entities.services,events:e.options.entities.events,couponFetched:e.couponFetched},on:{closeDialog:function(t){return e.closeDialogCoupon()},saveCallback:e.fetchData,duplicateCallback:e.duplicateCouponCallback}})],1):e._e()],1):e._e(),e._v(" "),i("transition",{attrs:{name:"slide"}},[e.dialogPayment?i("el-dialog",{staticClass:"am-side-dialog am-dialog-coupon",attrs:{"close-on-click-modal":!1,visible:e.dialogPayment,"show-close":!1},on:{"update:visible":function(t){e.dialogPayment=t}}},[i("dialog-payment",{attrs:{modalData:e.selectedPaymentModalData,bookingFetched:e.bookingFetched},on:{updatePaymentCallback:e.updatePaymentCallback,closeDialogPayment:function(t){return e.closeDialogPayment()}}})],1):e._e()],1),e._v(" "),i("DialogLite"),e._v(" "),i("el-col",{attrs:{md:6}},[i("a",{staticClass:"am-help-button",attrs:{href:"https://wpamelia.com/admin-finances/",target:"_blank"}},[i("i",{staticClass:"el-icon-question"}),e._v(" "+e._s(e.$root.labels.need_help)+"?\n      ")])])],1)])},staticRenderFns:[]}},683:function(t,e,o){var i=o(335)(o(1328),o(1332),!1,null,null,null);t.exports=i.exports},696:function(t,e,o){"use strict";e.a={data:function(){return{colors:["1788FB","4BBEC6","FBC22D","FA3C52","D696B8","689BCA","26CC2B","FD7E35","E38587","774DFB","31CDF3","6AB76C","FD5FA1","A697C5"],usedColors:[]}},methods:{getAppropriateUrlParams:function(t){if(!this.$root.settings.activation.disableUrlParams)return t;var e=JSON.parse(JSON.stringify(t));return["categories","services","packages","employees","providers","providerIds","extras","locations","events","types","dates"].forEach(function(t){if("extras"===t&&t in e){e.extras=JSON.parse(e.extras);var o=[];e.extras.forEach(function(t){o.push(t.id+"-"+t.quantity)}),e.extras=o.length?o:null}t in e&&Array.isArray(e[t])&&e[t].length&&(e[t]=e[t].join(","))}),e},inlineSVG:function(){var t=o(703);t.init({svgSelector:"img.svg-amelia",initClass:"js-inlinesvg"})},inlineSVGCabinet:function(){setTimeout(function(){o(703).init({svgSelector:"img.svg-cabinet",initClass:"js-inlinesvg"})},100)},imageFromText:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.getNameInitials(t),a=Math.floor(Math.random()*this.colors.length),n=this.colors[a];return this.usedColors.push(this.colors[a]),this.colors.splice(a,1),0===this.colors.length&&(this.colors=this.usedColors,this.usedColors=[]),o?e.firstName?this.$root.getUrl+"public/img/default-employee.svg":e.latitude?this.$root.getUrl+"public/img/default-location.svg":this.$root.getUrl+"public/img/default-service.svg":location.protocol+"//via.placeholder.com/120/"+n+"/fff?text="+i},pictureLoad:function(t,e){if(null!==t){var o=!0===e?t.firstName+" "+t.lastName:t.name;if(void 0!==o)return t.pictureThumbPath=t.pictureThumbPath||this.imageFromText(o),t.pictureThumbPath}},imageLoadError:function(t,e){var o=!0===e?t.firstName+" "+t.lastName:t.name;void 0!==o&&(t.pictureThumbPath=this.imageFromText(o,t,!0))},getNameInitials:function(t){return t.split(" ").map(function(t){return t.charAt(0)}).join("").toUpperCase().substring(0,3).replace(/[^\w\s]/g,"")}}}},697:function(t,e,o){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a={data:function(){return{}},methods:{replaceExistingObjectProperties:function(t,e){var o=this;Object.keys(t).forEach(function(a){null!==t[a]&&"object"===i(t[a])&&a in e?o.replaceExistingObjectProperties(t[a],e[a]):a in e&&(t[a]=e[a])})},addMissingObjectProperties:function(t,e){var o=this;Object.keys(e).forEach(function(a){var n=!1;a in t||("object"===i(e[a])?(t[a]={},n=!0):(t[a]=null,n=!0)),null===e[a]||"object"!==i(e[a])?n&&(t[a]=e[a]):o.addMissingObjectProperties(t[a],e[a])})},scrollView:function(t,e,o){"undefined"!=typeof jQuery&&(void 0!==o&&o||jQuery(window).width()<=600)&&setTimeout(function(){var o=document.getElementById(t);void 0!==o&&null!==o&&o.scrollIntoView({behavior:"smooth",block:e,inline:"end"})},200)},scrollViewInModal:function(t){this.$nextTick(function(){var e=document.getElementById(t),o=document.querySelectorAll(".am-dialog-scrollable");if(e&&o&&o.length){var i=e,a=e.offsetTop;do{a+=(i=i.offsetParent).offsetTop}while(i===o[0]);o[0].scrollTop=a}})},getUrlQueryParams:function(t){var e=t.indexOf("#")>0?t.substring(0,t.indexOf("#")).split("?")[1]:t.split("?")[1];if(e){var o=[],i={};return e.split("&").forEach(function(t){o=t.split("="),i[o[0]]=decodeURIComponent(o[1]).replace(/\+/g," ")}),i}},getUrlParams:function(t){var e={};if(-1!==t.indexOf("?")){var o=[];t.split("?")[1].split("&").forEach(function(t){o=t.split("="),e[o[0]]=decodeURIComponent(o[1]).replace(/\+/g," ")})}return e},removeURLParameter:function(t,e){var o=t.split("?");if(o.length>=2){for(var i=encodeURIComponent(e)+"=",a=o[1].split(/[&;]/g),n=a.length;n-- >0;)-1!==a[n].lastIndexOf(i,0)&&a.splice(n,1);return t=o[0]+(a.length>0?"?"+a.join("&"):"")}return t},capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},trimProperty:function(t,e){t[e]=t[e].trim()}}}},698:function(t,e,o){"use strict";var i=o(713),a=o(344),n=Object.prototype.toString;function s(t){return"[object Array]"===n.call(t)}function r(t){return null!==t&&"object"==typeof t}function l(t){return"[object Function]"===n.call(t)}function c(t,e){if(null!==t&&void 0!==t)if("object"==typeof t||s(t)||(t=[t]),s(t))for(var o=0,i=t.length;o<i;o++)e.call(null,t[o],o,t);else for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.call(null,t[a],a,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===n.call(t)},isBuffer:a,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:r,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===n.call(t)},isFile:function(t){return"[object File]"===n.call(t)},isBlob:function(t){return"[object Blob]"===n.call(t)},isFunction:l,isStream:function(t){return r(t)&&l(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function o(o,i){"object"==typeof e[i]&&"object"==typeof o?e[i]=t(e[i],o):e[i]=o}for(var i=0,a=arguments.length;i<a;i++)c(arguments[i],o);return e},extend:function(t,e,o){return c(e,function(e,a){t[a]=o&&"function"==typeof e?i(e,o):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},699:function(t,e,o){"use strict";e.a={data:function(){return{currencies:[{symbol:"$",name:"US Dollar",symbol_native:"$",code:"USD",iso:"us"},{symbol:"€",name:"Euro",symbol_native:"€",code:"EUR",iso:"eu"},{symbol:"£",name:"British Pound Sterling",symbol_native:"£",code:"GBP",iso:"gb"},{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",code:"CAD",iso:"ca"},{symbol:"FCFP",name:"CFP Franc",symbol_native:"FCFP",code:"XPF",iso:"fr"},{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",code:"CHF",iso:"ch"},{symbol:"RUB",name:"Russian Ruble",symbol_native:"руб.",code:"RUB",iso:"ru"},{symbol:"¥",name:"Japanese Yen",symbol_native:"￥",code:"JPY",iso:"jp"},{symbol:"Af",name:"Afghan Afghani",symbol_native:"؋",code:"AFN",iso:"af"},{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",code:"ALL",iso:"al"},{symbol:"DA",name:"Algerian Dinar",symbol_native:"د.ج.‏",code:"DZD",iso:"dz"},{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",code:"ARS",iso:"ar"},{symbol:"AMD",name:"Armenian Dram",symbol_native:"դր.",code:"AMD",iso:"am"},{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",code:"AUD",iso:"au"},{symbol:"man.",name:"Azerbaijani Manat",symbol_native:"ман.",code:"AZN",iso:"az"},{symbol:"BD",name:"Bahraini Dinar",symbol_native:"د.ب.‏",code:"BHD",iso:"bh"},{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"৳",code:"BDT",iso:"bd"},{symbol:"BYR",name:"Belarusian Ruble",symbol_native:"BYR",code:"BYR",iso:"by"},{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",code:"BZD",iso:"bz"},{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",code:"BOB",iso:"bo"},{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",code:"BAM",iso:"ba"},{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",code:"BWP",iso:"bw"},{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",code:"BRL",iso:"br"},{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",code:"BND",iso:"bn"},{symbol:"BGN",name:"Bulgarian Lev",symbol_native:"лв.",code:"BGN",iso:"bg"},{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",code:"BIF",iso:"bi"},{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",code:"XOF",iso:"auto"},{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",code:"XAF",iso:"auto"},{symbol:"KHR",name:"Cambodian Riel",symbol_native:"៛",code:"KHR",iso:"kh"},{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",code:"CVE",iso:"cv"},{symbol:"CLP",name:"Chilean Peso",symbol_native:"$",code:"CLP",iso:"cl"},{symbol:"CN¥",name:"Chinese Yuan",symbol_native:"CN¥",code:"CNY",iso:"cn"},{symbol:"COP",name:"Colombian Peso",symbol_native:"$",code:"COP",iso:"co"},{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",code:"KMF",iso:"km"},{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",code:"CDF",iso:"cd"},{symbol:"₡",name:"Costa Rican Colón",symbol_native:"₡",code:"CRC",iso:"cr"},{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",code:"HRK",iso:"hr"},{symbol:"Kč",name:"Czech Republic Koruna",symbol_native:"Kč",code:"CZK",iso:"cz"},{symbol:"Dkk",name:"Danish Krone",symbol_native:"kr",code:"DKK",iso:"dk"},{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",code:"DJF",iso:"dj"},{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",code:"DOP",iso:"do"},{symbol:"EGP",name:"Egyptian Pound",symbol_native:"ج.م.‏",code:"EGP",iso:"eg"},{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",code:"ERN",iso:"er"},{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",code:"EEK",iso:"ee"},{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",code:"ETB",iso:"et"},{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",code:"GEL",iso:"ge"},{symbol:"GH₵",name:"Ghanaian Cedi",symbol_native:"GH₵",code:"GHS",iso:"gh"},{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",code:"GTQ",iso:"gt"},{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",code:"GNF",iso:"gn"},{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",code:"HNL",iso:"hn"},{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",code:"HKD",iso:"hk"},{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",code:"HUF",iso:"hu"},{symbol:"kr",name:"Icelandic Króna",symbol_native:"kr",code:"ISK",iso:"is"},{symbol:"INR",name:"Indian Rupee",symbol_native:"টকা",code:"INR",iso:"in"},{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",code:"IDR",iso:"id"},{symbol:"IRR",name:"Iranian Rial",symbol_native:"﷼",code:"IRR",iso:"ir"},{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"د.ع.‏",code:"IQD",iso:"iq"},{symbol:"₪",name:"Israeli New Sheqel",symbol_native:"₪",code:"ILS",iso:"il"},{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",code:"JMD",iso:"jm"},{symbol:"JD",name:"Jordanian Dinar",symbol_native:"د.أ.‏",code:"JOD",iso:"jo"},{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:"тңг.",code:"KZT",iso:"kz"},{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",code:"KES",iso:"ke"},{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"د.ك.‏",code:"KWD",iso:"kw"},{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",code:"LVL",iso:"lv"},{symbol:"LB£",name:"Lebanese Pound",symbol_native:"ل.ل.‏",code:"LBP",iso:"lb"},{symbol:"LD",name:"Libyan Dinar",symbol_native:"د.ل.‏",code:"LYD",iso:"ly"},{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",code:"LTL",iso:"lt"},{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",code:"MOP",iso:"mo"},{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",code:"MKD",iso:"mk"},{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",code:"MGA",iso:"mg"},{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",code:"MYR",iso:"my"},{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",code:"MUR",iso:"mu"},{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",code:"MXN",iso:"mx"},{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",code:"MDL",iso:"md"},{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"د.م.‏",code:"MAD",iso:"ma"},{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",code:"MZN",iso:"mz"},{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",code:"MMK",iso:"mm"},{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",code:"NAD",iso:"na"},{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"नेरू",code:"NPR",iso:"np"},{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",code:"TWD",iso:"tw"},{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",code:"NZD",iso:"nz"},{symbol:"C$",name:"Nicaraguan Córdoba",symbol_native:"C$",code:"NIO",iso:"ni"},{symbol:"₦",name:"Nigerian Naira",symbol_native:"₦",code:"NGN",iso:"ng"},{symbol:"kr",name:"Norwegian Krone",symbol_native:"kr",code:"NOK",iso:"no"},{symbol:"OMR",name:"Omani Rial",symbol_native:"ر.ع.‏",code:"OMR",iso:"om"},{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"₨",code:"PKR",iso:"pk"},{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",code:"PAB",iso:"pa"},{symbol:"₲",name:"Paraguayan Guarani",symbol_native:"₲",code:"PYG",iso:"py"},{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",code:"PEN",iso:"pe"},{symbol:"₱",name:"Philippine Peso",symbol_native:"₱",code:"PHP",iso:"ph"},{symbol:"zł",name:"Polish Zloty",symbol_native:"zł",code:"PLN",iso:"pl"},{symbol:"QR",name:"Qatari Rial",symbol_native:"ر.ق.‏",code:"QAR",iso:"qa"},{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",code:"RON",iso:"ro"},{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",code:"RWF",iso:"rw"},{symbol:"SR",name:"Saudi Riyal",symbol_native:"ر.س.‏",code:"SAR",iso:"sa"},{symbol:"rsd.",name:"Serbian Dinar",symbol_native:"дин.",code:"RSD",iso:"rs"},{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",code:"SGD",iso:"sg"},{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",code:"SOS",iso:"so"},{symbol:"R",name:"South African Rand",symbol_native:"R",code:"ZAR",iso:"za"},{symbol:"₩",name:"South Korean Won",symbol_native:"₩",code:"KRW",iso:"kr"},{symbol:"₭",name:"Lao kip",symbol_native:"₭",code:"LAK",iso:"la"},{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",code:"LKR",iso:"lk"},{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",code:"SDG",iso:"sd"},{symbol:"kr",name:"Swedish Krona",symbol_native:"kr",code:"SEK",iso:"se"},{symbol:"SY£",name:"Syrian Pound",symbol_native:"ل.س.‏",code:"SYP",iso:"sy"},{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",code:"TZS",iso:"tz"},{symbol:"฿",name:"Thai Baht",symbol_native:"฿",code:"THB",iso:"th"},{symbol:"T$",name:"Tongan Paʻanga",symbol_native:"T$",code:"TOP",iso:"to"},{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",code:"TTD",iso:"tt"},{symbol:"DT",name:"Tunisian Dinar",symbol_native:"د.ت.‏",code:"TND",iso:"tn"},{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",code:"TRY",iso:"tr"},{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",code:"UGX",iso:"ug"},{symbol:"₴",name:"Ukrainian Hryvnia",symbol_native:"₴",code:"UAH",iso:"ua"},{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"د.إ.‏",code:"AED",iso:"ae"},{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",code:"UYU",iso:"uy"},{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",code:"UZS",iso:"uz"},{symbol:"Bs.S.",name:"Venezuelan Bolívar",symbol_native:"Bs.S.",code:"VES",iso:"ve"},{symbol:"₫",name:"Vietnamese Dong",symbol_native:"₫",code:"VND",iso:"vn"},{symbol:"YR",name:"Yemeni Rial",symbol_native:"ر.ي.‏",code:"YER",iso:"ye"},{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",code:"ZMK",iso:"zm"}],thousandSeparatorMap:{1:",",2:".",3:" ",4:" "},decimalSeparatorMap:{1:".",2:",",3:".",4:","}}},methods:{getCurrencySymbol:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=this.currencies.find(function(e){return e.code===t.$root.settings.payments.currencyCode});return o&&e&&"INR"!==o.code?o.symbol_native:e&&"INR"===o.code?o.code:this.$root.settings.payments.currency},getPriceThousandSeparator:function(){return this.thousandSeparatorMap[this.$root.settings.payments.priceSeparator]},getPriceDecimalSeparator:function(){return this.decimalSeparatorMap[this.$root.settings.payments.priceSeparator]},getPriceNumberOfDecimalPlaces:function(){return this.$root.settings.payments.priceNumberOfDecimals},getPricePrefix:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"after"===this.$root.settings.payments.priceSymbolPosition||"afterWithSpace"===this.$root.settings.payments.priceSymbolPosition?"":"before"===this.$root.settings.payments.priceSymbolPosition?this.getCurrencySymbol(t):this.getCurrencySymbol(t)+" "},getPriceSuffix:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"before"===this.$root.settings.payments.priceSymbolPosition||"beforeWithSpace"===this.$root.settings.payments.priceSymbolPosition?"":"after"===this.$root.settings.payments.priceSymbolPosition?this.getCurrencySymbol(t):" "+this.getCurrencySymbol(t)},getFormattedPrice:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=this.getPriceNumberOfDecimalPlaces(),i=this.getPriceThousandSeparator(),a=this.getPriceDecimalSeparator(),n=this.getPricePrefix(),s=this.getPriceSuffix(),r=parseInt(t=Math.abs(+t||0).toFixed(o))+"",l=r.length>3?r.length%3:0;return(e?n:"")+(l?r.substr(0,l)+i:"")+r.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+i)+(o?a+Math.abs(t-r).toFixed(o).slice(2):"")+(e?s:"")}},computed:{moneyComponentData:function(){return{decimal:this.getPriceDecimalSeparator(),thousands:this.getPriceThousandSeparator(),prefix:this.getPricePrefix(!0),suffix:this.getPriceSuffix(!0),precision:this.getPriceNumberOfDecimalPlaces(),masked:!1}}}}},700:function(t,e,o){"use strict";e.a={methods:{notify:function(t,e,o,i){var a=this;void 0===i&&(i=""),setTimeout(function(){a.$notify({customClass:i,title:t,message:e,type:o,offset:50})},700)}}}},702:function(t,e,o){"use strict";var i=o(718),a=o(711),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a={mixins:[i.a,a.a],data:function(){return{}},methods:{getLocationById:function(t){return this.options.entities.locations.find(function(e){return e.id===t})||null},getCustomerById:function(t){return this.options.entities.customers.find(function(e){return e.id===t})||null},getProviderById:function(t){return this.options.entities.employees.find(function(e){return e.id===t})||null},getServiceById:function(t){return this.options.entities.services.find(function(e){return e.id===t})||null},getCategoryById:function(t){return this.options.entities.categories.find(function(e){return e.id===t})||null},getPackageById:function(t){return this.options.entities.packages.find(function(e){return e.id===t})||null},getProviderService:function(t,e){var o=this.getProviderById(t).serviceList.find(function(t){return t.id===parseInt(e)});return o?Object.assign(this.getServiceById(e),o):null},getServiceProviders:function(t,e){var o=this;return void 0!==e&&e?this.options.entities.employees.filter(function(e){return-1!==e.serviceList.map(function(t){return t.id}).indexOf(t)}):this.options.entities.employees.filter(function(e){return-1!==e.serviceList.filter(function(t){return o.isEmployeeService(e.id,t.id)}).map(function(t){return t.id}).indexOf(t)})},getServiceLocations:function(t,e){var o=this,i=[];return this.options.entities.employees.filter(function(e){return-1!==e.serviceList.map(function(t){return t.id}).indexOf(t)}).forEach(function(t){i=o.getProviderLocations(t.id,e).map(function(t){return t.id}).concat(i)}),this.options.entities.locations.filter(function(t){return-1!==i.indexOf(t.id)})},getProviderLocations:function(t,e){var o=this,i=[this.getProviderById(t).locationId];if(t in this.options.entitiesRelations)for(var a in this.options.entitiesRelations[t])this.options.entitiesRelations[t].hasOwnProperty(a)&&(i=i.concat(this.options.entitiesRelations[t][a]));return i=i.filter(function(t,e,o){return o.indexOf(t)===e}),(void 0!==e&&e?this.options.entities.locations:this.options.entities.locations.filter(function(e){return o.isEmployeeLocation(t,e.id)})).filter(function(t){return-1!==i.indexOf(t.id)})},getLocationProviders:function(t,e){var o=this,i=[];return this.options.entities.employees.forEach(function(a){-1!==(void 0!==e&&e?o.getProviderLocations(a.id).filter(function(t){return o.isEmployeeLocation(a.id,t.id)}):o.getProviderLocations(a.id)).map(function(t){return t.id}).indexOf(t)&&i.push(a.id)}),i=i.filter(function(t,e,o){return o.indexOf(t)===e}),this.options.entities.employees.filter(function(t){return-1!==i.indexOf(t.id)})},getServicesFromCategories:function(t){var e=[];return t.map(function(t){return t.serviceList}).forEach(function(t){e=e.concat(t)}),e.sort(this.sortWithNull)},getCategoryServices:function(t){return this.options.entities.categories.find(function(e){return e.id===t}).serviceList},getCustomerInfo:function(t){return"info"in t&&t.info?Object.assign({id:"customer"in t?t.customer.id:null},JSON.parse(t.info)):"customerId"in t?this.getCustomerById(t.customerId):"customer"in t?this.getCustomerById(t.customer.id):null},isEmployeeServiceLocation:function(t,e,o){return t in this.options.entitiesRelations&&e in this.options.entitiesRelations[t]&&-1!==this.options.entitiesRelations[t][e].indexOf(o)},isEmployeeService:function(t,e){return t in this.options.entitiesRelations&&e in this.options.entitiesRelations[t]},isEmployeeLocation:function(t,e){var o=!1;if(t in this.options.entitiesRelations)for(var i in this.options.entitiesRelations[t])this.options.entitiesRelations[t].hasOwnProperty(i)&&-1!==this.options.entitiesRelations[t][i].indexOf(e)&&(o=!0);return o},getAvailableEntitiesIds:function(t,e){var o=this,i=[],a=[],n=[],s=null!==e.categoryId?t.categories.find(function(t){return t.id===e.categoryId}):null,r=s?s.serviceList.map(function(t){return t.id}):[];if(null!==e.categoryId&&0===r.length||null!==e.serviceId&&null!==e.employeeId&&!this.isEmployeeService(e.employeeId,e.serviceId)||null!==e.serviceId&&null!==e.employeeId&&null!==e.locationId&&!this.isEmployeeServiceLocation(e.employeeId,e.serviceId,e.locationId))return{services:[],locations:[],employees:[],categories:[]};var l=function(t){if(!o.options.entitiesRelations.hasOwnProperty(t))return"continue";var s=parseInt(t);if(null!==e.employeeId&&e.employeeId!==s||null!==e.locationId&&!o.isEmployeeLocation(s,e.locationId)||null!==e.serviceId&&!o.isEmployeeService(s,e.serviceId)||null!==e.categoryId&&0===r.filter(function(t){return o.isEmployeeService(s,t)}).length||null!==e.categoryId&&null!==e.locationId&&0===r.filter(function(t){return o.isEmployeeServiceLocation(s,t,e.locationId)}).length||null!==e.serviceId&&null!==e.locationId&&!o.isEmployeeServiceLocation(s,e.serviceId,e.locationId))return"continue";for(var l in-1===a.indexOf(s)&&a.push(s),o.options.entitiesRelations[s])if(o.options.entitiesRelations[s].hasOwnProperty(l)){var c=parseInt(l);null!==e.serviceId&&e.serviceId!==c||null!==e.categoryId&&-1===r.indexOf(c)||null!==e.locationId&&!o.isEmployeeServiceLocation(s,c,e.locationId)||(-1===i.indexOf(c)&&i.push(c),o.options.entitiesRelations[s][c].length&&o.options.entitiesRelations[s][c].forEach(function(t){null!==e.locationId&&e.locationId!==t||-1===n.indexOf(t)&&n.push(t)}))}};for(var c in this.options.entitiesRelations)l(c);return{services:i,locations:n,employees:a,categories:t.categories.filter(function(t){return t.serviceList.map(function(t){return t.id}).filter(function(t){return-1!==i.indexOf(t)}).length>0}).map(function(t){return t.id})}},getParsedCustomPricing:function(t){return null===t.customPricing?t.customPricing={enabled:!1,durations:[]}:"object"!==n(t.customPricing)&&(t.customPricing=this.getArrayCustomPricing(t.customPricing)),t.customPricing},filterEntities:function(t,e){var o=this,i=this.getAvailableEntitiesIds(t,e);this.options.entities.employees=t.employees.filter(function(t){return-1!==i.employees.indexOf(t.id)&&t.serviceList.filter(function(t){return-1!==i.services.indexOf(t.id)}).length>0}),this.options.entities.employees.forEach(function(t){t.fullName=t.firstName+" "+t.lastName,t.serviceList.forEach(function(t){t.customPricing=o.getParsedCustomPricing(t)})}),this.options.entities.categories=t.categories,this.options.entities.services=this.getServicesFromCategories(this.options.entities.categories).filter(function(t){return t.show&&-1!==i.services.indexOf(t.id)}),this.options.entities.services.forEach(function(t){t.extras.forEach(function(t){t.extraId=t.id}),t.customPricing=o.getParsedCustomPricing(t)}),this.options.entities.locations=t.locations.filter(function(t){return-1!==i.locations.indexOf(t.id)}),this.options.entities.customFields=t.customFields;var a=this.options.entities.services.map(function(t){return t.id});if("packages"in t&&(!("show"in e)||"services"!==e.show)){t.packages.forEach(function(t){"bookableIds"in t||(t.bookableIds=t.bookable.map(function(t){return t.service.id}))});var n=t.packages.filter(function(t){return"visible"===t.status}).filter(function(t){return t.bookableIds.filter(function(t){return-1!==a.indexOf(t)}).length}),s=this.options.entities.locations.map(function(t){return t.id}),r=this.options.entities.employees.map(function(t){return t.id}),l=[];if(n.forEach(function(e){var i=!1;"availableBookableInfo"in e||(e.availableBookableInfo=[]),e.bookable.forEach(function(a){var n=!1;(0===a.minimumScheduled&&a.maximumScheduled>0||a.minimumScheduled>0&&0===a.maximumScheduled||a.minimumScheduled>0&&a.maximumScheduled>0)&&(i=!0,n=!0),a.hasSlots=n;var c=a.providers.length;if(!t.locations.length||o.options.entities.locations.length){var u=a.locations.length;!c||(a.providers=a.providers.filter(function(t){return-1!==r.indexOf(t.id)&&u?a.locations.filter(function(e){return o.isEmployeeServiceLocation(t.id,a.service.id,e.id)}).length:!o.options.entities.locations.length||o.options.entities.locations.filter(function(e){return o.isEmployeeServiceLocation(t.id,a.service.id,e.id)}).length}),a.providers.length)?(u&&(a.locations=a.locations.filter(function(t){return-1!==s.indexOf(t.id)&&(c?a.providers.filter(function(e){return o.isEmployeeServiceLocation(e.id,a.service.id,t.id)}).length:o.options.entities.employees.filter(function(e){return o.isEmployeeServiceLocation(e.id,a.service.id,t.id)}).length)}),a.locations.length||l.push(e.id)),-1===e.availableBookableInfo.map(function(t){return t.serviceId}).indexOf(a.service.id)&&e.availableBookableInfo.push({serviceId:a.service.id,serviceName:a.service.name,serviceQuantity:a.quantity,providersCount:a.providers.length})):l.push(e.id)}else l.push(e.id)}),e.bookable=e.bookable.filter(function(t){return t.hasSlots}),e.hasSlots=i}),this.options.entities.packages=n.filter(function(t){return-1===l.indexOf(t.id)}),"show"in e&&"packages"===e.show){var c=[];this.options.entities.packages.forEach(function(t){t.bookable.forEach(function(t){c.push(t.service.categoryId)})}),this.options.entities.categories=this.options.entities.categories.filter(function(t){return-1!==c.indexOf(t.id)})}}},processEntities:function(t){var e=this;this.options.entitiesRelations=t.entitiesRelations,this.options.isFrontEnd?("packages"in t&&t.packages.length&&(this.responseEntities.employees=t.employees,this.responseEntities.categories=t.categories,this.responseEntities.locations=t.locations,this.responseEntities.customFields=t.customFields,this.responseEntities.services=this.getServicesFromCategories(this.responseEntities.categories),this.responseEntities.packages=t.packages?t.packages.filter(function(t){return t.available}):[],this.responseEntities.daysOff=t.settings?t.settings.daysOff:[],t.packages=t.packages.filter(function(t){return t.available}),this.params&&this.params.sort||(t.packages=t.packages.sort(function(t,e){return t.position-e.position}))),this.filterEntities(t,this.getShortCodeEntityIds())):(this.options.entities.employees=t.employees,this.options.entities.categories=t.categories,this.options.entities.locations=t.locations,this.options.entities.customers=t.customers,this.options.entities.services=this.getServicesFromCategories(this.options.entities.categories),this.options.entities.packages=t.packages,this.options.entities.customFields=t.customFields,this.options.entities.coupons=t.coupons,this.options.entities.spaces=t.spaces,this.options.entities.services.forEach(function(t){t.extras.forEach(function(t){t.extraId=t.id})}),this.options.availableEntitiesIds=this.getAvailableEntitiesIds(t,{categoryId:null,serviceId:null,employeeId:null,locationId:null})),this.options.entities.employees.forEach(function(t){t.serviceList.forEach(function(t){t.customPricing=e.getParsedCustomPricing(t)})}),this.options.entities.services.forEach(function(t){t.customPricing=e.getParsedCustomPricing(t)}),"settings"in t&&(this.options.entities.settings=t.settings),this.options.entities.tags="tags"in t?t.tags:[]},getShortCodeEntityIds:function(){return this.$root.shortcodeData.booking?{categoryId:"category"in this.$root.shortcodeData.booking?this.$root.shortcodeData.booking.category:null,serviceId:"service"in this.$root.shortcodeData.booking?this.$root.shortcodeData.booking.service:null,employeeId:"employee"in this.$root.shortcodeData.booking?this.$root.shortcodeData.booking.employee:null,locationId:"location"in this.$root.shortcodeData.booking?this.$root.shortcodeData.booking.location:null,show:"show"in this.$root.shortcodeData.booking?this.$root.shortcodeData.booking.show:null}:{categoryId:null,serviceId:null,employeeId:null,locationId:null,show:null}},entitiesLoaded:function(){return"ameliaAppointmentEntities"in window||"ameliaEntities"in window},fillCachedEntities:function(t){var e=this.getServicesFromCategories(t.categories);t.employees.forEach(function(t){t.serviceList.forEach(function(t){Object.assign(t,e.find(function(e){return e.id===t.id}),{price:t.price,customPricing:t.customPricing,minCapacity:t.minCapacity,maxCapacity:t.maxCapacity})})}),"packages"in t&&t.packages.forEach(function(t){t.bookable.forEach(function(t){var o=e.find(function(e){return e.id===t.service.id});o&&(t.service=JSON.parse(JSON.stringify(o)))})})},fetchEntities:function(t,e){var o=this,i={params:this.getAppropriateUrlParams({types:e.types})};if(e.page?i.params.page=e.page:"isFrontEnd"in e&&e.isFrontEnd&&(i.params.page="booking"),void 0!==this.$store&&void 0!==this.$store.state.cabinet&&"provider"===this.$store.state.cabinet.cabinetType&&(i=Object.assign(i,this.getAuthorizationHeaderObject()),Object.assign(i.params,{source:"cabinet-"+this.$store.state.cabinet.cabinetType})),e.isPanel||this.$root.hasApiCall&&!this.entitiesLoaded())this.$http.get(this.$root.getAjaxUrl+"/entities",i).then(function(i){o.options.isFrontEnd=e.isFrontEnd,window.ameliaAppointmentEntities=i.data.data;var a=JSON.parse(JSON.stringify(window.ameliaAppointmentEntities));o.fillCachedEntities(a),o.processEntities(a),o.$root.useTranslations&&o.translateEntities(a);t(!0)}).catch(function(e){console.log(e);t(!1)});else var a=setInterval(function(){if(o.entitiesLoaded()){if(clearInterval(a),o.options.isFrontEnd=e.isFrontEnd,"ameliaEntities"in window){var i=JSON.parse(JSON.stringify(window.ameliaEntities));o.fillCachedEntities(i),o.processEntities(i),o.$root.useTranslations&&o.translateEntities(i)}else{var n=JSON.parse(JSON.stringify(window.ameliaAppointmentEntities));o.fillCachedEntities(n),o.processEntities(n)}t(!0)}},1e3)},getFilteredEntities:function(t,e,o){var i=this,a=this.appointment&&this.appointment.id&&this.appointment[o]?this.appointment[o]:null;return this.options.entities[e].forEach(function(e){e.disabled=-1===t.indexOf(e.id)}),this.options.entities[e].filter(function(t){return-1!==i.options.availableEntitiesIds[e].indexOf(t.id)||null!==a&&a===t.id})}},computed:{visibleLocations:function(){return this.options.entities.locations.filter(function(t){return"visible"===t.status})},visibleEmployees:function(){return this.options.entities.employees.filter(function(t){return"visible"===t.status})},visibleCustomers:function(){return this.options.entities.customers.filter(function(t){return"visible"===t.status})},visibleServices:function(){return this.options.entities.services.filter(function(t){return"visible"===t.status}).sort(this.sortWithNull)},employeesFiltered:function(){var t=this,e=void 0!==this.appointment&&"bookings"in this.appointment&&this.appointment.bookings.length?this.appointment.bookings[0].persons:null,o=this.visibleEmployees.filter(function(o){return o.serviceList.filter(function(i){return"visible"===i.status&&(null===e||i.maxCapacity>=e)&&(!t.appointment.serviceId||t.isEmployeeService(o.id,i.id)&&i.id===t.appointment.serviceId)&&(!t.appointment.locationId||t.isEmployeeServiceLocation(o.id,i.id,t.appointment.locationId))&&(!t.appointment.categoryId||o.serviceList.filter(function(e){return"visible"===e.status&&e.categoryId===t.appointment.categoryId}).length>0)}).length>0});return this.options.isFrontEnd?o:this.getFilteredEntities(o.map(function(t){return t.id}),"employees","providerId")},servicesFiltered:function(){var t=this,e=[];if(this.appointment.providerId){var o=this.employeesFiltered.find(function(e){return e.id===t.appointment.providerId});e=void 0!==o?o.serviceList.filter(function(t){return"visible"===t.status}).map(function(t){return t.id}):[]}var i=this.visibleServices.filter(function(o){return!(t.appointment.providerId&&-1===e.indexOf(o.id)||t.appointment.locationId&&!(t.employeesFiltered.filter(function(e){return t.isEmployeeServiceLocation(e.id,o.id,t.appointment.locationId)}).length>0)||t.appointment.categoryId&&o.categoryId!==t.appointment.categoryId)});return this.options.isFrontEnd?i:this.getFilteredEntities(i.map(function(t){return t.id}),"services","serviceId")},sortWithNull:function(){return function(t,e){return t.position===e.position?0:null===t.position?1:null===e.position?-1:t.position<e.position?-1:1}},sortNotifications:function(){return function(t,e){return t.customName===e.customName?0:null===t.customName?1:null===e.customName?-1:t.id>e.id?-1:1}},locationsFiltered:function(){var t=this,e=[];if(this.appointment.providerId){var o=this.employeesFiltered.find(function(e){return e.id===t.appointment.providerId});e=void 0!==o?o.serviceList.filter(function(t){return"visible"===t.status}):[]}var i=null;this.appointment.categoryId&&(i=this.categoriesFiltered.find(function(e){return e.id===t.appointment.categoryId}));var a=this.visibleLocations.filter(function(o){return(!t.appointment.providerId||e.filter(function(e){return t.isEmployeeServiceLocation(t.appointment.providerId,e.id,o.id)}).length>0)&&(!t.appointment.serviceId||t.employeesFiltered.filter(function(e){return t.isEmployeeServiceLocation(e.id,t.appointment.serviceId,o.id)}).length>0)&&(!t.appointment.categoryId||void 0!==i&&t.employeesFiltered.filter(function(e){return e.serviceList.filter(function(a){return"visible"===a.status&&a.categoryId===i.id&&t.isEmployeeServiceLocation(e.id,a.id,o.id)}).length>0}).length>0)});return this.options.isFrontEnd?a:this.getFilteredEntities(a.map(function(t){return t.id}),"locations","locationId")},couponsFilteredService:function(){var t=this,e=[];return this.options.entities.coupons&&(e=this.options.entities.coupons.filter(function(t){return t.serviceList.length>0}),this.appointment.serviceId)?e.filter(function(e){return e.serviceList.find(function(e){return e.id===t.appointment.serviceId})}):e},couponsFilteredEvent:function(){var t=this,e=[];return this.options.entities.coupons&&(e=this.options.entities.coupons.filter(function(t){return t.eventList.length>0}),this.eventId)?e.filter(function(e){return e.eventList.find(function(e){return e.id===t.eventId})}):e},categoriesFiltered:function(){var t=this,e=null;this.appointment.providerId&&(e=this.employeesFiltered.find(function(e){return e.id===t.appointment.providerId}));var o=null;this.appointment.serviceId&&(o=this.servicesFiltered.find(function(e){return e.id===t.appointment.serviceId}));var i=this.options.entities.categories.filter(function(i){return(!t.appointment.serviceId||void 0!==o&&o.categoryId===i.id)&&(!t.appointment.locationId||i.serviceList.filter(function(e){return"visible"===e.status&&t.employeesFiltered.filter(function(o){return t.isEmployeeServiceLocation(o.id,e.id,t.appointment.locationId)}).length>0}).length>0)&&(!t.appointment.providerId||void 0!==e&&-1!==e.serviceList.filter(function(e){return"visible"===e.status&&t.isEmployeeService(t.appointment.providerId,e.id)}).map(function(t){return t.categoryId}).indexOf(i.id))});return this.options.isFrontEnd?i:this.getFilteredEntities(i.map(function(t){return t.id}),"categories","categoryId")}}}},703:function(t,e,o){(function(o){var i,a,n,s;s=void 0!==o?o:this.window||this.global,a=[],i=function(t){var e,o={},i=!!document.querySelector&&!!t.addEventListener,a={initClass:"js-inlinesvg",svgSelector:"img.svg"},n=function(){var t={},e=!1,o=0,i=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],o++);for(var a=function(o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e&&"[object Object]"===Object.prototype.toString.call(o[i])?t[i]=n(!0,t[i],o[i]):t[i]=o[i])};i>o;o++){a(arguments[o])}return t},s=function(t){var o=document.querySelectorAll(e.svgSelector),i=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}}(o.length,t);Array.prototype.forEach.call(o,function(t,o){var a=t.src||t.getAttribute("data-src"),n=t.attributes,s=new XMLHttpRequest;s.open("GET",a,!0),s.onload=function(){if(s.status>=200&&s.status<400){var o=(new DOMParser).parseFromString(s.responseText,"text/xml").getElementsByTagName("svg")[0];if(o.removeAttribute("xmlns:a"),o.removeAttribute("width"),o.removeAttribute("height"),o.removeAttribute("x"),o.removeAttribute("y"),o.removeAttribute("enable-background"),o.removeAttribute("xmlns:xlink"),o.removeAttribute("xml:space"),o.removeAttribute("version"),Array.prototype.slice.call(n).forEach(function(t){"src"!==t.name&&"alt"!==t.name&&o.setAttribute(t.name,t.value)}),o.classList?o.classList.add("inlined-svg"):o.className+=" inlined-svg",o.setAttribute("role","img"),n.longdesc){var a=document.createElementNS("http://www.w3.org/2000/svg","desc"),r=document.createTextNode(n.longdesc.value);a.appendChild(r),o.insertBefore(a,o.firstChild)}if(n.alt){o.setAttribute("aria-labelledby","title");var l=document.createElementNS("http://www.w3.org/2000/svg","title"),c=document.createTextNode(n.alt.value);l.appendChild(c),o.insertBefore(l,o.firstChild)}t.parentNode.replaceChild(o,t),i(e.svgSelector)}else console.error("There was an error retrieving the source of the SVG.")},s.onerror=function(){console.error("There was an error connecting to the origin server.")},s.send()})};return o.init=function(t,o){i&&(e=n(a,t||{}),s(o||function(){}),document.documentElement.className+=" "+e.initClass)},o}(s),void 0===(n="function"==typeof i?i.apply(e,a):i)||(t.exports=n)}).call(e,o(39))},706:function(t,e,o){"use strict";(function(e){var i=o(698),a=o(737),n={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var r,l={adapter:("undefined"!=typeof XMLHttpRequest?r=o(714):void 0!==e&&(r=o(714)),r),transformRequest:[function(t,e){return a(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(t){l.headers[t]={}}),i.forEach(["post","put","patch"],function(t){l.headers[t]=i.merge(n)}),t.exports=l}).call(e,o(142))},708:function(t,e,o){"use strict";var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),a=r(o(734)),n=r(o(752)),s=r(o(753));function r(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.progress=0,this.isPending=!1,this.errors=new n.default,["post","patch","put","delete"].forEach(function(t){e[t]=function(o,i){return e.submit(t,o,i)}})}return i(t,[{key:"submit",value:function(e,o){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.toLowerCase(),this.hasFiles(a)&&(a=(0,s.default)(a),"post"!==e&&(a.append("_method",e.toUpperCase()),e="post")),this.progress=0,this.errors.clear(),this.isPending=!0,new Promise(function(n,s){t.defaults.axios[e](o,a,i.config()).then(function(t){n(t.data)}).catch(function(t){i.handleError(t),s(t)}).then(function(){return i.isPending=!1})})}},{key:"hasFiles",value:function(t){for(var e in t)if(this.fileIsPresent(t[e]))return!0;return!1}},{key:"fileIsPresent",value:function(t){return t instanceof File||t instanceof Array&&t.some(function(t){return t instanceof File})}},{key:"save",value:function(t,e){var o="post";return e.hasOwnProperty("id")&&(o="patch",t=this.urlToPatchResource(t,e)),this[o](t,e)}},{key:"urlToPatchResource",value:function(t,e){return t.replace(/\/+$/,"")+"/"+e.id}},{key:"config",value:function(){var t=this;return{onUploadProgress:function(e){t.progress=Math.round(100*e.loaded/e.total)}}}},{key:"handleError",value:function(t){if(t.response&&422===t.response.status){var e=t.response.data.hasOwnProperty("errors")?t.response.data.errors:t.response.data;this.errors.set(e)}}}]),t}();l.defaults={axios:a.default},t.exports=l},711:function(t,e,o){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a={methods:{getArrayCustomPricing:function(t){var e=null;if(void 0===t||null===t)e={enabled:!1,durations:{}};else if("object"===(void 0===t?"undefined":i(t))){if(Array.isArray(t.durations))return t;e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(t);var o=[];return Object.keys(e.durations).forEach(function(t){o.push({duration:parseInt(t),price:e.durations[t].price,rules:e.durations[t].rules})}),{enabled:e.enabled,durations:o}},getJsonCustomPricing:function(t){var e={};return t&&t.durations.filter(function(t){return t.duration}).length>0?(t.durations.forEach(function(t){e[t.duration]={price:t.price,rules:t.rules}}),JSON.stringify({enabled:t.enabled,durations:e})):JSON.stringify({enabled:!1,durations:{}})}}}},713:function(t,e,o){"use strict";t.exports=function(t,e){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return t.apply(e,o)}}},714:function(t,e,o){"use strict";var i=o(698),a=o(738),n=o(740),s=o(741),r=o(742),l=o(715),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||o(743);t.exports=function(t){return new Promise(function(e,u){var m=t.data,d=t.headers;i.isFormData(m)&&delete d["Content-Type"];var p=new XMLHttpRequest,h="onreadystatechange",f=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||r(t.url)||(p=new window.XDomainRequest,h="onload",f=!0,p.onprogress=function(){},p.ontimeout=function(){}),t.auth){var v=t.auth.username||"",g=t.auth.password||"";d.Authorization="Basic "+c(v+":"+g)}if(p.open(t.method.toUpperCase(),n(t.url,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p[h]=function(){if(p&&(4===p.readyState||f)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var o="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:o,config:t,request:p};a(e,u,i),p=null}},p.onerror=function(){u(l("Network Error",t,null,p)),p=null},p.ontimeout=function(){u(l("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",p)),p=null},i.isStandardBrowserEnv()){var b=o(744),y=(t.withCredentials||r(t.url))&&t.xsrfCookieName?b.read(t.xsrfCookieName):void 0;y&&(d[t.xsrfHeaderName]=y)}if("setRequestHeader"in p&&i.forEach(d,function(t,e){void 0===m&&"content-type"===e.toLowerCase()?delete d[e]:p.setRequestHeader(e,t)}),t.withCredentials&&(p.withCredentials=!0),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){p&&(p.abort(),u(t),p=null)}),void 0===m&&(m=null),p.send(m)})}},715:function(t,e,o){"use strict";var i=o(739);t.exports=function(t,e,o,a,n){var s=new Error(t);return i(s,e,o,a,n)}},716:function(t,e,o){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},717:function(t,e,o){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},718:function(t,e,o){"use strict";e.a={data:function(){return{}},methods:{checkTranslations:function(t,e){var o=""!==e?JSON.parse(t.translations)[e]:JSON.parse(t.translations);if(window.localeLanguage[0]in o)return o[window.localeLanguage[0]];for(var i=Object.keys(o),a=Object.keys(o).map(function(t){return t.length>2?t.slice(0,2):t}),n=window.localeLanguage[0].length>2?window.localeLanguage[0].slice(0,2):window.localeLanguage[0],s="",r=0;r<a.length;r++)if(a[r]===n){s=o[i[r]];break}return s},getTranslated:function(t,e){return t.translations&&JSON.parse(t.translations)[e]&&this.checkTranslations(t,e)?this.checkTranslations(t,e):t[e]},getNameTranslated:function(t){return t.translations&&JSON.parse(t.translations).name&&this.checkTranslations(t,"name")?this.checkTranslations(t,"name"):t.name},getTicketTranslated:function(t){return t.translations&&this.checkTranslations(t,"")?this.checkTranslations(t,""):t.name},getCfLabelTranslated:function(t){return t.translations&&this.checkTranslations(t,"name")?this.checkTranslations(t,"name"):t.label},getCfOptionTranslated:function(t){return t.translations&&this.checkTranslations(t,"")?this.checkTranslations(t,""):t.label},getDescriptionTranslated:function(t){return t.translations&&JSON.parse(t.translations).description&&this.checkTranslations(t,"description")?this.checkTranslations(t,"description"):t.description},translateEntities:function(t){var e=this;t.services&&t.services.length&&t.services.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t),t.extras.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t)})}),t.locations&&t.locations.length&&t.locations.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t)}),t.packages&&t.packages.length&&t.packages.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t),t.bookable.forEach(function(t){t.service.name=e.getNameTranslated(t.service),t.service.description=e.getDescriptionTranslated(t.service),"extras"in t.service&&t.service.extras.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t)})})}),t.categories&&t.categories.length&&t.categories.forEach(function(t){t.name=e.getNameTranslated(t),t.serviceList.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t),t.extras.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t)})})}),t.events&&t.events.length&&t.events.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t),t.extras.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t)})}),t.customFields&&t.customFields.length&&t.customFields.forEach(function(t){t.label=e.getCfLabelTranslated(t),t.options.forEach(function(t){t.label=e.getCfOptionTranslated(t)})}),t.employees&&t.employees.length&&t.employees.forEach(function(t){t.firstName=e.getTranslated(t,"firstName"),t.lastName=e.getTranslated(t,"lastName"),t.serviceList.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t),t.extras.forEach(function(t){t.name=e.getNameTranslated(t),t.description=e.getDescriptionTranslated(t)})})})}},computed:{}}},719:function(t,e,o){var i=o(335)(o(761),o(762),!1,null,null,null);t.exports=i.exports},722:function(t,e,o){"use strict";e.a={data:function(){return{}},methods:{getPaymentType:function(t){return t.gateway&&"onSite"!==t.gateway?"partiallyPaid"===t.status?"deposit":"online":"onsite"},getPaymentData:function(t,e,o,i){var a={};if(a.paymentId=t,e){a.bookableType="appointment",a.bookings=e.bookings,a.bookingStart=e.bookingStart,a.bookableName=this.getServiceById(e.serviceId).name,a.bookable=this.getServiceById(e.serviceId);var n=this.getProviderById(e.providerId);n.fullName=n.firstName+" "+n.lastName,a.providers=[n],e.bookings.forEach(function(e){e.payments.forEach(function(o){o.id===t&&(a.customer=e.customer)})})}return o&&(a.bookableType="event",a.bookings=o.bookings,a.bookingStart=o.periods[0].periodStart,a.bookableName=o.name,a.providers=o.providers,a.bookable=o,o.bookings.forEach(function(e){e.payments.forEach(function(o){o.id===t&&(a.customer=e.customer)})})),i&&(a.bookableType="package",a.bookings=[],a.bookingStart=null,a.bookableName=i.name,a.providers=[],a.bookable=i,a.bookings=[]),a},getPaymentStatusNiceName:function(t){switch(t){case"paid":return this.$root.labels.paid;case"pending":return this.$root.labels.pending;case"partiallyPaid":return this.$root.labels.partially_paid}},getPaymentGatewayNiceName:function(t){return"onSite"===t.gateway?this.$root.labels.on_site:"wc"===t.gateway?t.gatewayTitle:t.gateway?t.gateway.charAt(0).toUpperCase()+t.gateway.slice(1):void 0},getPaymentIconWidth:function(t){return"razorpay"===t?"76px":"mollie"===t?"38px":"16px"}}}},724:function(t,e,o){"use strict";e.a={data:function(){return{timeZone:"",statusesCabinet:[{value:"approved",label:this.$root.labels.approved},{value:"pending",label:this.$root.labels.pending},{value:"canceled",label:this.$root.labels.canceled},{value:"rejected",label:this.$root.labels.rejected}]}},methods:{isPanelActive:function(t){return!this.$root.shortcodeData.cabinet||!(this.$root.shortcodeData.cabinet.appointments||this.$root.shortcodeData.cabinet.events||this.$root.shortcodeData.cabinet.profile)||(!("appointments"!==t||!this.$root.shortcodeData.cabinet||!this.$root.shortcodeData.cabinet.appointments)||(!("events"!==t||!this.$root.shortcodeData.cabinet||!this.$root.shortcodeData.cabinet.events)||"profile"===t&&this.$root.shortcodeData.cabinet&&this.$root.shortcodeData.cabinet.profile))},changeRange:function(t){this.$store.commit("cabinet/setParams",{dates:t}),this.setDatePickerSelectedDaysCount(this.$store.state.cabinet.params.dates.start,this.$store.state.cabinet.params.dates.end),this.$emit("refreshReservations")},isBookingCancelable:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.cancelable&&!("canceled"===t.bookings[e].status||"rejected"===t.bookings[e].status)},isBookingReschedulable:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.reschedulable&&!("canceled"===t.bookings[e].status||"rejected"===t.bookings[e].status)},disableAuthorizationHeader:function(){return"ameliaBooking"in window&&"cabinet"in window.ameliaBooking&&"disableAuthorizationHeader"in window.ameliaBooking.cabinet&&window.ameliaBooking.cabinet.disableAuthorizationHeader},getAuthorizationHeaderObject:function(){return this.$store.state.cabinet.ameliaToken&&!this.disableAuthorizationHeader()?{headers:{Authorization:"Bearer "+this.$store.state.cabinet.ameliaToken}}:{}}}}},726:function(t,e,o){var i=o(335)(o(728),o(729),!1,null,null,null);t.exports=i.exports},728:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(338);e.default={mixins:[i.a],props:["oldCustomize","appointmentsApproved","appointmentsPending","employeesTotal","customersTotal","locationsTotal","packagesTotal","servicesTotal","categoriesTotal","financeTotal","addNewCouponBtnDisplay","addNewCustomFieldBtnDisplay","locations","categories","bookableType","params","fetched"],methods:{showMainCustomize:function(){this.$emit("showMainCustomize",null)},showDialogCustomer:function(){this.$emit("newCustomerBtnClicked",null)},showDialogAppointment:function(){this.$emit("newAppointmentBtnClicked",null)},showDialogEvent:function(){this.$emit("newEventBtnClicked",null)},showDialogEmployee:function(){this.$emit("newEmployeeBtnClicked")},showDialogLocation:function(){this.$emit("newLocationBtnClicked")},showDialogService:function(){this.$emit("newServiceBtnClicked")},showDialogPackage:function(){this.$emit("newPackageBtnClicked")},showDialogPackageBooking:function(){this.$emit("newPackageBookingBtnClicked")},showDialogCoupon:function(){this.$emit("newCouponBtnClicked")},showDialogCustomFields:function(){this.$emit("newCustomFieldBtnClicked")},selectAllInCategory:function(t){this.$emit("selectAllInCategory",t)},changeFilter:function(){this.$emit("changeFilter")}}}},729:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"am-page-header am-section"},[o("el-row",{attrs:{type:"wpamelia-calendar"===t.$router.currentRoute.name?"":"flex",align:"middle"}},[o("el-col",{attrs:{span:"wpamelia-calendar"===t.$router.currentRoute.name?6:18}},[o("div",{staticClass:"am-logo"},[o("img",{staticClass:"logo-big",attrs:{width:"92",src:t.$root.getUrl+"public/img/amelia-logo-horizontal.svg"}}),t._v(" "),o("img",{staticClass:"logo-small",attrs:{width:"28",src:t.$root.getUrl+"public/img/amelia-logo-symbol.svg"}})]),t._v(" "),o("h1",{staticClass:"am-page-title"},[t._v("\n        "+t._s("packages"!==t.bookableType?t.$router.currentRoute.meta.title:t.$root.labels.packages)+"\n\n        "),t._v(" "),t.appointmentsApproved>=0?o("span",{staticClass:"am-appointments-number approved"},[t._v("\n          "+t._s(t.appointmentsApproved)+"\n        ")]):t._e(),t._v(" "),t.appointmentsPending>=0?o("span",{staticClass:"am-appointments-number pending"},[t._v("\n          "+t._s(t.appointmentsPending)+"\n        ")]):t._e(),t._v(" "),t.employeesTotal>=0&&!0===t.$root.settings.capabilities.canReadOthers?o("span",[o("span",{staticClass:"total-number"},[t._v(t._s(t.employeesTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e(),t._v(" "),t.customersTotal>=0?o("span",[o("span",{staticClass:"total-number"},[t._v(t._s(t.customersTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e(),t._v(" "),t.locationsTotal>=0?o("span",[o("span",{staticClass:"total-number"},[t._v(t._s(t.locationsTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e(),t._v(" "),t.servicesTotal>=0&&"services"===t.bookableType?o("span",[o("span",{staticClass:"total-number"},[t._v(t._s(t.servicesTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e(),t._v(" "),t.packagesTotal>=0&&"packages"===t.bookableType?o("span",[o("span",{staticClass:"total-number"},[t._v(t._s(t.packagesTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e(),t._v(" "),t.financeTotal>=0?o("span",[o("span",{staticClass:"total-number"},[t._v(t._s(t.financeTotal))]),t._v(" "+t._s(t.$root.labels.total)+"\n        ")]):t._e()])]),t._v(" "),o("el-col",{staticClass:"align-right v-calendar-column",attrs:{span:"wpamelia-calendar"===t.$router.currentRoute.name?18:6}},["wpamelia-appointments"===t.$router.currentRoute.name&&(!0===t.$root.settings.capabilities.canWriteOthers||"provider"===this.$root.settings.role&&this.$root.settings.roles.allowWriteAppointments)?o("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogAppointment}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),o("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.new_appointment))])]):t._e(),t._v(" "),"wpamelia-events"===t.$router.currentRoute.name&&(!0===t.$root.settings.capabilities.canWriteOthers||"provider"===this.$root.settings.role&&this.$root.settings.roles.allowWriteEvents)?o("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogEvent}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),o("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.new_event))])]):t._e(),t._v(" "),t.$root.isLite||"wpamelia-employees"!==t.$router.currentRoute.name||!0!==t.$root.settings.capabilities.canWrite||!0!==t.$root.settings.capabilities.canWriteOthers?t._e():o("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogEmployee}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),o("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.add_employee))])]),t._v(" "),"wpamelia-customers"===t.$router.currentRoute.name&&!0===t.$root.settings.capabilities.canWrite?o("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogCustomer}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),o("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.add_customer))])]):t._e(),t._v(" "),o("el-popover",t._b({ref:"addLocationPop",attrs:{disabled:!t.$root.isLite}},"el-popover",t.$root.popLiteProps,!1),[o("PopLite")],1),t._v(" "),o("div",{directives:[{name:"popover",rawName:"v-popover:addLocationPop",arg:"addLocationPop"}]},["wpamelia-locations"===t.$router.currentRoute.name&&!0===t.$root.settings.capabilities.canWrite?o("el-button",{class:{"am-dialog-create":!0,"am-lite-disabled":t.$root.isLite},attrs:{type:"primary",disabled:t.$root.isLite},on:{click:t.showDialogLocation}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),o("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.add_location))])]):t._e()],1),t._v(" "),"wpamelia-services"===t.$router.currentRoute.name&&t.categoriesTotal>0&&!0===t.$root.settings.capabilities.canWrite&&"services"===t.bookableType?o("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogService}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),o("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.add_service))])]):t._e(),t._v(" "),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"popover",rawName:"v-popover:addPackagePop",arg:"addPackagePop"}]},[o("el-popover",t._b({ref:"addPackagePop",attrs:{disabled:!t.$root.isLite}},"el-popover",t.$root.popLiteProps,!1),[o("PopLite")],1),t._v(" "),"wpamelia-services"===t.$router.currentRoute.name&&t.packagesTotal>=0&&!0===t.$root.settings.capabilities.canWrite&&"packages"===t.bookableType?o("el-button",{class:{"am-dialog-create":!0,"am-lite-disabled":t.$root.isLite},attrs:{type:"primary"},on:{click:t.showDialogPackage}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),o("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.add_package))])]):t._e()],1)]),t._v(" "),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"popover",rawName:"v-popover:addCouponPop",arg:"addCouponPop"}]},[o("el-popover",t._b({ref:"addCouponPop",attrs:{disabled:!t.$root.isLite}},"el-popover",t.$root.popLiteProps,!1),[o("PopLite")],1),t._v(" "),"wpamelia-finance"===t.$router.currentRoute.name&&t.addNewCouponBtnDisplay&&!0===t.$root.settings.capabilities.canWrite?o("el-button",{class:{"am-dialog-create":!0,"am-lite-disabled":t.$root.isLite},attrs:{type:"primary"},on:{click:t.showDialogCoupon}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),o("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.new_coupon))])]):t._e()],1)]),t._v(" "),o("transition",{attrs:{name:"fade"}},["wpamelia-cf"===t.$router.currentRoute.name&&t.addNewCustomFieldBtnDisplay?o("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogCustomFields}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),o("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.add_custom_field))])]):t._e()],1),t._v(" "),"wpamelia-dashboard"===t.$router.currentRoute.name?o("div",{staticClass:"v-calendar-column"},[o("div",{staticClass:"el-form-item__content"},[o("v-date-picker",{attrs:{mode:"range","popover-visibility":"focus","popover-direction":"bottom","popover-align":"right","tint-color":"#1A84EE","show-day-popover":!1,"input-props":{class:"el-input__inner"},"is-expanded":!1,"is-required":!0,"input-class":"el-input__inner",formats:t.vCalendarFormats,"is-double-paned":!0},on:{input:t.changeFilter},model:{value:t.params.dates,callback:function(e){t.$set(t.params,"dates",e)},expression:"params.dates"}})],1)]):t._e(),t._v(" "),"wpamelia-calendar"===t.$router.currentRoute.name?o("div",{staticClass:"am-calendar-header-filters"},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:t.$root.labels.services+":"}},[o("el-select",{attrs:{multiple:"",filterable:"","collapse-tags":"",loading:!t.fetched,placeholder:t.$root.labels.all_services},on:{change:t.changeFilter},model:{value:t.params.services,callback:function(e){t.$set(t.params,"services",e)},expression:"params.services"}},t._l(t.categories,function(e){return o("div",{key:e.id},[o("div",{staticClass:"am-drop-parent",on:{click:function(o){return t.selectAllInCategory(e.id)}}},[o("span",[t._v(t._s(e.name))])]),t._v(" "),t._l(e.serviceList,function(t){return o("el-option",{key:t.id,staticClass:"am-drop-child",attrs:{label:t.name,value:t.id}})})],2)}),0)],1),t._v(" "),o("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.locations.length,expression:"locations.length"}],attrs:{label:t.$root.labels.locations+":"}},[o("el-select",{attrs:{multiple:"",clearable:"","collapse-tags":"",placeholder:t.$root.labels.all_locations,loading:!t.fetched},on:{change:t.changeFilter},model:{value:t.params.locations,callback:function(e){t.$set(t.params,"locations",e)},expression:"params.locations"}},t._l(t.locations,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),"wpamelia-calendar"===t.$router.currentRoute.name&&("admin"===t.$root.settings.role||"manager"===t.$root.settings.role||"provider"===t.$root.settings.role&&t.$root.settings.roles.allowWriteAppointments)?o("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showDialogAppointment}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),o("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.new_appointment))])]):t._e()],1):t._e(),t._v(" "),t.oldCustomize&&"wpamelia-customize"===t.$router.currentRoute.name?o("div",{staticClass:"am-calendar-header-filters"},[o("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:t.showMainCustomize}},[o("span",{staticClass:"button-text"},[t._v(t._s(t.$root.labels.go_back))])])],1):t._e()],1)],1)],1)},staticRenderFns:[]}},730:function(t,e,o){"use strict";e.a={data:function(){return{}},methods:{updateStashEntities:function(t){this.$root.settings.activation.stash&&this.$http.post(this.$root.getAjaxUrl+"/stash",t).then(function(t){})}}}},733:function(t,e,o){"use strict";e.a={data:function(){return{searchCounter:0,loadingCustomers:!1,searchCustomersTimer:null,searchedCustomers:[],dialogCustomer:!1}},methods:{getInitCustomerObject:function(){return{id:0,firstName:"",lastName:"",externalId:"",phone:"",countryPhoneIso:null,email:"",gender:"",birthday:null,note:"",status:"visible",type:"customer",countPendingAppointments:0}},setInitialCustomers:function(){var t=this;"customer"!==this.$root.settings.role&&this.searchCustomers("",function(){var e=t.options.entities.customers.map(function(t){return parseInt(t.id)}),o=t.options.entities.customers;t.searchedCustomers.forEach(function(t){-1===e.indexOf(parseInt(t.id))&&(e.push(t.id),o.push(t))}),t.options.entities.customers=Object.values(o.sort(function(t,e){return t.firstName.toLowerCase()>e.firstName.toLowerCase()?1:-1}))})},searchCustomers:function(t,e){var o=this;clearTimeout(this.searchCustomersTimer),this.loadingCustomers=!0,this.searchCounter++,this.searchCustomersTimer=setTimeout(function(){var i=o.searchCounter;o.$http.get(o.$root.getAjaxUrl+"/users/customers",{params:{search:t,page:1,limit:o.$root.settings.general.customersFilterLimit,skipCount:1}}).then(function(t){i>=o.searchCounter&&(o.searchedCustomers=t.data.data.users.sort(function(t,e){return t.firstName.toLowerCase()>e.firstName.toLowerCase()?1:-1})),o.loadingCustomers=!1,e()}).catch(function(t){o.loadingCustomers=!1})},500)}}}},734:function(t,e,o){t.exports=o(735)},735:function(t,e,o){"use strict";var i=o(698),a=o(713),n=o(736),s=o(706);function r(t){var e=new n(t),o=a(n.prototype.request,e);return i.extend(o,n.prototype,e),i.extend(o,e),o}var l=r(s);l.Axios=n,l.create=function(t){return r(i.merge(s,t))},l.Cancel=o(717),l.CancelToken=o(750),l.isCancel=o(716),l.all=function(t){return Promise.all(t)},l.spread=o(751),t.exports=l,t.exports.default=l},736:function(t,e,o){"use strict";var i=o(706),a=o(698),n=o(745),s=o(746),r=o(748),l=o(749);function c(t){this.defaults=t,this.interceptors={request:new n,response:new n}}c.prototype.request=function(t){"string"==typeof t&&(t=a.merge({url:arguments[0]},arguments[1])),(t=a.merge(i,this.defaults,{method:"get"},t)).method=t.method.toLowerCase(),t.baseURL&&!r(t.url)&&(t.url=l(t.baseURL,t.url));var e=[s,void 0],o=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)o=o.then(e.shift(),e.shift());return o},a.forEach(["delete","get","head","options"],function(t){c.prototype[t]=function(e,o){return this.request(a.merge(o||{},{method:t,url:e}))}}),a.forEach(["post","put","patch"],function(t){c.prototype[t]=function(e,o,i){return this.request(a.merge(i||{},{method:t,url:e,data:o}))}}),t.exports=c},737:function(t,e,o){"use strict";var i=o(698);t.exports=function(t,e){i.forEach(t,function(o,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=o,delete t[i])})}},738:function(t,e,o){"use strict";var i=o(715);t.exports=function(t,e,o){var a=o.config.validateStatus;o.status&&a&&!a(o.status)?e(i("Request failed with status code "+o.status,o.config,null,o.request,o)):t(o)}},739:function(t,e,o){"use strict";t.exports=function(t,e,o,i,a){return t.config=e,o&&(t.code=o),t.request=i,t.response=a,t}},740:function(t,e,o){"use strict";var i=o(698);function a(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,o){if(!e)return t;var n;if(o)n=o(e);else if(i.isURLSearchParams(e))n=e.toString();else{var s=[];i.forEach(e,function(t,e){null!==t&&void 0!==t&&(i.isArray(t)&&(e+="[]"),i.isArray(t)||(t=[t]),i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),s.push(a(e)+"="+a(t))}))}),n=s.join("&")}return n&&(t+=(-1===t.indexOf("?")?"?":"&")+n),t}},741:function(t,e,o){"use strict";var i=o(698);t.exports=function(t){var e,o,a,n={};return t?(i.forEach(t.split("\n"),function(t){a=t.indexOf(":"),e=i.trim(t.substr(0,a)).toLowerCase(),o=i.trim(t.substr(a+1)),e&&(n[e]=n[e]?n[e]+", "+o:o)}),n):n}},742:function(t,e,o){"use strict";var i=o(698);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");function a(t){var i=t;return e&&(o.setAttribute("href",i),i=o.href),o.setAttribute("href",i),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}return t=a(window.location.href),function(e){var o=i.isString(e)?a(e):e;return o.protocol===t.protocol&&o.host===t.host}}():function(){return!0}},743:function(t,e,o){"use strict";var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function a(){this.message="String contains an invalid character"}a.prototype=new Error,a.prototype.code=5,a.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,o,n=String(t),s="",r=0,l=i;n.charAt(0|r)||(l="=",r%1);s+=l.charAt(63&e>>8-r%1*8)){if((o=n.charCodeAt(r+=.75))>255)throw new a;e=e<<8|o}return s}},744:function(t,e,o){"use strict";var i=o(698);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,o,a,n,s){var r=[];r.push(t+"="+encodeURIComponent(e)),i.isNumber(o)&&r.push("expires="+new Date(o).toGMTString()),i.isString(a)&&r.push("path="+a),i.isString(n)&&r.push("domain="+n),!0===s&&r.push("secure"),document.cookie=r.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},745:function(t,e,o){"use strict";var i=o(698);function a(){this.handlers=[]}a.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},a.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},a.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=a},746:function(t,e,o){"use strict";var i=o(698),a=o(747),n=o(716),s=o(706);function r(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return r(t),t.headers=t.headers||{},t.data=a(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return r(t),e.data=a(e.data,e.headers,t.transformResponse),e},function(e){return n(e)||(r(t),e&&e.response&&(e.response.data=a(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},747:function(t,e,o){"use strict";var i=o(698);t.exports=function(t,e,o){return i.forEach(o,function(o){t=o(t,e)}),t}},748:function(t,e,o){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},749:function(t,e,o){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},750:function(t,e,o){"use strict";var i=o(717);function a(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var o=this;t(function(t){o.reason||(o.reason=new i(t),e(o.reason))})}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var t;return{token:new a(function(e){t=e}),cancel:t}},t.exports=a},751:function(t,e,o){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},752:function(t,e,o){"use strict";var i,a=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),n=o(12),s=(i=n)&&i.__esModule?i:{default:i};t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}}return a(t,[{key:"set",value:function(t){this.errors=t}},{key:"has",value:function(t){return this.errors.hasOwnProperty(t)}},{key:"get",value:function(t){if(this.has(t))return this.errors[t][0]}},{key:"getAll",value:function(t){if(this.has(t))return this.errors[t]}},{key:"clear",value:function(t){t?s.default.delete(this.errors,t):this.errors={}}},{key:"any",value:function(){return Object.keys(this.errors).length>0}}]),t}()},753:function(t,e,o){"use strict";function i(t){return void 0===t}function a(t){return Array.isArray(t)}function n(t){return t&&"number"==typeof t.size&&"string"==typeof t.type&&"function"==typeof t.slice}t.exports=function t(e,o,s,r){if(o instanceof FormData&&(r=s,s=o,o=null),(o=o||{}).indices=!i(o.indices)&&o.indices,o.nulls=!!i(o.nulls)||o.nulls,s=s||new FormData,i(e))return s;if(function(t){return null===t}(e))o.nulls&&s.append(r,"");else if(a(e))if(e.length)e.forEach(function(e,i){var a=r+"["+(o.indices?i:"")+"]";t(e,o,s,a)});else{var l=r+"[]";s.append(l,"")}else!function(t){return t instanceof Date}(e)?!function(t){return t===Object(t)}(e)||function(t){return n(t)&&("object"==typeof t.lastModifiedDate||"number"==typeof t.lastModified)&&"string"==typeof t.name}(e)||n(e)?s.append(r,e):Object.keys(e).forEach(function(i){var n=e[i];if(a(n))for(;i.length>2&&i.lastIndexOf("[]")===i.length-2;)i=i.substring(0,i.length-2);t(n,o,s,r?r+"["+i+"]":i)}):s.append(r,e.toISOString());return s}},754:function(t,e,o){var i;i=function(){return function(t){function e(i){if(o[i])return o[i].exports;var a=o[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var o={};return e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=".",e(e.s=9)}([function(t,e,o){"use strict";e.a={prefix:"",suffix:"",thousands:",",decimal:".",precision:2}},function(t,e,o){"use strict";var i=o(2),a=o(5),n=o(0);e.a=function(t,e){if(e.value){var s=o.i(a.a)(n.a,e.value);if("INPUT"!==t.tagName.toLocaleUpperCase()){var r=t.getElementsByTagName("input");1!==r.length||(t=r[0])}t.oninput=function(){var e=t.value.length-t.selectionEnd;t.value=o.i(i.a)(t.value,s),e=Math.max(e,s.suffix.length),e=t.value.length-e,e=Math.max(e,s.prefix.length+1),o.i(i.b)(t,e),t.dispatchEvent(o.i(i.c)("change"))},t.onfocus=function(){o.i(i.b)(t,t.value.length-s.suffix.length)},t.oninput(),t.dispatchEvent(o.i(i.c)("input"))}}},function(t,e,o){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.a;"number"==typeof t&&(t=t.toFixed(s(e.precision)));var o=t.indexOf("-")>=0?"-":"",i=l(r(n(t),e.precision)).split("."),a=i[0],c=i[1];return a=function(t,e){return t.replace(/(\d)(?=(?:\d{3})+\b)/gm,"$1"+e)}(a,e.thousands),e.prefix+o+function(t,e,o){return e?t+o+e:t}(a,c,e.decimal)+e.suffix}function a(t,e){var o=t.indexOf("-")>=0?-1:1,i=r(n(t),e);return parseFloat(i)*o}function n(t){return l(t).replace(/\D+/g,"")||"0"}function s(t){return function(t,e,o){return Math.max(t,Math.min(e,o))}(0,t,20)}function r(t,e){var o=Math.pow(10,e);return(parseFloat(t)/o).toFixed(s(e))}function l(t){return t?t.toString():""}function c(t,e){var o=function(){t.setSelectionRange(e,e)};t===document.activeElement&&(o(),setTimeout(o,1))}function u(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}var m=o(0);o.d(e,"a",function(){return i}),o.d(e,"d",function(){return a}),o.d(e,"b",function(){return c}),o.d(e,"c",function(){return u})},function(t,e,o){"use strict";function i(t,e){e&&Object.keys(e).map(function(t){r.a[t]=e[t]}),t.directive("money",s.a),t.component("money",n.a)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(6),n=o.n(a),s=o(1),r=o(0);o.d(e,"Money",function(){return n.a}),o.d(e,"VMoney",function(){return s.a}),o.d(e,"options",function(){return r.a}),o.d(e,"VERSION",function(){return l});var l="0.8.1";e.default=i,"undefined"!=typeof window&&window.Vue&&window.Vue.use(i)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),a=o(0),n=o(2);e.default={name:"Money",props:{value:{required:!0,type:[Number,String],default:0},masked:{type:Boolean,default:!1},precision:{type:Number,default:function(){return a.a.precision}},decimal:{type:String,default:function(){return a.a.decimal}},thousands:{type:String,default:function(){return a.a.thousands}},prefix:{type:String,default:function(){return a.a.prefix}},suffix:{type:String,default:function(){return a.a.suffix}}},directives:{money:i.a},data:function(){return{formattedValue:""}},watch:{value:{immediate:!0,handler:function(t,e){var i=o.i(n.a)(t,this.$props);i!==this.formattedValue&&(this.formattedValue=i)}}},methods:{change:function(t){this.$emit("input",this.masked?t.target.value:o.i(n.d)(t.target.value,this.precision))}}}},function(t,e,o){"use strict";e.a=function(t,e){return t=t||{},e=e||{},Object.keys(t).concat(Object.keys(e)).reduce(function(o,i){return o[i]=void 0===e[i]?t[i]:e[i],o},{})}},function(t,e,o){var i=o(7)(o(4),o(8),null,null);t.exports=i.exports},function(t,e){t.exports=function(t,e,o,i){var a,n=t=t||{},s=typeof t.default;"object"!==s&&"function"!==s||(a=t,n=t.default);var r="function"==typeof n?n.options:n;if(e&&(r.render=e.render,r.staticRenderFns=e.staticRenderFns),o&&(r._scopeId=o),i){var l=r.computed||(r.computed={});Object.keys(i).forEach(function(t){var e=i[t];l[t]=function(){return e}})}return{esModule:a,exports:n,options:r}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"money",rawName:"v-money",value:{precision:t.precision,decimal:t.decimal,thousands:t.thousands,prefix:t.prefix,suffix:t.suffix},expression:"{precision, decimal, thousands, prefix, suffix}"}],staticClass:"v-money",attrs:{type:"tel"},domProps:{value:t.formattedValue},on:{change:t.change}})},staticRenderFns:[]}},function(t,e,o){t.exports=o(3)}])},t.exports=i()},761:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(708),a=o.n(i),n=o(700),s=o(338),r=o(724),l=o(730);e.default={mixins:[n.a,s.a,r.a,l.a],props:{formName:"",urlName:null,isNew:null,entity:null,getParsedEntity:null,updateStash:!1,haveSaveConfirmation:null,hasApplyGloballyVisibility:!1,hasApplyGloballyDeletion:!1,loadSaveButton:!1,calendarConflict:{enable:!1},getCalendarEvents:null,hasIcons:!0,status:null,buttonType:{status:"primary",remove:"danger"},action:{haveAdd:!1,haveEdit:!1,haveStatus:!1,haveRemove:!1,haveRemoveEffect:!1,ignoreDeleteEffect:!1,haveDuplicate:!1,haveSaveWarning:!1},message:{success:{save:null,remove:null,show:null,hide:null},confirm:{remove:null,show:null,hide:null,duplicate:null,save:null}},buttonText:null},data:function(){return{form:new a.a,allowedDelete:!0,showDeleteConfirmation:!1,showVisibilityConfirmation:!1,showDuplicateConfirmation:!1,showSaveConfirmation:!1,showAddHoursDialog:!1,confirmCalendarConflict:!1,deleteEffectMessage:null,dialogLoading:!1}},created:function(){a.a.defaults.axios=this.$http},methods:{getButtonType:function(t){switch(t){case"status":return this.hasIcons?null:this.buttonType.status;case"remove":return this.hasIcons?null:this.buttonType.remove;case"duplicate":return this.hasIcons?null:this.buttonType.duplicate}},closeDialog:function(){this.$parent.$emit("closeDialog")},onSubmit:function(t){var e=this,o=this.$root;this.$parent.$refs[this.formName].validate(function(i,a){if(!i)return"appointment"===e.formName&&e.handleDialogTabChange(a,"bookings."),"service"===e.formName&&e.handleDialogTabChange(a,"duration"),e.$emit("validationFailCallback"),!1;e.calendarConflict&&e.calendarConflict.enabled?(e.handleSaveConfirmation(),t&&(e.$emit("confirmCalendarConflict"),e.confirmCalendarConflict=!0,e.handleSaveClick(t))):(e.dialogLoading=!0,e.isNew?e.addEntity(t):e.editEntity(t)),e.$root=o})},onSuccess:function(t,e,o){var i=this;this.$parent.$emit("saveCallback",o),setTimeout(function(){i.dialogLoading=!1,i.$parent.$emit("closeDialog")},300),this.notify(t,e,"success")},onError:function(t,e){this.dialogLoading=!1,this.$emit("errorCallback",e)},addEntity:function(t){var e=this,o=null;void 0!==this.$store&&void 0!==this.$store.state.cabinet&&"provider"===this.$store.state.cabinet.cabinetType&&(o=Object.assign(this.getAuthorizationHeaderObject(),{params:{source:"cabinet-"+this.$store.state.cabinet.cabinetType}})),this.$http.post(this.$root.getAjaxUrl+"/"+this.urlName,this.getParsedEntity(t),o).then(function(t){e.onSuccess(e.$root.labels.success,e.message.success.save,t.data.data),e.updateStash&&e.updateStashEntities({})}).catch(function(t){t.response&&e.onError("",t.response.data.data)})},editEntity:function(t){var e=this,o=null;void 0!==this.$store&&void 0!==this.$store.state.cabinet&&"provider"===this.$store.state.cabinet.cabinetType&&(o=Object.assign(this.getAuthorizationHeaderObject(),{params:{source:"cabinet-"+this.$store.state.cabinet.cabinetType}})),this.$http.post(this.$root.getAjaxUrl+"/"+this.urlName+"/"+this.entity.id,this.getParsedEntity(t),o).then(function(t){e.onSuccess(e.$root.labels.success,e.message.success.save,t.data.data),e.updateStash&&e.updateStashEntities({})}).catch(function(t){t.response&&e.onError("",t.response.data.data)})},deleteEntity:function(t){var e=this;this.dialogLoading=!0,this.form.post(this.$root.getAjaxUrl+"/"+this.urlName+"/delete/"+this.entity.id,{status:this.status.on,applyGlobally:t}).then(function(t){e.onSuccess(e.$root.labels.success,e.message.success.remove,t.data.data),e.updateStash&&e.updateStashEntities({})}).catch(function(t){t.response&&e.onError("",t.response.data.data.message)})},showEntity:function(t){var e=this;this.dialogLoading=!0,this.form.post(this.$root.getAjaxUrl+"/"+this.urlName+"/status/"+this.entity.id,{status:this.status.on,applyGlobally:t}).then(function(t){e.onSuccess(e.$root.labels.success,e.message.success.show,null),e.updateStash&&e.updateStashEntities({})}).catch(function(t){t.response&&e.onError("",t.response.data.data.message)})},hideEntity:function(t){var e=this;this.dialogLoading=!0,this.form.post(this.$root.getAjaxUrl+"/"+this.urlName+"/status/"+this.entity.id,{status:this.status.off,applyGlobally:t}).then(function(){e.onSuccess(e.$root.labels.success,e.message.success.hide,null),e.updateStash&&e.updateStashEntities({})}).catch(function(t){t.response&&e.onError("",t.response.data.data.message)})},duplicateEntity:function(){var t=this;this.dialogLoading=!0,this.$parent.$emit("closeDialog",!0),this.$parent.$emit("duplicateCallback",this.entity),setTimeout(function(){t.showDuplicateConfirmation=!1,t.dialogLoading=!1},600)},handleSaveConfirmation:function(){this.showSaveConfirmation=!this.showSaveConfirmation,this.showVisibilityConfirmation=!1,this.showDeleteConfirmation=!1,this.showDuplicateConfirmation=!1},handleDuplicateConfirmation:function(){this.showDuplicateConfirmation=!this.showDuplicateConfirmation,this.showSaveConfirmation=!1,this.showDeleteConfirmation=!1,this.showVisibilityConfirmation=!1},handleVisibilityConfirmation:function(){this.showVisibilityConfirmation=!this.showVisibilityConfirmation,this.showSaveConfirmation=!1,this.showDeleteConfirmation=!1,this.showDuplicateConfirmation=!1},handleDeleteConfirmation:function(){var t=this;this.showVisibilityConfirmation=!1,this.showDuplicateConfirmation=!1,this.showSaveConfirmation=!1,this.action.haveRemoveEffect?!1===this.showDeleteConfirmation&&this.$http.get(this.$root.getAjaxUrl+"/"+this.urlName+"/effect/"+this.entity.id).then(function(e){t.allowedDelete=e.data.data.valid||t.ignoreDeleteEffect,t.deleteEffectMessage=e.data.data.message,t.showDeleteConfirmation=!t.showDeleteConfirmation}).catch(function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation,t.deleteEffectMessage=""}):this.showDeleteConfirmation=!this.showDeleteConfirmation},handleSaveClick:function(){var t=this;this.getCalendarEvents&&!this.confirmCalendarConflict?this.getCalendarEvents().then(function(){t.haveSaveConfirmation&&t.haveSaveConfirmation()?t.handleSaveConfirmation():t.onSubmit(!1)}):this.haveSaveConfirmation&&this.haveSaveConfirmation()?this.handleSaveConfirmation():this.onSubmit(!1)},getConfirmSaveButtonText:function(){return null!==this.buttonText&&this.buttonText.confirm&&this.buttonText.confirm.save?{yes:this.buttonText.confirm.save.yes,no:this.buttonText.confirm.save.no}:{yes:this.$root.labels.yes,no:this.$root.labels.no}},getConfirmDeleteButtonText:function(){return null!==this.buttonText&&this.buttonText.confirm&&this.buttonText.confirm.remove?{yes:this.buttonText.confirm.remove.yes,no:this.buttonText.confirm.remove.no}:{yes:this.$root.labels.yes,no:this.$root.labels.no}},getConfirmStatusButtonText:function(){return null!==this.buttonText&&this.buttonText.confirm&&this.buttonText.confirm.status?{yes:this.buttonText.confirm.status.yes,no:this.buttonText.confirm.status.no}:{yes:this.$root.labels.yes,no:this.$root.labels.no}},getActionStatusButtonText:function(){return null!==this.buttonText&&this.buttonText.action?this.buttonText.action.status:""},getActionRemoveButtonText:function(){return null!==this.buttonText&&this.buttonText.action?this.buttonText.action.remove:""},getActionDuplicateButtonText:function(){return null!==this.buttonText&&this.buttonText.action?this.buttonText.action.duplicate:""},handleDialogTabChange:function(t,e){for(var o=Object.keys(t),i=0,a=0;a<o.length;a++)i=o[a].startsWith(e)?i+1:i;i===o.length&&this.$emit("validationTabFailCallback")},isStatusOn:function(){return this.entity.status===this.status.on},isStatusOff:function(){return this.entity.status===this.status.off}},computed:{},components:{}}},762:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"am-dialog-footer"},[o("div",{staticClass:"am-dialog-footer-actions"},[o("transition",{attrs:{name:"slide-vertical"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteConfirmation,expression:"showDeleteConfirmation"}],staticClass:"am-dialog-confirmation"},[o("h3",{directives:[{name:"show",rawName:"v-show",value:t.allowedDelete,expression:"allowedDelete"}]},[t._v("\n            "+t._s(t.message.confirm.remove)+"\n          ")]),t._v(" "),t.action.haveRemoveEffect&&t.deleteEffectMessage?o("el-alert",{attrs:{title:"",type:"warning",description:t.deleteEffectMessage,"show-icon":"",closable:!1}}):t._e(),t._v(" "),t.hasApplyGloballyDeletion?o("div",{staticClass:"align-left"},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.deleteEntity(!1)}}},[t._v("\n              "+t._s(t.getConfirmDeleteButtonText().no)+"\n            ")]),t._v(" "),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.deleteEntity(!0)}}},[t._v("\n              "+t._s(t.getConfirmDeleteButtonText().yes)+"\n            ")])],1):o("div",{staticClass:"align-left"},[t.allowedDelete?o("el-button",{attrs:{size:"small"},on:{click:function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation}}},[t._v("\n              "+t._s(t.$root.labels.cancel)+"\n            ")]):t._e(),t._v(" "),t.allowedDelete?o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.deleteEntity(!1)}}},[t._v("\n              "+t._s(t.$root.labels.delete)+"\n            ")]):t._e(),t._v(" "),t.allowedDelete?t._e():o("el-button",{attrs:{size:"small"},on:{click:function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation}}},[t._v("\n              "+t._s(t.$root.labels.close)+"\n            ")])],1)],1)]),t._v(" "),o("transition",{attrs:{name:"slide-vertical"}},[t.status?o("div",{directives:[{name:"show",rawName:"v-show",value:t.showVisibilityConfirmation,expression:"showVisibilityConfirmation"}],staticClass:"am-dialog-confirmation"},[t.isStatusOn()?o("h3",[t._v(t._s(t.message.confirm.hide))]):t.isStatusOff()?o("h3",[t._v(t._s(t.message.confirm.show))]):t._e(),t._v(" "),t.hasApplyGloballyVisibility?o("div",{staticClass:"align-left"},[t.isStatusOn()?o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.hideEntity(!1)}}},[t._v("\n              "+t._s(t.getConfirmStatusButtonText().no)+"\n            ")]):t._e(),t._v(" "),t.isStatusOn()?o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.hideEntity(!0)}}},[t._v("\n              "+t._s(t.getConfirmStatusButtonText().yes)+"\n            ")]):t._e(),t._v(" "),t.isStatusOff()?o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.showEntity(!1)}}},[t._v("\n              "+t._s(t.getConfirmStatusButtonText().no)+"\n            ")]):t._e(),t._v(" "),t.isStatusOff()?o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.showEntity(!0)}}},[t._v("\n              "+t._s(t.getConfirmStatusButtonText().yes)+"\n            ")]):t._e()],1):o("div",{staticClass:"align-left"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.showVisibilityConfirmation=!t.showVisibilityConfirmation}}},[t._v("\n              "+t._s(t.$root.labels.cancel)+"\n            ")]),t._v(" "),t.isStatusOn()?o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.hideEntity(!1)}}},[t._v("\n              "+t._s(t.getConfirmStatusButtonText().yes)+"\n            ")]):t._e(),t._v(" "),t.isStatusOff()?o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.showEntity(!1)}}},[t._v("\n              "+t._s(t.getConfirmStatusButtonText().yes)+"\n            ")]):t._e()],1)]):t._e()]),t._v(" "),o("transition",{attrs:{name:"slide-vertical"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showDuplicateConfirmation,expression:"showDuplicateConfirmation"}],staticClass:"am-dialog-confirmation"},[o("h3",[t._v(t._s(t.message.confirm.duplicate))]),t._v(" "),o("div",{staticClass:"align-left"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.showDuplicateConfirmation=!t.showDuplicateConfirmation}}},[t._v("\n              "+t._s(t.$root.labels.cancel)+"\n            ")]),t._v(" "),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.duplicateEntity}},[t._v("\n              "+t._s(t.$root.labels.duplicate)+"\n            ")])],1)])]),t._v(" "),o("transition",{attrs:{name:"slide-vertical"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showSaveConfirmation,expression:"showSaveConfirmation"}],staticClass:"am-dialog-confirmation"},[t.buttonText?o("h3",[t._v(t._s(t.message.confirm.save))]):t._e(),t._v(" "),t.buttonText?o("div",{staticClass:"align-left"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.onSubmit(!1)}}},[t._v("\n              "+t._s(t.getConfirmSaveButtonText().no)+"\n            ")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.onSubmit(!0)}}},[t._v("\n              "+t._s(t.getConfirmSaveButtonText().yes)+"\n            ")])],1):t._e(),t._v(" "),t.action.haveSaveWarning?o("el-alert",{staticStyle:{"word-break":"break-word"},attrs:{title:"",type:"warning",description:t.message.confirm.save,"show-icon":"",closable:!1}}):t._e()],1)]),t._v(" "),t.isNew?o("el-row",[o("el-col",{staticClass:"align-right",attrs:{sm:24}},[o("el-button",{attrs:{type:""},on:{click:t.closeDialog}},[t._v("\n            "+t._s(t.$root.labels.cancel)+"\n          ")]),t._v(" "),t.action.haveAdd&&t.action.haveEdit?o("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary",loading:t.loadSaveButton},on:{click:t.handleSaveClick}},[t._v("\n            "+t._s(t.$root.labels.save)+"\n          ")]):t._e()],1)],1):o("el-row",[o("el-col",{staticClass:"align-left",attrs:{sm:16}},[t.action.haveDuplicate?o("el-button",{class:{"am-button-icon":t.hasIcons,"am-dialog-create":!t.hasIcons},attrs:{type:t.getButtonType("duplicate")},on:{click:t.handleDuplicateConfirmation}},[t.hasIcons?o("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.duplicate,src:t.$root.getUrl+"public/img/copy.svg"}}):o("span",[t._v(t._s(t.getActionDuplicateButtonText()))])]):t._e(),t._v(" "),t.action.haveStatus?o("el-button",{class:{"am-button-icon":t.hasIcons,"am-dialog-create":!t.hasIcons},attrs:{type:t.getButtonType("status")},on:{click:t.handleVisibilityConfirmation}},[t.hasIcons?o("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.hide,src:t.$root.getUrl+(t.isStatusOff()?"public/img/unhide.svg":"public/img/hide.svg")}}):o("span",[t._v("\n              "+t._s(t.getActionStatusButtonText())+"\n            ")])]):t._e(),t._v(" "),t.action.haveRemove?o("el-button",{class:{"am-button-icon":t.hasIcons,"am-dialog-create":!t.hasIcons},attrs:{type:t.getButtonType("remove")},on:{click:t.handleDeleteConfirmation}},[t.hasIcons?o("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.delete,src:t.$root.getUrl+"public/img/delete.svg"}}):o("span",[t._v("\n              "+t._s(t.getActionRemoveButtonText())+"\n            ")])]):t._e()],1),t._v(" "),o("el-col",{staticClass:"align-right",attrs:{sm:!1===t.action.haveRemove&&!1===t.action.haveStatus&&!1===t.action.haveDuplicate?24:8}},[t.action.haveAdd&&t.action.haveEdit?o("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary",loading:t.loadSaveButton},on:{click:t.handleSaveClick}},[t._v("\n            "+t._s(t.$root.labels.save)+"\n          ")]):t._e()],1)],1)],1)]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogLoading,expression:"dialogLoading"}],staticClass:"am-dialog-loader"},[o("div",{staticClass:"am-dialog-loader-content"},[o("img",{attrs:{src:t.$root.getUrl+"public/img/spinner.svg"}}),t._v(" "),o("p",[t._v(t._s(t.$root.labels.loader_message))])])])])},staticRenderFns:[]}},777:function(t,e,o){var i=o(335)(o(779),o(780),!1,null,null,null);t.exports=i.exports},779:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mixins:[],props:{params:null,visible:!1,label:"",count:0,show:null},data:function(){return{currentPage:null}},methods:{change:function(){this.$emit("change")}},computed:{paginationMessage:function(){return this.$root.labels.showing+" "+(this.params.page*this.getItemsPerPage-this.getItemsPerPage+1)+" "+this.$root.labels.to+" "+(this.params.page*this.getItemsPerPage>this.count?this.count:this.params.page*this.getItemsPerPage)+" "+this.$root.labels.of+" "+this.count+" "+this.label},getItemsPerPage:function(){return void 0===this.show||null===this.show?this.$root.settings.general.itemsPerPage:this.show}}}},780:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"am-pagination am-section"},[o("el-row",[o("el-col",{attrs:{sm:8}},[o("p",[t._v(t._s(t.paginationMessage))])]),t._v(" "),o("el-col",{attrs:{sm:16}},[o("el-pagination",{attrs:{layout:"prev, pager, next","page-size":t.getItemsPerPage,total:t.count,"current-page":t.params.page},on:{"update:currentPage":function(e){return t.$set(t.params,"page",e)},"update:current-page":function(e){return t.$set(t.params,"page",e)},"current-change":t.change}})],1)],1)],1)},staticRenderFns:[]}},792:function(t,e,o){"use strict";e.a={data:function(){return{}},methods:{filterResponseData:function(){this.options.entities.employees.length&&(this.options.entities.employees[0].locationId=null,this.options.entities.employees[0].serviceList.forEach(function(t){t.maxCapacity=1,t.minCapacity=1,t.timeAfter="",t.timeBefore=""}))},setInitialEmployee:function(t){var e=this;t.length||this.$http.get(this.$root.getAjaxUrl+"/users/current").then(function(t){var o=null;(o=t.data.data.user?{email:t.data.data.user.email,firstName:t.data.data.user.firstName,lastName:t.data.data.user.lastName,phone:t.data.data.user.phone||""}:{firstName:"firstname",lastName:"lastname",email:"example@example.com"}).type="provider",o.weekDayList=e.getSettingsSchedule(),e.form.post(e.$root.getAjaxUrl+"/users/providers",o).then(function(t){e.options.employees=[t.data.user]}).catch()}).catch()}}}},796:function(t,e,o){var i=o(335)(o(797),o(798),!1,null,null,null);t.exports=i.exports},797:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(696),a=o(338);e.default={mixins:[i.a,a.a],props:{data:null,action:null},data:function(){return{delimiter:",",delimiters:[{label:this.$root.labels.csv_delimiter_comma,value:","},{label:this.$root.labels.csv_delimiter_semicolon,value:";"}],separateBookings:!1,hasSeparateBookingOption:!1}},updated:function(){},mounted:function(){},methods:{changeFields:function(){},closeDialog:function(){this.$emit("closeDialogExport")},getAction:function(){}},components:{}}},798:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"am-dialog-scrollable"},[o("div",{staticClass:"am-dialog-header"},[o("el-row",[o("el-col",{attrs:{span:14}},[o("h2",[t._v(t._s(t.$root.labels.export))])]),t._v(" "),o("el-col",{staticClass:"align-right",attrs:{span:10}},[o("el-button",{staticClass:"am-dialog-close",attrs:{size:"small",icon:"el-icon-close"},on:{click:t.closeDialog}})],1)],1)],1),t._v(" "),o("BlockLite"),t._v(" "),o("el-form",{class:{"am-lite-container-disabled":t.$root.isLite},attrs:{"label-position":"top"}},[o("el-form-item",{attrs:{label:t.$root.labels.csv_delimiter+":"}},[o("el-select",{attrs:{placeholder:t.$root.labels.csv_delimiter},on:{change:t.changeFields},model:{value:t.delimiter,callback:function(e){t.delimiter=e},expression:"delimiter"}},t._l(t.delimiters,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),t.hasSeparateBookingOption?o("el-form-item",{attrs:{label:t.$root.labels["select_rows_settings"+(t.action===t.$root.getAjaxUrl+"/report/event/attendees"?"_event":"")]+":"}},[o("el-select",{attrs:{placeholder:t.$root.labels.exported_same_row},on:{change:t.changeFields},model:{value:t.separateBookings,callback:function(e){t.separateBookings=e},expression:"separateBookings"}},[o("el-option",{attrs:{label:this.$root.labels["exported_same_row"+(t.action===t.$root.getAjaxUrl+"/report/event/attendees"?"_event":"")],value:!1}}),t._v(" "),o("el-option",{attrs:{label:this.$root.labels["exported_separate_rows"+(t.action===t.$root.getAjaxUrl+"/report/event/attendees"?"_event":"")],value:!0}})],1)],1):t._e(),t._v(" "),t._l(t.data.fields,function(e){return[o("el-checkbox",{attrs:{checked:"",label:e.label,border:""},on:{change:t.changeFields},model:{value:e.checked,callback:function(o){t.$set(e,"checked",o)},expression:"field.checked"}})]})],2)],1),t._v(" "),o("div",{staticClass:"am-dialog-footer",class:{"am-lite-container-disabled":t.$root.isLite}},[o("div",{staticClass:"am-dialog-footer-actions"},[o("el-row",[o("el-col",{staticClass:"align-right",attrs:{sm:24}},[o("el-button",{attrs:{type:""},on:{click:t.closeDialog}},[t._v("\n            "+t._s(t.$root.labels.cancel)+"\n          ")]),t._v(" "),o("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary","native-type":"submit"},on:{click:t.closeDialog}},[t._v("\n            "+t._s(t.$root.labels.export)+"\n          ")])],1)],1)],1)])])},staticRenderFns:[]}},807:function(t,e,o){var i=o(335)(o(808),o(809),!1,null,null,null);t.exports=i.exports},808:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(708),a=o.n(i),n=o(754),s=(o.n(n),o(338)),r=o(696),l=o(700),c=o(699),u=o(722);e.default={mixins:[r.a,s.a,l.a,c.a,u.a],props:{modalData:null,bookingFetched:!1},data:function(){return{booking:{},dialogLoading:!0,finance:{bookablePriceTotal:0,extrasPriceTotal:0,discountTotal:0,subTotal:0,due:0},form:new a.a,payment:{},paymentStatuses:[{value:"pending",label:this.$root.labels.pending},{value:"paid",label:this.$root.labels.paid},{value:"partiallyPaid",label:this.$root.labels.partially_paid}],showDeleteConfirmation:!1,showUpdatePaymentAmount:!1}},created:function(){a.a.defaults.axios=this.$http,this.bookingFetched&&(this.setFinance(),this.dialogLoading=!1)},updated:function(){this.$nextTick(function(){var t=this;setTimeout(function(){t.inlineSVG()},5)})},methods:{getTicketsData:function(){var t=this,e=[];return"bookable"in this.modalData&&this.modalData.bookable&&this.modalData.bookings.forEach(function(o){o.payments.forEach(function(i){i.id===t.modalData.paymentId&&o.ticketsData.forEach(function(o){var i=t.modalData.bookable.customTickets.find(function(t){return t.id===o.eventTicketId});i&&e.push({name:i.name,persons:o.persons})})})}),e},instantiateDialog:function(){null!==this.modalData.bookings&&(this.setFinance(),this.dialogLoading=!1)},setFinance:function(){var t=this;t.modalData.bookings.forEach(function(e){e.payments.forEach(function(o){if(o.id===t.modalData.paymentId){if(t.payment=o,t.booking=e,t.finance.extrasPriceTotal=0,e.extras.forEach(function(o){t.finance.extrasPriceTotal+=o.price*o.quantity*(o.aggregatedPrice?e.persons:1)}),e.ticketsData&&e.ticketsData.length){var i=0;e.ticketsData.forEach(function(t){i+=t.price*(e.aggregatedPrice?t.persons:1)}),t.finance.bookablePriceTotal=i}else t.finance.bookablePriceTotal=e.price*(e.aggregatedPrice?e.persons:1);t.finance.subTotal=t.finance.bookablePriceTotal+t.finance.extrasPriceTotal,t.finance.discountTotal=t.finance.subTotal/100*(e.coupon?e.coupon.discount:0)+(e.coupon?e.coupon.deduction:0),t.finance.discountTotal+=t.payment.wcOrderId?t.payment.wcItemCouponValue:0,t.finance.total=t.finance.subTotal-t.finance.discountTotal,t.finance.total+=t.payment.wcOrderId?t.payment.wcItemTaxValue:0,t.finance.total=t.finance.total>=0?t.finance.total:0,t.finance.due=t.finance.total-t.payment.amount>=0?t.finance.total-t.payment.amount:0}})})},closeDialog:function(){this.$emit("closeDialogPayment")},getPaymentStatus:function(t){var e="";return this.paymentStatuses.forEach(function(o){o.value===t&&(e=o.label)}),e},deletePayment:function(){var t=this;this.dialogLoading=!0,this.$http.post(this.$root.getAjaxUrl+"/payments/delete/"+this.payment.id).then(function(e){t.dialogLoading=!1,e.data&&(t.$emit("updatePaymentCallback",t.payment.id),t.showDeleteConfirmation=!t.showDeleteConfirmation,t.notify(t.$root.labels.success,t.$root.labels.payment_deleted,"success"))}).catch(function(e){t.dialogLoading=!1,t.errorMessage=e.message})},updatePayment:function(){var t=this;this.dialogLoading=!0,this.form.post(this.$root.getAjaxUrl+"/payments/"+this.payment.id,this.payment).then(function(){t.showUpdatePaymentAmount=!t.showUpdatePaymentAmount,t.setFinance(),t.notify(t.$root.labels.success,t.$root.labels.payment_saved,"success"),t.$emit("updatePaymentCallback"),t.dialogLoading=!1}).catch(function(e){t.dialogLoading=!1,t.errorMessage=e.message})},getPaymentGatewayNiceName:function(){return"onSite"===this.payment.gateway?this.$root.labels.on_site:"wc"===this.payment.gateway?this.payment.gatewayTitle:this.payment.gateway?this.payment.gateway.charAt(0).toUpperCase()+this.payment.gateway.slice(1):void 0}},watch:{bookingFetched:function(){!0===this.bookingFetched&&this.instantiateDialog()}},components:{Money:n.Money}}},809:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogLoading,expression:"dialogLoading"}],staticClass:"am-dialog-loader"},[o("div",{staticClass:"am-dialog-loader-content"},[o("img",{attrs:{src:t.$root.getUrl+"public/img/spinner.svg"}}),t._v(" "),o("p",[t._v(t._s(t.$root.labels.loader_message))])])]),t._v(" "),t.dialogLoading?t._e():o("div",{staticClass:"am-dialog-scrollable"},[o("div",{staticClass:"am-dialog-header"},[o("el-row",[o("el-col",{attrs:{span:18}},[o("h2",[t._v(t._s(t.$root.labels.payment_details))])]),t._v(" "),o("el-col",{staticClass:"align-right",attrs:{span:6}},[o("el-button",{staticClass:"am-dialog-close",attrs:{size:"small",icon:"el-icon-close"},on:{click:t.closeDialog}})],1)],1)],1),t._v(" "),o("div",{staticClass:"am-payment-details"},[o("el-row",{staticClass:"am-payment-details-row"},[o("h4",[t._v(t._s(t.$root.labels.customer))]),t._v(" "),o("el-col",{attrs:{span:24}},[o("h3",[t._v(t._s(t.modalData.customer?t.modalData.customer.firstName+" "+t.modalData.customer.lastName:""))]),t._v(" "),o("p",[t._v(t._s(t.modalData.customer?t.modalData.customer.email:""))])])],1),t._v(" "),o("el-row",{staticClass:"am-payment-details-row"},[o("h4",[t._v(t._s(t.$root.labels.payment))]),t._v(" "),o("el-col",{attrs:{span:12}},[o("p",[t._v(t._s(t.$root.labels.date))]),t._v(" "),o("p",[t._v(t._s(t.$root.labels.payment_method))]),t._v(" "),t.payment.wcOrderId?o("p",[t._v(t._s(t.$root.labels.wc_order)+":")]):t._e(),t._v(" "),o("p",[t._v(t._s(t.$root.labels.status))])]),t._v(" "),o("el-col",{attrs:{span:12}},[o("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFrontedFormattedDate(t.payment.dateTime)))]),t._v(" "),o("p",{staticClass:"am-semi-strong"},[o("img",{staticClass:"svg-amelia",style:{width:t.getPaymentIconWidth(t.payment.gateway)},attrs:{src:t.$root.getUrl+"public/img/payments/"+t.payment.gateway+".svg"}}),t._v(" "),"razorpay"!==t.payment.gateway?o("span",[t._v(t._s(t.getPaymentGatewayNiceName()))]):t._e()]),t._v(" "),t.payment.wcOrderId?o("p",[o("a",{attrs:{href:t.payment.wcOrderUrl,target:"_blank"}},[t._v("\n              #"+t._s(t.payment.wcOrderId)+"\n            ")])]):t._e(),t._v(" "),o("p",{staticClass:"am-semi-strong"},[o("i",{class:{"el-icon-circle-check":"paid"===t.payment.status||"partiallyPaid"===t.payment.status,"partially-paid":"partiallyPaid"===t.payment.status,"el-icon-refresh":"pending"===t.payment.status}}),t._v(" "),o("span",[t._v(t._s(t.getPaymentStatus(t.payment.status)))])])])],1),t._v(" "),o("el-row",{staticClass:"am-payment-details-row"},[o("h4",[t._v(t._s(t.$root.labels[t.modalData.bookableType+"_info"]))]),t._v(" "),o("el-col",{attrs:{span:12}},[o("p",[t._v(t._s(t.$root.labels[t.modalData.bookableType]))]),t._v(" "),"package"!==t.modalData.bookableType?o("p",[t._v(t._s(t.$root.labels.date))]):t._e(),t._v(" "),t.modalData.providers.length&&"appointment"===t.modalData.bookableType?o("p",[t._v(t._s(t.$root.labels.employee))]):t._e(),t._v(" "),"event"===t.modalData.bookableType&&t.getTicketsData().length?o("p",[t._v(t._s(t.$root.labels.event_tickets))]):t._e()]),t._v(" "),o("el-col",{attrs:{span:12}},[o("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.modalData.bookableName))]),t._v(" "),"package"!==t.modalData.bookableType?o("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFrontedFormattedDateTime(t.modalData.bookingStart)))]):t._e(),t._v(" "),t.modalData.providers.length&&"appointment"===t.modalData.bookableType?o("p",{staticClass:"am-semi-strong"},[o("img",{staticClass:"am-employee-photo",attrs:{src:t.pictureLoad(t.modalData.providers[0],!0)},on:{error:function(e){return t.imageLoadError(t.modalData.providers[0].id,!0)}}}),t._v("\n            "+t._s(t.modalData.providers.length?t.modalData.providers[0].fullName:"")+"\n          ")]):t._e(),t._v(" "),"event"===t.modalData.bookableType&&t.getTicketsData().length?o("p",{staticClass:"am-semi-strong",staticStyle:{"white-space":"unset"}},t._l(t.getTicketsData(),function(e){return o("span",{staticClass:"am-attendees-plus"},[t._v("\n              "+t._s(e.persons)+" x "+t._s(e.name)+"\n            ")])}),0):t._e()])],1),t._v(" "),o("el-row",{staticClass:"am-payment-details-row am-payment-summary"},[o("el-col",{attrs:{span:12}},[o("p",[t._v(t._s(t.$root.labels[("appointment"===t.modalData.bookableType?"service":"event"===t.modalData.bookableType?"event":"package")+"_price"]))]),t._v(" "),"package"!==t.modalData.bookableType&&"event"!==t.modalData.bookableType?o("p",[t._v(t._s(t.$root.labels.extras))]):t._e(),t._v(" "),"package"!==t.modalData.bookableType&&"event"!==t.modalData.bookableType?o("p",[t._v(t._s(t.$root.labels.subtotal))]):t._e(),t._v(" "),"package"!==t.modalData.bookableType||t.payment.wcOrderId&&t.payment.wcItemCouponValue?o("p",[t._v(t._s(t.$root.labels.discount_amount))]):t._e(),t._v(" "),t.payment.wcOrderId&&t.payment.wcItemTaxValue?o("p",[t._v(t._s(t.$root.labels.tax))]):t._e(),t._v(" "),o("p",[t._v(t._s(t.$root.labels.paid))]),t._v(" "),o("p",[t._v(t._s(t.$root.labels.due))]),t._v(" "),o("p",{staticClass:"am-payment-total"},[t._v(t._s(t.$root.labels.total))])]),t._v(" "),o("el-col",{attrs:{span:12}},[o("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.bookablePriceTotal)))]),t._v(" "),"package"!==t.modalData.bookableType&&"event"!==t.modalData.bookableType?o("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.extrasPriceTotal)))]):t._e(),t._v(" "),"package"!==t.modalData.bookableType&&"event"!==t.modalData.bookableType?o("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.subTotal)))]):t._e(),t._v(" "),"package"!==t.modalData.bookableType||t.payment.wcOrderId&&t.payment.wcItemCouponValue?o("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.discountTotal>t.finance.subTotal?t.finance.subTotal:t.finance.discountTotal)))]):t._e(),t._v(" "),t.payment.wcOrderId&&t.payment.wcItemTaxValue?o("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.payment.wcItemTaxValue)))]):t._e(),t._v(" "),o("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.payment.amount)))]),t._v(" "),o("p",{staticClass:"am-semi-strong"},[t._v(t._s(t.getFormattedPrice(t.finance.due)))]),t._v(" "),o("p",{staticClass:"am-semi-strong am-payment-total"},[t._v(t._s(t.getFormattedPrice(t.finance.total)))])])],1)],1)]),t._v(" "),!0!==t.$root.settings.capabilities.canWriteOthers||t.dialogLoading?t._e():o("div",{staticClass:"am-dialog-footer"},[o("div",{staticClass:"am-dialog-footer-actions"},[o("transition",{attrs:{name:"slide-vertical"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteConfirmation,expression:"showDeleteConfirmation"}],staticClass:"am-dialog-confirmation"},[o("h3",[t._v(t._s(t.$root.labels.confirm_delete_payment))]),t._v(" "),o("div",{staticClass:"align-left"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation,t.showDeleteConfirmation=!1}}},[t._v("\n              "+t._s(t.$root.labels.cancel)+"\n            ")]),t._v(" "),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.deletePayment()}}},[t._v("\n              "+t._s(t.$root.labels.delete)+"\n            ")])],1)])]),t._v(" "),o("transition",{attrs:{name:"slide-vertical"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showUpdatePaymentAmount,expression:"showUpdatePaymentAmount"}],staticClass:"am-dialog-confirmation"},[o("el-form",{attrs:{"label-position":"top"}},[o("h3",[t._v(t._s(t.$root.labels.enter_new_payment_amount))]),t._v(" "),o("el-row",{staticClass:"am-no-padding",attrs:{gutter:24}},[o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:t.$root.labels.payment+":"}},[o("money",t._b({staticClass:"el-input__inner",model:{value:t.payment.amount,callback:function(e){t.$set(t.payment,"amount",e)},expression:"payment.amount"}},"money",t.moneyComponentData,!1))],1)],1),t._v(" "),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:t.$root.labels.status+":"}},[o("el-select",{model:{value:t.payment.status,callback:function(e){t.$set(t.payment,"status",e)},expression:"payment.status"}},t._l(t.paymentStatuses,function(e){return o("el-option",{key:e.value,staticClass:"am-appointment-status-option",attrs:{label:e.label,value:e.value}},[o("span",{staticClass:"am-appointment-status-symbol",class:e.value}),t._v(" "),o("span",[t._v(t._s(e.label))])])}),1)],1)],1)],1),t._v(" "),o("div",{staticClass:"align-left"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.showUpdatePaymentAmount=!t.showUpdatePaymentAmount}}},[t._v("\n                "+t._s(t.$root.labels.close)+"\n              ")])],1)],1)],1)]),t._v(" "),o("el-row",[o("el-col",{staticClass:"align-left",attrs:{sm:6}},[!0===t.$root.settings.capabilities.canDelete?o("el-button",{staticClass:"am-button-icon",on:{click:function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation,t.showUpdatePaymentAmount=!1}}},[o("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.delete,src:t.$root.getUrl+"public/img/delete.svg"}})]):t._e(),t._v(" "),o("el-button",{staticClass:"am-button-icon",on:{click:function(e){t.showUpdatePaymentAmount=!t.showUpdatePaymentAmount,t.showDeleteConfirmation=!1}}},[o("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.edit,src:t.$root.getUrl+"public/img/edit.svg"}})])],1),t._v(" "),o("el-col",{staticClass:"align-right",attrs:{sm:18}},[o("el-button",{attrs:{type:""},on:{click:t.closeDialog}},[t._v("\n            "+t._s(t.$root.labels.cancel)+"\n          ")]),t._v(" "),o("el-button",{staticClass:"am-dialog-create",attrs:{type:"primary"},on:{click:function(e){return t.updatePayment()}}},[t._v("\n            "+t._s(t.$root.labels.save)+"\n          ")])],1)],1)],1)])])},staticRenderFns:[]}},933:function(t,e,o){"use strict";e.a={data:function(){return{count:{success:0,error:0}}},methods:{deleteEntities:function(t,e,o,i){var a=this;t.forEach(function(n){a.$http.post(a.$root.getAjaxUrl+"/"+a.name+"/delete/"+n).then(function(){a.deleteEntityResult(t,!0,e),o(n)}).catch(function(){a.deleteEntityResult(t,!1,e),i(n)})})},deleteEntityResult:function(t,e,o){t.pop(),e?this.count.success++:this.count.error++,0===t.length&&(this.count.success&&this.notify(this.$root.labels.success,this.count.success+" "+(this.count.success>1?this.successMessage.multiple:this.successMessage.single),"success"),this.count.error&&this.notify(this.$root.labels.error,this.count.error+" "+(this.count.error>1?this.errorMessage.multiple:this.errorMessage.single),"error"),this.count.success=0,this.count.error=0,o())}}}},934:function(t,e,o){"use strict";e.a={data:function(){return{}},methods:{handleCheckAll:function(t,e,o){var i=void 0!==o?o:e.allChecked;return t.forEach(function(t){t.checked=i}),e.allChecked=i,e.toaster=i,e},handleCheckSingle:function(t,e){var o=0;return t.forEach(function(t){t.checked&&o++}),e.allChecked=o===t.length,e.toaster=0!==o,e}}}},968:function(t,e,o){var i=o(335)(o(969),o(970),!1,null,null,null);t.exports=i.exports},969:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(700),a=o(934),n=o(933);e.default={mixins:[i.a,a.a,n.a],props:{name:null,entities:null,checkGroupData:{toaster:!1,allChecked:!1},confirmDeleteMessage:"",successMessage:{single:"",multiple:""},errorMessage:{single:"",multiple:""}},data:function(){return{deleteGroupLoading:!1,showDeleteConfirmation:!1}},methods:{deleteSelectedEntities:function(){var t=this;this.deleteGroupLoading=!0,this.deleteEntities(this.entities.filter(function(t){return t.checked}).map(function(t){return t.id}),function(){t.showDeleteConfirmation=!1,t.deleteGroupLoading=!1,t.$emit("groupDeleteCallback")},function(t){},function(t){})}}}},970:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"slide-vertical"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.checkGroupData.toaster,expression:"checkGroupData.toaster"}],staticClass:"am-bottom-popover"},[o("transition",{attrs:{name:"fade"}},[o("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.showDeleteConfirmation,expression:"!showDeleteConfirmation"}],staticClass:"am-button-icon",on:{click:function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation}}},[o("img",{staticClass:"svg-amelia",attrs:{alt:t.$root.labels.delete,src:t.$root.getUrl+"public/img/delete.svg"}})])],1),t._v(" "),o("transition",{attrs:{name:"slide-vertical"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteConfirmation,expression:"showDeleteConfirmation"}],staticClass:"am-bottom-popover-confirmation"},[o("el-row",{attrs:{type:"flex",justify:"start",align:"middle"}},[o("h3",[t._v(t._s(t.confirmDeleteMessage))]),t._v(" "),o("div",{staticClass:"align-left"},[o("el-button",{attrs:{size:"small"},on:{click:function(e){t.showDeleteConfirmation=!t.showDeleteConfirmation}}},[t._v("\n              "+t._s(t.$root.labels.cancel)+"\n            ")]),t._v(" "),o("el-button",{attrs:{size:"small",type:"primary",loading:t.deleteGroupLoading},on:{click:t.deleteSelectedEntities}},[t._v("\n              "+t._s(t.$root.labels.delete)+"\n            ")])],1)])],1)])],1)])},staticRenderFns:[]}}});